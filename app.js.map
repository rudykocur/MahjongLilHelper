{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/app.js","js/game.js","js/hand.js","js/init.js","js/scoring.js","js/utils.js","js/view/gameBalance.js","js/view/gamePanel.js","js/view/gamesList.js","js/view/handCreator.js","js/view/newGameForm.js","js/view/templates.js","node_modules/needlepoint/dist/container.js","node_modules/needlepoint/dist/dependencies.js","node_modules/needlepoint/dist/index.js","node_modules/needlepoint/dist/singleton.js"],"names":[],"mappings":"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QAAzC;AACH,aAFD;AAGH;;;2CAEkB;AACf,mBAAO,OAAO,IAAP,CAAY,KAAK,UAAjB,CAAP;AACH;;;;;;AAGL;;;;;;IAOa,W,WAAA,W;AACT;;;;AAIA,yBAAY,QAAZ,EAAsB;AAAA;;AAClB,aAAK,QAAL,GAAgB,QAAhB;;AAEA;;;AAGA,aAAK,MAAL,GAAc,KAAK,UAAL,CAAgB,QAAhB,CAAd;AACH;;;;mCAEU,O,EAAS;AAChB,mBAAO,MAAM,IAAN,CAAW,QAAQ,gBAAR,CAAyB,aAAzB,CAAX,EAAoD,GAApD,CAAwD,oBAAY;AACvE,uBAAO;AACH,0BAAM,QADH;AAEH,0BAAM,SAAS,OAAT,CAAiB;AAFpB,iBAAP;AAIH,aALM,CAAP;AAMH;;;kCAES,U,EAAY;AAClB,iBAAK,MAAL,CAAY,OAAZ,CAAoB,gBAAQ;AACxB,oBAAG,KAAK,IAAL,IAAa,UAAhB,EAA4B;AACxB,yBAAK,IAAL,CAAU,WAAV,GAAwB,WAAW,KAAK,IAAhB,CAAxB;AACH;AACJ,aAJD;AAKH;;AAED;;;;;;kCAGU;AACN,mBAAO,KAAK,QAAZ;AACH;;;;;;;AChFL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\r\nimport {Hand} from './hand.js';\r\nimport {Player, Game} from './game.js';\r\nimport {HandCreatorView} from \"./view/handCreator.js\";\r\nimport {GameBalanceTableView} from \"./view/gameBalance\";\r\n\r\nimport {dependencies} from 'needlepoint';\r\nimport {domLoader} from \"./view/templates\";\r\nimport {GamesListView} from \"./view/gamesList\";\r\nimport {NewGameFormView} from \"./view/newGameForm\";\r\n\r\n\r\n/**\r\n * @typedef {Object} OnEditFinishEvent\r\n * @property {Round} round\r\n * @property {Player} player\r\n * @property {Array<TileSet>} tilesets\r\n * @property {boolean} isWinner\r\n * @property {boolean} lastTileFromWall\r\n * @property {boolean} lastAvailableTile\r\n * @property {boolean} lastTileSpecial\r\n */\r\n\r\n/**\r\n * @typedef {Object} OnHandEditEvent\r\n * @property {Round} round\r\n * @property {Player} player\r\n */\r\n\r\n\r\n@dependencies(domLoader('app'), HandCreatorView, GameBalanceTableView, GamesListView, NewGameFormView)\r\nexport class MainAppUI {\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     * @param {HandCreatorView} handCreator\r\n     * @param {GameBalanceTableView} balanceView\r\n     * @param {GamesListView} gameList\r\n     * @param {NewGameFormView} newGameForm\r\n     */\r\n    constructor(template, handCreator, balanceView, gameList, newGameForm) {\r\n        this.root = template.getRoot();\r\n\r\n        this.handCreator = handCreator;\r\n        this.balanceTable = balanceView;\r\n        this.gameList = gameList;\r\n        this.newGameForm = newGameForm;\r\n\r\n        this.panels = [this.handCreator, this.balanceTable, this.gameList, this.newGameForm];\r\n        /**\r\n         *\r\n         * @type {GamePanel}\r\n         */\r\n        this.activePanel = null;\r\n\r\n        this.panels.forEach(panel => {\r\n            this.root.appendChild(panel.getRoot());\r\n            panel.hide();\r\n        });\r\n\r\n        this.handCreator.initUI();\r\n    }\r\n\r\n    showPanel(panel) {\r\n        if(this.activePanel) {\r\n            this.activePanel.hide();\r\n        }\r\n\r\n        this.activePanel = panel;\r\n\r\n        this.activePanel.show();\r\n    }\r\n\r\n    mount(parent) {\r\n        parent.appendChild(this.root);\r\n    }\r\n}\r\n\r\n@dependencies(MainAppUI)\r\nexport class MahjongLilHelperMainViewController {\r\n\r\n    /**\r\n     * @param {MainAppUI} view\r\n     */\r\n    constructor(view) {\r\n        this.view = view;\r\n\r\n        /**\r\n         * @type {Game}\r\n         */\r\n        this.currentGame = null;\r\n\r\n        /**\r\n         * @type {Array<Game>}\r\n         */\r\n        this.games = [];\r\n\r\n        this.view.gameList.gameSelectedEvent.addListener(game => {\r\n            this.loadGame(game);\r\n        });\r\n\r\n        this.view.gameList.newGameEvent.addListener(() => this.view.showPanel(this.view.newGameForm));\r\n\r\n        this.view.newGameForm.cancelEvent.addListener(() => this.view.showPanel(this.view.gameList));\r\n\r\n        this.view.newGameForm.newGameCreateEvent.addListener(players => this.addNewGame(players));\r\n\r\n        this.view.balanceTable.onHandEditClick.addListener((/*OnHandEditEvent*/event) => {\r\n            this.view.showPanel(this.view.handCreator);\r\n\r\n            this.view.handCreator.showHand(event.round, event.player);\r\n        });\r\n\r\n        this.view.balanceTable.addRoundEvent.addListener(() => {\r\n            this.currentGame.createRound();\r\n            this.view.balanceTable.renderGameBalance(this.currentGame);\r\n        });\r\n\r\n        this.view.balanceTable.returnToGameListEvent.addListener(() => {\r\n            this.view.gameList.loadGames(this.games);\r\n\r\n            this.view.showPanel(this.view.gameList);\r\n        });\r\n\r\n        this.view.handCreator.onEditFinish.addListener(this.handleHandEditFinish.bind(this));\r\n    }\r\n\r\n    loadState(games) {\r\n        this.view.showPanel(this.view.gameList);\r\n\r\n        this.games = games;\r\n        this.view.gameList.loadGames(this.games);\r\n    }\r\n\r\n    loadGame(game) {\r\n        this.view.showPanel(this.view.balanceTable);\r\n        this.currentGame = game;\r\n        this.view.balanceTable.renderGameBalance(this.currentGame);\r\n    }\r\n\r\n    addNewGame(players) {\r\n        this.games.push(new Game(...players));\r\n\r\n        this.view.showPanel(this.view.gameList);\r\n\r\n        this.view.gameList.loadGames(this.games);\r\n    }\r\n\r\n    /**\r\n     * @param {OnEditFinishEvent} event\r\n     */\r\n    handleHandEditFinish(event) {\r\n        this.view.showPanel(this.view.balanceTable);\r\n\r\n        let hand = new Hand();\r\n        event.tilesets.forEach(set => hand.addSet(set));\r\n\r\n        event.round.setHand(event.player, hand);\r\n        if(event.isWinner) {\r\n            event.round.setWinner(event.player, event.lastAvailableTile, event.lastTileFromWall);\r\n        }\r\n\r\n        this.view.balanceTable.renderGameBalance(this.currentGame);\r\n    }\r\n}\r\n","import * as hand from './hand.js';\r\nimport * as score from './scoring.js';\r\n\r\nclass Player {\r\n    constructor(seatNumber, name) {\r\n        this.seatNumber = seatNumber;\r\n        this.name = name;\r\n    }\r\n}\r\n\r\nclass Round {\r\n    constructor(players, roundIndex) {\r\n        this.roundNumber = roundIndex + 1;\r\n        this.roundIndex = roundIndex;\r\n\r\n        this.balanceCalculator = new RoundBalanceCalculator();\r\n        this.scoreCalculator = score.ScoreCalculator.createDefaultScoreCalculator();\r\n\r\n        this.windPhase = Math.floor(this.roundIndex/4);\r\n        this.windIndicator = hand.WindOrder[this.windPhase % 4];\r\n\r\n        this.eastWindPlayer = players[this.roundIndex % 4];\r\n\r\n        /**\r\n         * @type {Player}\r\n         */\r\n        this.winner = null;\r\n        this.lastAvailableTile = false;\r\n        this.lastTileFromWall = false;\r\n\r\n        this.hands = [\r\n            {player: players[0], hand: null},\r\n            {player: players[1], hand: null},\r\n            {player: players[2], hand: null},\r\n            {player: players[3], hand: null},\r\n        ];\r\n\r\n        this.players = players;\r\n        this.roundScores = [0, 0, 0, 0];\r\n    }\r\n\r\n    setHand(player, hand) {\r\n        this.hands[player.seatNumber].hand = hand;\r\n\r\n        this.roundScores[player.seatNumber] = this.scoreCalculator.calculateScore(this, player);\r\n    }\r\n\r\n    setWinner(player, lastAvailableTile, lastTileFromWall) {\r\n        this.winner = player;\r\n        this.lastAvailableTile = lastAvailableTile || false;\r\n        this.lastTileFromWall = lastTileFromWall || false;\r\n\r\n        this.players.forEach((player, index) => {\r\n            this.roundScores[index] = this.scoreCalculator.calculateScore(this, player);\r\n        });\r\n    }\r\n\r\n    getHand(player) {\r\n        return this.hands[player.seatNumber];\r\n    }\r\n\r\n    getPlayerWind(player) {\r\n        let playerIndex = (this.windPhase + player.seatNumber - (this.roundIndex + this.windPhase) % 4) % 4;\r\n\r\n        if(playerIndex < 0) {\r\n            return hand.WindOrder[hand.WindOrder.length + playerIndex];\r\n        }\r\n\r\n        return hand.WindOrder[playerIndex];\r\n    }\r\n\r\n    getRoundBalance() {\r\n        return this.balanceCalculator.getBalance(this, this.players, this.roundScores);\r\n    }\r\n}\r\n\r\nclass RoundBalanceCalculator {\r\n    getBalance(round, players, scores) {\r\n\r\n        let result = [0, 0, 0, 0];\r\n\r\n        for(let i = 0; i < players.length; i++) {\r\n            for(let j = i+1; j < players.length; j++) {\r\n                let p1 = players[i];\r\n                let p2 = players[j];\r\n\r\n                let srcIdx = p1.seatNumber;\r\n                let otherIdx = p2.seatNumber;\r\n\r\n                let score = 0;\r\n                let mult = 1;\r\n\r\n                let dealsWithEastWind = (p1 === round.eastWindPlayer || p2 === round.eastWindPlayer);\r\n                let dealsWithWinner = (p1 === round.winner || p2 === round.winner);\r\n\r\n                if(dealsWithEastWind) {\r\n                    mult = 2;\r\n                }\r\n\r\n                let gainer, loser;\r\n\r\n                if(dealsWithWinner) {\r\n                    gainer = (p1 === round.winner) ? p1 : p2;\r\n                    loser = (p1 !== round.winner) ? p1 : p2;\r\n\r\n                    score = scores[gainer.seatNumber];\r\n                }\r\n                else {\r\n                    gainer = (scores[srcIdx] >= scores[otherIdx]) ? p1 : p2;\r\n                    loser = (scores[srcIdx] < scores[otherIdx]) ? p1 : p2;\r\n\r\n                    score = scores[gainer.seatNumber] - scores[loser.seatNumber];\r\n                }\r\n\r\n                result[gainer.seatNumber] += score * mult;\r\n                result[loser.seatNumber] -= score * mult;\r\n\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nclass Game {\r\n    constructor(p1, p2, p3, p4) {\r\n        /**\r\n         * @type {Array<Player>}\r\n         */\r\n        this.players = [p1, p2, p3, p4];\r\n\r\n        /**\r\n         * @type {Array<Round>}\r\n         */\r\n        this.rounds = [];\r\n    }\r\n\r\n    /**\r\n     * @return {Round}\r\n     */\r\n    createRound() {\r\n        let round = new Round(this.players, this.rounds.length);\r\n\r\n        this.rounds.push(round);\r\n\r\n        return round;\r\n    }\r\n\r\n    getTotalBalance(maxRoundNumber) {\r\n        let result = [0, 0, 0, 0];\r\n\r\n        maxRoundNumber = (maxRoundNumber === undefined) ? this.rounds.length : maxRoundNumber;\r\n\r\n        this.rounds.slice(0, maxRoundNumber+1).forEach(round => {\r\n            let roundBalance = round.getRoundBalance();\r\n\r\n            result[0] += roundBalance[0];\r\n            result[1] += roundBalance[1];\r\n            result[2] += roundBalance[2];\r\n            result[3] += roundBalance[3];\r\n        });\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\n// module.exports = {Game, Round, Player, RoundBalanceCalculator};\r\nexport {Game, Round, Player, RoundBalanceCalculator};","\r\n\r\nconst Suits = {\r\n    BAMBOO: 'bamboo',\r\n    CIRCLE: 'circle',\r\n    CHARACTER: 'character',\r\n    DRAGON: 'dragon',\r\n    WIND: 'wind',\r\n    BONUS: 'bonus',\r\n};\r\n\r\nconst Dragons = {\r\n    RED: 'red',\r\n    GREEN: 'green',\r\n    WHITE: 'white',\r\n};\r\n\r\nconst Winds = {\r\n    EAST: 'east',\r\n    WEST: 'west',\r\n    NORTH: 'north',\r\n    SOUTH: 'south',\r\n};\r\n\r\nconst Bonus = {\r\n    FLOWER1: 'flower1',\r\n    FLOWER2: 'flower2',\r\n    FLOWER3: 'flower3',\r\n    FLOWER4: 'flower4',\r\n    SUMMER: 'summer',\r\n    SPRING: 'spring',\r\n    AUTUMN: 'autumn',\r\n    WINTER: 'winter',\r\n};\r\n\r\n\r\nclass Tile {\r\n    constructor(isSuit, isHonour) {\r\n        this.isSuit = isSuit;\r\n        this.isHonour = isHonour;\r\n    }\r\n\r\n    equals(other) {\r\n        if(this.isSuit !== other.isSuit) {\r\n            return false;\r\n        }\r\n\r\n        return this.isHonour === other.isHonour;\r\n    }\r\n}\r\n\r\nclass SuitTile extends Tile {\r\n    constructor(suit, number) {\r\n        super(true, number < 2 || number > 8);\r\n\r\n        this.suit = suit;\r\n        this.number = number;\r\n    }\r\n\r\n    toString() {\r\n        return `[SuitTile ${this.suit}${this.number}]`\r\n    }\r\n\r\n    toTypeString() {\r\n        return `suit-${this.suit}-${this.number}`;\r\n    }\r\n\r\n    equals(other) {\r\n        if(!super.equals(other)) {\r\n            return false;\r\n        }\r\n\r\n        if(this.suit !== other.suit) {\r\n            return false;\r\n        }\r\n\r\n        return this.number === other.number;\r\n    }\r\n}\r\n\r\nclass DragonTile extends Tile {\r\n    constructor(kind) {\r\n        super(false, true);\r\n\r\n        this.dragonKind = kind;\r\n    }\r\n\r\n    toString() {\r\n        return `[DragonTile ${this.dragonKind}]`\r\n    }\r\n\r\n    toTypeString() {\r\n        return `dragon-${this.dragonKind}`;\r\n    }\r\n\r\n    equals(other) {\r\n        if(!super.equals(other)) {\r\n            return false;\r\n        }\r\n\r\n        return this.dragonKind === other.dragonKind;\r\n    }\r\n}\r\n\r\nclass WindTile extends Tile {\r\n    constructor(kind) {\r\n        super(false, true);\r\n\r\n        this.windKind = kind;\r\n    }\r\n\r\n    toString() {\r\n        return `[WindTile ${this.windKind}]`\r\n    }\r\n\r\n    toTypeString() {\r\n        return `wind-${this.windKind}`;\r\n    }\r\n\r\n    equals(other) {\r\n        if(!super.equals(other)) {\r\n            return false;\r\n        }\r\n\r\n        return this.windKind === other.windKind;\r\n    }\r\n}\r\n\r\nclass BonusTile extends Tile {\r\n    constructor(kind) {\r\n        super(false, false);\r\n\r\n        this.bonusKind = kind;\r\n    }\r\n\r\n    toTypeString() {\r\n        return `bonus-${this.bonusKind}`;\r\n    }\r\n\r\n    equals(other) {\r\n        if(!super.equals(other)) {\r\n            return false;\r\n        }\r\n\r\n        return this.bonusKind === other.bonusKind;\r\n    }\r\n}\r\n\r\nconst Tiles = {\r\n    Circle1: new SuitTile(Suits.CIRCLE, 1),\r\n    Circle2: new SuitTile(Suits.CIRCLE, 2),\r\n    Circle3: new SuitTile(Suits.CIRCLE, 3),\r\n    Circle4: new SuitTile(Suits.CIRCLE, 4),\r\n    Circle5: new SuitTile(Suits.CIRCLE, 5),\r\n    Circle6: new SuitTile(Suits.CIRCLE, 6),\r\n    Circle7: new SuitTile(Suits.CIRCLE, 7),\r\n    Circle8: new SuitTile(Suits.CIRCLE, 8),\r\n    Circle9: new SuitTile(Suits.CIRCLE, 9),\r\n\r\n    Bamboo1: new SuitTile(Suits.BAMBOO, 1),\r\n    Bamboo2: new SuitTile(Suits.BAMBOO, 2),\r\n    Bamboo3: new SuitTile(Suits.BAMBOO, 3),\r\n    Bamboo4: new SuitTile(Suits.BAMBOO, 4),\r\n    Bamboo5: new SuitTile(Suits.BAMBOO, 5),\r\n    Bamboo6: new SuitTile(Suits.BAMBOO, 6),\r\n    Bamboo7: new SuitTile(Suits.BAMBOO, 7),\r\n    Bamboo8: new SuitTile(Suits.BAMBOO, 8),\r\n    Bamboo9: new SuitTile(Suits.BAMBOO, 9),\r\n\r\n    Character1: new SuitTile(Suits.CHARACTER, 1),\r\n    Character2: new SuitTile(Suits.CHARACTER, 2),\r\n    Character3: new SuitTile(Suits.CHARACTER, 3),\r\n    Character4: new SuitTile(Suits.CHARACTER, 4),\r\n    Character5: new SuitTile(Suits.CHARACTER, 5),\r\n    Character6: new SuitTile(Suits.CHARACTER, 6),\r\n    Character7: new SuitTile(Suits.CHARACTER, 7),\r\n    Character8: new SuitTile(Suits.CHARACTER, 8),\r\n    Character9: new SuitTile(Suits.CHARACTER, 9),\r\n\r\n    DragonRed: new DragonTile(Dragons.RED),\r\n    DragonWhite: new DragonTile(Dragons.WHITE),\r\n    DragonGreen: new DragonTile(Dragons.GREEN),\r\n\r\n    WindEast: new WindTile(Winds.EAST),\r\n    WindWest: new WindTile(Winds.WEST),\r\n    WindNorth: new WindTile(Winds.NORTH),\r\n    WindSouth: new WindTile(Winds.SOUTH),\r\n\r\n    BonusFlower1: new BonusTile(Bonus.FLOWER1),\r\n    BonusFlower2: new BonusTile(Bonus.FLOWER2),\r\n    BonusFlower3: new BonusTile(Bonus.FLOWER3),\r\n    BonusFlower4: new BonusTile(Bonus.FLOWER4),\r\n    BonusSummer: new BonusTile(Bonus.SUMMER),\r\n    BonusSpring: new BonusTile(Bonus.SPRING),\r\n    BonusAutumn: new BonusTile(Bonus.AUTUMN),\r\n    BonusWinter: new BonusTile(Bonus.WINTER),\r\n};\r\n\r\nconst TileGroups = {\r\n    [Suits.BAMBOO]: [Tiles.Bamboo1, Tiles.Bamboo2, Tiles.Bamboo3, Tiles.Bamboo4, Tiles.Bamboo5, Tiles.Bamboo6, Tiles.Bamboo7, Tiles.Bamboo8, Tiles.Bamboo9],\r\n    [Suits.CIRCLE]: [Tiles.Circle1, Tiles.Circle2, Tiles.Circle3, Tiles.Circle4, Tiles.Circle5, Tiles.Circle6, Tiles.Circle7, Tiles.Circle8, Tiles.Circle9],\r\n    [Suits.CHARACTER]: [Tiles.Character1, Tiles.Character2, Tiles.Character3, Tiles.Character4, Tiles.Character5, Tiles.Character6, Tiles.Character7, Tiles.Character8, Tiles.Character9],\r\n    [Suits.DRAGON]: [Tiles.DragonRed, Tiles.DragonGreen, Tiles.DragonWhite],\r\n    [Suits.WIND]: [Tiles.WindWest, Tiles.WindEast, Tiles.WindNorth, Tiles.WindSouth],\r\n    [Suits.BONUS]: [Tiles.BonusFlower1, Tiles.BonusFlower2, Tiles.BonusFlower3, Tiles.BonusFlower4,\r\n        Tiles.BonusSummer, Tiles.BonusSpring, Tiles.BonusAutumn, Tiles.BonusWinter],\r\n};\r\n\r\nconst WindOrder = [\r\n    Tiles.WindEast,\r\n    Tiles.WindSouth,\r\n    Tiles.WindWest,\r\n    Tiles.WindNorth,\r\n];\r\n\r\nclass TileSet {\r\n    constructor(revealed, tiles) {\r\n        this.isRevealed = revealed;\r\n        this.tiles = tiles;\r\n\r\n        this.simpleSet = (tiles[0] instanceof SuitTile) && !tiles[0].isHonour;\r\n    }\r\n\r\n    getTile() {\r\n        return this.tiles[0];\r\n    }\r\n}\r\n\r\nclass Chow extends TileSet {\r\n    constructor(revealed, tile1, tile2, tile3) {\r\n        super(revealed, [tile1, tile2, tile3]);\r\n    }\r\n}\r\n\r\nclass Pung extends TileSet {\r\n    constructor(revealed, tile) {\r\n        super(revealed, [tile, tile, tile]);\r\n    }\r\n}\r\n\r\nclass Kong extends TileSet {\r\n    constructor(revealed, tile) {\r\n        super(revealed, [tile, tile, tile, tile]);\r\n    }\r\n}\r\n\r\nclass Pair extends TileSet {\r\n    constructor(tile) {\r\n        super(false, [tile, tile]);\r\n    }\r\n}\r\n\r\nclass FreeTiles extends TileSet {\r\n    constructor(tiles) {\r\n        super(false, tiles);\r\n    }\r\n}\r\n\r\n\r\nclass Hand {\r\n    constructor() {\r\n        this.tiles = [];\r\n        this.sets = [];\r\n    }\r\n\r\n    addTile(tile) {\r\n        this.tiles.push(tile);\r\n    }\r\n\r\n    getTileCount(tile) {\r\n        return this.tiles.filter((t) => t.equals(tile)).length;\r\n    }\r\n\r\n    addSet(tileSet) {\r\n        this.sets.push(tileSet);\r\n        this.tiles = this.tiles.concat(tileSet.tiles);\r\n    }\r\n\r\n    /**\r\n     * @return {Array<TileSet>}\r\n     */\r\n    getSetsOfType(clazz, tileType) {\r\n        let result = this.sets.filter((tileSet) => tileSet instanceof clazz);\r\n\r\n        if(tileType) {\r\n            result = result.filter((tileSet) => tileSet.getTile() instanceof tileType)\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getTilesOfType(tileType) {\r\n        return this.tiles.filter(tile => tile instanceof tileType);\r\n    }\r\n}\r\n\r\n// module.exports = {\r\n//     Hand, Tiles, SuitTile, Suits, Dragons, DragonTile, Winds, WindTile, Bonus, BonusTile,\r\n//     Chow, Kong, Pung, Pair, WindOrder\r\n// };\r\n\r\nexport {\r\n    Hand, Tiles, SuitTile, Suits, Dragons, DragonTile, Winds, WindTile, Bonus, BonusTile,\r\n    Chow, Kong, Pung, Pair, FreeTiles, WindOrder, TileGroups\r\n};","import {TemplateContainer} from \"./view/templates\";\r\nimport {Game, Player} from \"./game\";\r\nimport {MahjongLilHelperMainViewController} from \"./app\";\r\n\r\nimport {container} from 'needlepoint';\r\n\r\nfunction game1() {\r\n    let players = [\r\n        new Player(0, \"Grzesiek\"),\r\n        new Player(1, \"Wojtek\"),\r\n        new Player(2, \"Gosia\"),\r\n        new Player(3, \"Ola\"),\r\n    ];\r\n    let game = new Game(players[0], players[1], players[2], players[3]);\r\n\r\n    let round1 = game.createRound();\r\n    let round2 = game.createRound();\r\n    let round3 = game.createRound();\r\n\r\n    return game;\r\n}\r\n\r\nfunction game2() {\r\n    let players = [\r\n        new Player(0, \"Grzesiek\"),\r\n        new Player(1, \"Ratusz\"),\r\n        new Player(2, \"Kasia\"),\r\n        new Player(3, \"Ola\"),\r\n    ];\r\n    let game = new Game(players[0], players[1], players[2], players[3]);\r\n\r\n    let round1 = game.createRound();\r\n    // round1.roundScores = [100, 200, 300, 400];\r\n\r\n    // let round2 = game.createRound();\r\n    // // round2.roundScores = [200, 100, 50, 10];\r\n    //\r\n    // let round3 = game.createRound();\r\n\r\n    return game;\r\n}\r\n\r\nfunction game3() {\r\n    let players = [\r\n        new Player(0, \"P1\"),\r\n        new Player(1, \"P2\"),\r\n        new Player(2, \"P3\"),\r\n        new Player(3, \"P4\"),\r\n    ];\r\n    let game = new Game(players[0], players[1], players[2], players[3]);\r\n\r\n    // let round1 = game.createRound();\r\n\r\n    return game;\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\r\n\r\n    let games = [\r\n        game1(),\r\n        game2(),\r\n        game3()\r\n    ];\r\n\r\n    let tmpl = container.resolve(TemplateContainer);\r\n    tmpl.discover(document.body);\r\n\r\n    let ctrl = container.resolve(MahjongLilHelperMainViewController);\r\n\r\n    ctrl.view.mount(document.getElementById('mahjongContent'));\r\n\r\n    ctrl.loadState(games);\r\n\r\n    console.log('READY', ctrl);\r\n});","\r\nimport * as h from './hand.js';\r\n\r\n\r\nfunction calcPungKongValue(baseValue, tileSet) {\r\n    if(!tileSet.simpleSet) {\r\n        baseValue *= 2;\r\n    }\r\n\r\n    if(!tileSet.isRevealed) {\r\n        baseValue *= 2;\r\n    }\r\n\r\n    return baseValue;\r\n}\r\n\r\nfunction applyMultipliers(numMultipliers, value) {\r\n    for(let i = 0; i < numMultipliers; i++) {\r\n        value *= 2;\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\nclass ScoreCalculator {\r\n    constructor(pointsRules, multipliersForAll, multipliersForWinner) {\r\n        this.pointsRules = pointsRules;\r\n        this.multiplierRulesForAll = multipliersForAll;\r\n        this.multiplierRulesForWinner = multipliersForWinner;\r\n    }\r\n\r\n    calculateScore(round, player) {\r\n        let hand = round.getHand(player).hand;\r\n\r\n        if(hand === null) {\r\n            return 0;\r\n        }\r\n\r\n        let appliedPoints = [];\r\n        let appliedMultipliers = [];\r\n\r\n        let points = this.pointsRules.reduce((value, rule) => {\r\n            let p = rule.getPoints(hand, round, player);\r\n            if(p) {\r\n                appliedPoints.push({rule: rule, amount: p});\r\n            }\r\n            return value + (p || 0)\r\n        }, 0);\r\n\r\n        let multipliers = this.multiplierRulesForAll.reduce((value, rule) => {\r\n            let mult = rule.getMultipliers(hand, round, player);\r\n\r\n            if(mult) {\r\n                appliedMultipliers.push({rule: rule, amount: mult});\r\n            }\r\n\r\n            return value + (mult || 0)\r\n        }, 0);\r\n\r\n        if(round.winner === player) {\r\n            multipliers = this.multiplierRulesForWinner.reduce((value, rule) => {\r\n                let mult = rule.getMultipliers(hand, round, player);\r\n\r\n                if(mult) {\r\n                    appliedMultipliers.push({rule: rule, multiplier: mult});\r\n                }\r\n\r\n                return value + (mult || 0)\r\n            }, multipliers);\r\n        }\r\n\r\n        return applyMultipliers(multipliers, points);\r\n    }\r\n\r\n    static createDefaultScoreCalculator() {\r\n        let pointsRules = [\r\n            new BonusTilePoints(),\r\n            new PointsForPairOfRoundWindRule(),\r\n            new PointsForPairOfOwnWindRule(),\r\n            new PointsForPairOfDragonsRule(),\r\n            new PointsForPungRule(),\r\n            new PointsForKongRule(),\r\n            new PointsForMahjong(),\r\n            new PointsForLastAvailableTile(),\r\n            new PointsForLastTileFromWall(),\r\n        ];\r\n        let multiplierRulesForAll = [\r\n            new DragonSetMultiplier(),\r\n            new RoundWindSetMultiplier(),\r\n            new OwnWindSetMultiplier(),\r\n            new ThreeConcealedPungsMultiplier(),\r\n            new ThreeLittleSagesMultiplier(),\r\n            new ThreeGrandSagesMultiplier(),\r\n            new FourLittleBlessingsMultiplier(),\r\n            new FourGrandBlessingsMultiplier(),\r\n        ];\r\n        let multiplierRulesForWinner = [\r\n            new PureChowsMultiplier(),\r\n            new NoChowsMultiplier(),\r\n            new HalfColorMultiplier(),\r\n        ];\r\n\r\n        return new ScoreCalculator(pointsRules, multiplierRulesForAll, multiplierRulesForWinner);\r\n    }\r\n}\r\n\r\n//#region Rules for points\r\n\r\nclass PointsRule {\r\n    getPoints(hand, round, player) {}\r\n}\r\n\r\nclass PointsForTilesetRule extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        return hand.sets.reduce((value, tileSet) => value + (this.getTilesetValue(tileSet, round, player) || 0), 0);\r\n    }\r\n\r\n    getTilesetValue(tileSet, round, player) {return 0}\r\n}\r\n\r\nclass PointsForTileRule extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        return hand.tiles.reduce((value, tile) => value + (this.getTileValue(tile) || 0), 0);\r\n    }\r\n\r\n    getTileValue(tile) {return 0}\r\n}\r\n\r\nclass BonusTilePoints extends PointsForTileRule {\r\n    getTileValue(tile) {\r\n        if(tile instanceof h.BonusTile) {\r\n            return 4;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForPairOfDragonsRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round, player) {\r\n        if(!(tileSet instanceof h.Pair)) {\r\n            return\r\n        }\r\n\r\n        if(tileSet.getTile() instanceof h.DragonTile) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForPairOfRoundWindRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round) {\r\n        if(!(tileSet instanceof h.Pair)) {\r\n            return\r\n        }\r\n\r\n        if(round.windIndicator.equals(tileSet.getTile())) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForPairOfOwnWindRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round, player) {\r\n        if(!(tileSet instanceof h.Pair)) {\r\n            return\r\n        }\r\n\r\n        if(round.getPlayerWind(player).equals(tileSet.getTile())) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForPungRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round, player) {\r\n        if(tileSet instanceof h.Pung) {\r\n            return calcPungKongValue(2, tileSet);\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForKongRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round, player) {\r\n        if(tileSet instanceof h.Kong) {\r\n            return calcPungKongValue(8, tileSet);\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForMahjong extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        if(round.winner === player) {\r\n            return 20;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForLastAvailableTile extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        if(round.winner === player && round.lastAvailableTile) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForLastTileFromWall extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        if(round.winner === player && round.lastTileFromWall) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\n//#endregion\r\n\r\n//#region Rules for multipliers\r\n\r\nclass MultiplierRule {\r\n    getMultipliers(hand, round, player) {}\r\n}\r\n\r\nclass DragonSetMultiplier extends MultiplierRule {\r\n    getMultipliers(hand) {\r\n\r\n        return hand.getSetsOfType(h.Kong, h.DragonTile).concat(hand.getSetsOfType(h.Pung, h.DragonTile)).length;\r\n    }\r\n}\r\n\r\nclass RoundWindSetMultiplier extends MultiplierRule {\r\n    getMultipliers(hand, round) {\r\n        let windSets = hand.getSetsOfType(h.Kong, h.WindTile).concat(hand.getSetsOfType(h.Pung, h.WindTile));\r\n\r\n        return windSets.filter(tileSet => tileSet.getTile().equals(round.windIndicator)).length;\r\n    }\r\n}\r\n\r\nclass OwnWindSetMultiplier extends MultiplierRule {\r\n    getMultipliers(hand, round, player) {\r\n        let windSets = hand.getSetsOfType(h.Kong, h.WindTile).concat(hand.getSetsOfType(h.Pung, h.WindTile));\r\n\r\n        return windSets.filter(tileSet => tileSet.getTile().equals(round.getPlayerWind(player))).length;\r\n    }\r\n}\r\n\r\nclass ThreeConcealedPungsMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let pungs = hand.getSetsOfType(h.Pung).filter(tileSet => !tileSet.isRevealed);\r\n\r\n        if(pungs.length >= 3) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass ThreeLittleSagesMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let dragonSets = hand.getSetsOfType(h.Kong, h.DragonTile).concat(hand.getSetsOfType(h.Pung, h.DragonTile));\r\n        let dragonPairs = hand.getSetsOfType(h.Pair, h.DragonTile);\r\n\r\n        if(dragonSets.length >= 2 && dragonPairs.length >= 1) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass ThreeGrandSagesMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let dragonSets = hand.getSetsOfType(h.Kong, h.DragonTile).concat(hand.getSetsOfType(h.Pung, h.DragonTile));\r\n\r\n        if(dragonSets.length >= 3) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass FourLittleBlessingsMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let windSets = hand.getSetsOfType(h.Kong, h.WindTile).concat(hand.getSetsOfType(h.Pung, h.WindTile));\r\n        let windPairs = hand.getSetsOfType(h.Pair);\r\n\r\n        if(windSets.length >= 3 && windPairs.length >= 1) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass FourGrandBlessingsMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let windSets = hand.getSetsOfType(h.Kong, h.WindTile).concat(hand.getSetsOfType(h.Pung, h.WindTile));\r\n\r\n        if(windSets.length >= 4) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PureChowsMultiplier extends MultiplierRule {\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.pointRules = [\r\n            new PointsForPairOfDragonsRule(),\r\n            new PointsForPairOfOwnWindRule(),\r\n            new PointsForPairOfRoundWindRule(),\r\n            new BonusTilePoints(),\r\n        ]\r\n    }\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let kongsAndPungs = hand.getSetsOfType(h.Kong).concat(hand.getSetsOfType(h.Pung));\r\n\r\n        let points = this.pointRules.reduce((value, rule)=> value + (rule.getPoints(hand, round, player) || 0), 0);\r\n\r\n        if(kongsAndPungs.length === 0 && points === 0) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass NoChowsMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let chows = hand.getSetsOfType(h.Chow).length;\r\n        let pungs = hand.getSetsOfType(h.Pung).length;\r\n        let kongs = hand.getSetsOfType(h.Kong).length;\r\n\r\n        if(chows === 0 && (pungs + kongs) > 0) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass HalfColorMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let charTiles = hand.getTilesOfType(h.SuitTile).filter(tile => tile.suit === h.Suits.CHARACTER);\r\n        let bambooTiles = hand.getTilesOfType(h.SuitTile).filter(tile => tile.suit === h.Suits.BAMBOO);\r\n        let circleTiles = hand.getTilesOfType(h.SuitTile).filter(tile => tile.suit === h.Suits.CIRCLE);\r\n\r\n        let hasCharTiles = charTiles.length > 0;\r\n        let hasBambooTiles = bambooTiles.length > 0;\r\n        let hasCircleTiles = circleTiles.length > 0;\r\n\r\n        if(hasCharTiles + hasBambooTiles + hasCircleTiles === 1) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\n//#endregion\r\n\r\n// module.exports = {ScoreCalculator};\r\nexport {ScoreCalculator};","\r\n\r\nclass EventEmitter {\r\n    constructor() {\r\n        this._listeners = [];\r\n    }\r\n\r\n    addListener(callback) {\r\n        this._listeners.push(callback);\r\n    }\r\n\r\n    emit(...args) {\r\n        this._listeners.forEach((callback) => {\r\n            callback(...args);\r\n        })\r\n    }\r\n}\r\n\r\nexport {EventEmitter}","import {EventEmitter} from \"../utils\";\r\nimport {domLoader} from \"./templates\";\r\nimport {dependencies} from \"needlepoint\";\r\nimport {GamePanel} from \"./gamePanel\";\r\n\r\n\r\n@dependencies(domLoader('gameBalance'))\r\nexport class GameBalanceTableView extends GamePanel{\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     */\r\n    constructor(template) {\r\n        super(template.getRoot());\r\n\r\n        this.template = template;\r\n        this.table = this.root.querySelector('table');\r\n        this.tbody = this.table.querySelector('tbody');\r\n\r\n        this.onHandEditClick = new EventEmitter();\r\n        this.addRoundEvent = new EventEmitter();\r\n        this.returnToGameListEvent = new EventEmitter();\r\n\r\n        this._createdRows = [];\r\n\r\n        this.root.querySelector('[data-action=\"addRound\"]').addEventListener('click', () => {\r\n            this.addRoundEvent.emit();\r\n        });\r\n\r\n        this.root.querySelector('a').addEventListener('click', e => {\r\n            e.preventDefault();\r\n            this.returnToGameListEvent.emit();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @param {Game} game\r\n     */\r\n    renderGameBalance(game) {\r\n        this.template.fillSlots({\r\n            player1Name: game.players[0].name,\r\n            player2Name: game.players[1].name,\r\n            player3Name: game.players[2].name,\r\n            player4Name: game.players[3].name,\r\n        });\r\n\r\n        this._createdRows.forEach(row => row.parentNode.removeChild(row));\r\n        this._createdRows = [];\r\n\r\n        game.rounds.forEach(round => {\r\n            let balance = round.getRoundBalance();\r\n            let cumulativeBalance = game.getTotalBalance(round.roundIndex);\r\n\r\n            let row = this.table.insertRow();\r\n            this.tbody.appendChild(row);\r\n            this._createdRows.push(row);\r\n\r\n            row.insertCell().appendChild(document.createTextNode(round.roundNumber));\r\n\r\n            let roundCells = this._renderBalance(row, balance);\r\n            this._renderBalance(row, cumulativeBalance);\r\n\r\n            roundCells.forEach((cell, index) => {\r\n                cell.addEventListener('click', () => {\r\n                    this.onHandEditClick.emit({\r\n                        round: round,\r\n                        player: game.players[index],\r\n                    });\r\n                })\r\n            })\r\n        });\r\n    }\r\n\r\n    _renderBalance(row, balance) {\r\n        return balance.map(bal => {\r\n            let cell = row.insertCell();\r\n            cell.appendChild(document.createTextNode(bal));\r\n            return cell;\r\n        });\r\n    }\r\n}","\r\n\r\nexport class GamePanel {\r\n    constructor(root) {\r\n        this.root = root;\r\n\r\n        this.root.classList.add('gamePanel');\r\n    }\r\n\r\n    getRoot() {\r\n        return this.root;\r\n    }\r\n\r\n    show() {\r\n        this.root.classList.remove('hidden');\r\n    }\r\n\r\n    hide() {\r\n        this.root.classList.add('hidden');\r\n    }\r\n}","import {EventEmitter} from \"../utils\";\r\nimport {domLoader} from \"./templates\";\r\nimport {dependencies} from \"needlepoint\";\r\nimport {GamePanel} from \"./gamePanel\";\r\n\r\n\r\n@dependencies(domLoader('gamesList'))\r\nexport class GamesListView extends GamePanel{\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     */\r\n    constructor(template) {\r\n        super(template.getRoot());\r\n\r\n        this.gameSelectedEvent = new EventEmitter();\r\n        this.newGameEvent = new EventEmitter();\r\n\r\n        this.gamesList = this.root.querySelector('ul');\r\n\r\n        this.root.querySelector('button').addEventListener('click', () => {\r\n            this.newGameEvent.emit();\r\n        })\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {Array<Game>} gamesList\r\n     */\r\n    loadGames(gamesList) {\r\n        while(this.gamesList.firstChild) {\r\n            this.gamesList.removeChild(this.gamesList.firstChild);\r\n        }\r\n\r\n        gamesList.forEach(game => {\r\n            let row = document.createElement('li');\r\n            row.textContent = this._getGameLabel(game);\r\n\r\n            row.addEventListener('click', () => {\r\n                this.gameSelectedEvent.emit(game);\r\n            });\r\n\r\n            this.gamesList.appendChild(row);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @param {Game} game\r\n     */\r\n    _getGameLabel(game) {\r\n        let balance = game.getTotalBalance();\r\n\r\n        return `Runda ${game.rounds.length}: \r\n            ${game.players[0].name} (${balance[0]}), \r\n            ${game.players[1].name} (${balance[1]}), \r\n            ${game.players[2].name} (${balance[2]}), \r\n            ${game.players[3].name} (${balance[3]})`.replace(/\\s+/g, ' ');\r\n    }\r\n}","import {Suits, Pung, Kong, Chow, Pair, TileGroups, FreeTiles} from \"../hand.js\";\r\nimport {EventEmitter} from \"../utils.js\";\r\nimport {domLoader} from \"./templates.js\";\r\n\r\nimport {dependencies} from 'needlepoint';\r\nimport {GamePanel} from \"./gamePanel\";\r\n\r\n@dependencies(domLoader('hand'))\r\nclass HandCreatorView extends GamePanel{\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     */\r\n    constructor(template) {\r\n        super(template.getRoot());\r\n\r\n        this.onEditFinish = new EventEmitter();\r\n\r\n        this.allTiles = [];\r\n        this.addedSets = [];\r\n\r\n        this.suitGroups = this.root.querySelector('.suitGroups');\r\n        this.handContents = this.root.querySelector('.handContent');\r\n\r\n        this.handRevealedInput = this.root.elements['revealed'];\r\n        this.isWinnerInput = this.root.elements['isWinner'];\r\n        this.lastTileFromWallInput = this.root.elements['lastTileFromWall'];\r\n        this.lastAvailableTileInput = this.root.elements['lastAvailableTile'];\r\n        this.lastTileSpecialInput = this.root.elements['lastTileSpecial'];\r\n\r\n        this.playerNameSlot = this.root.querySelector('[data-slot=\"playerName\"]');\r\n        this.roundNumberSlot = this.root.querySelector('[data-slot=\"roundNumber\"]');\r\n\r\n        this.btnFinishHand = this.root.querySelector('[data-action=\"finishHand\"]');\r\n\r\n        this.btnAddPair = this.root.querySelector('[data-action=\"addPair\"]');\r\n        this.btnAddChow = this.root.querySelector('[data-action=\"addChow\"]');\r\n        this.btnAddPung = this.root.querySelector('[data-action=\"addPung\"]');\r\n        this.btnAddKong = this.root.querySelector('[data-action=\"addKong\"]');\r\n        this.btnAddTiles = this.root.querySelector('[data-action=\"addTiles\"]');\r\n\r\n        this.root.addEventListener('submit', e => e.preventDefault());\r\n\r\n        this.btnAddChow.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length !== 3) {\r\n                    return null;\r\n                }\r\n                return new Chow(this.getHandRevealedValue(), ...tiles)\r\n            })\r\n        });\r\n\r\n        this.btnAddPung.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length !== 1) {\r\n                    return null\r\n                }\r\n                return new Pung(this.getHandRevealedValue(), tiles[0])\r\n            })\r\n        });\r\n\r\n        this.btnAddKong.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length !== 1) {\r\n                    return null\r\n                }\r\n                return new Kong(this.getHandRevealedValue(), tiles[0])\r\n            })\r\n        });\r\n\r\n        this.btnAddPair.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length !== 1) {\r\n                    return null\r\n                }\r\n                return new Pair(tiles[0])\r\n            })\r\n        });\r\n\r\n        this.btnAddTiles.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length < 1) {\r\n                    return null\r\n                }\r\n                return new FreeTiles(tiles)\r\n            })\r\n        });\r\n\r\n        this.btnFinishHand.addEventListener('click', () => {\r\n            let tilesets = this.addedSets.map(s => s.tileset);\r\n            this.onEditFinish.emit({\r\n                round: this.currentEdit.round,\r\n                player: this.currentEdit.player,\r\n                tilesets: tilesets,\r\n                isWinner: this.isWinnerInput.checked,\r\n                lastTileFromWall: this.lastTileFromWallInput.checked,\r\n                lastAvailableTile: this.lastAvailableTileInput.checked,\r\n                lastTileSpecial: this.lastTileSpecialInput.checked,\r\n            });\r\n        });\r\n    }\r\n\r\n    initUI() {\r\n        [Suits.BAMBOO, Suits.CIRCLE, Suits.CHARACTER, Suits.WIND, Suits.DRAGON, Suits.BONUS].forEach(suitType => {\r\n            let group = this.renderTileGroup(TileGroups[suitType]);\r\n\r\n            this.suitGroups.appendChild(group);\r\n        })\r\n    }\r\n\r\n    showHand(round, player) {\r\n        this.addedSets = [];\r\n\r\n        this.refreshHandContent();\r\n\r\n        let hand = round.getHand(player).hand;\r\n\r\n        if(hand) {\r\n            hand.sets.forEach(s => this.renderNewTileset(s));\r\n        }\r\n\r\n        this.roundNumberSlot.textContent = round.roundNumber;\r\n        this.playerNameSlot.textContent = player.name;\r\n\r\n        this.currentEdit = {\r\n            player: player,\r\n            round: round,\r\n        }\r\n    }\r\n\r\n    renderTileGroup(tiles) {\r\n        let result = document.createElement('ul');\r\n\r\n        tiles.forEach(tile => {\r\n            let tileView = new HandCreatorTileView(tile);\r\n            this.allTiles.push(tileView);\r\n            result.appendChild(tileView.view);\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    onNewSetClicked(callback) {\r\n        let tiles = this.allTiles.filter(t => t.selected).map(t => t.tile);\r\n\r\n        let newSet = callback(tiles);\r\n\r\n        if(newSet !== null) {\r\n            this.renderNewTileset(newSet);\r\n        }\r\n\r\n        this.allTiles.forEach(t => t.resetSelected());\r\n    }\r\n\r\n    renderNewTileset(tileset) {\r\n        let view = this.renderNewTiles(tileset, tileset.tiles, tileset.isRevealed);\r\n\r\n        view.onRemove.addListener(() => {\r\n            this.addedSets.splice(this.addedSets.indexOf(view), 1);\r\n            this.refreshHandContent();\r\n        });\r\n\r\n\r\n        this.addedSets.push(view);\r\n    }\r\n\r\n    renderNewTiles(tileset, tiles, revealed) {\r\n        let view = new HandAddedTilesView(tileset, tiles, revealed || false);\r\n\r\n        this.handContents.appendChild(view.view);\r\n\r\n        return view;\r\n    }\r\n\r\n    refreshHandContent() {\r\n        while(this.handContents.firstChild) {\r\n            this.handContents.removeChild(this.handContents.firstChild);\r\n        }\r\n\r\n        this.addedSets.forEach(setView => {\r\n            this.handContents.appendChild(setView.view);\r\n        })\r\n    }\r\n\r\n    getHandRevealedValue() {\r\n        return !!this.handRevealedInput.value;\r\n    }\r\n}\r\n\r\nfunction renderTile(tile) {\r\n    let img = document.createElement('img');\r\n    img.classList.add('tile');\r\n    img.src = 'tiles/' + tile.toTypeString() + '.png';\r\n    return img;\r\n}\r\n\r\nclass HandCreatorTileView {\r\n    constructor(tile) {\r\n        this.tile = tile;\r\n        this.selected = false;\r\n        this.view = document.createElement('li');\r\n        this.view.appendChild(renderTile(tile));\r\n\r\n        this.view.addEventListener('click', () => {\r\n            this.selected = !this.selected;\r\n\r\n            this.view.classList.toggle('selected', this.selected);\r\n        })\r\n    }\r\n\r\n    resetSelected() {\r\n        this.selected = false;\r\n        this.view.classList.remove('selected');\r\n    }\r\n}\r\n\r\nclass HandAddedTilesView {\r\n    constructor(tileset, tiles, revealed) {\r\n        this.tiles = tiles;\r\n        this.tileset = tileset;\r\n\r\n        this.onRemove = new EventEmitter();\r\n        this.view = document.createElement('ul');\r\n\r\n        if(revealed) {\r\n            this.view.classList.add('revealedSet');\r\n        }\r\n\r\n        this.tiles.forEach(tile => {\r\n            let row = this.view.appendChild(document.createElement('li'));\r\n            row.appendChild(renderTile(tile));\r\n        });\r\n\r\n        let delButton = this.view.appendChild(document.createElement('li'));\r\n        delButton.classList.add('actionDelete');\r\n\r\n        delButton.appendChild(document.createTextNode('X'));\r\n        delButton.addEventListener('click', () => {\r\n            this.onRemove.emit();\r\n        })\r\n    }\r\n}\r\n\r\nexport {HandCreatorView}","import {EventEmitter} from \"../utils\";\r\nimport {domLoader} from \"./templates\";\r\nimport {dependencies} from \"needlepoint\";\r\nimport {GamePanel} from \"./gamePanel\";\r\nimport {Player} from \"../game\";\r\n\r\n\r\n@dependencies(domLoader('newGameForm'))\r\nexport class NewGameFormView extends GamePanel {\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     */\r\n    constructor(template) {\r\n        super(template.getRoot());\r\n\r\n        this.newGameCreateEvent = new EventEmitter();\r\n        this.cancelEvent = new EventEmitter();\r\n\r\n        this.form = this.root.querySelector('form');\r\n        this.inputs = Array.from(this.form.querySelectorAll('input'));\r\n\r\n        this.form.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n            this.newGameCreateEvent.emit(this._getPlayers());\r\n        });\r\n\r\n        this.form.elements.cancel.addEventListener('click', e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            this.cancelEvent.emit();\r\n        });\r\n    }\r\n\r\n    show() {\r\n        super.show();\r\n\r\n        this.inputs.forEach(input => input.value = '');\r\n    }\r\n\r\n    _getPlayers() {\r\n        return [\r\n            new Player(0, this.form.elements.player1Name.value),\r\n            new Player(1, this.form.elements.player2Name.value),\r\n            new Player(2, this.form.elements.player3Name.value),\r\n            new Player(3, this.form.elements.player4Name.value),\r\n        ]\r\n    }\r\n}","import {dependencies, singleton, container} from 'needlepoint';\r\n\r\nexport function domLoader(name) {\r\n    return function() {\r\n        let tmpl = container.resolve(TemplateContainer);\r\n        return new DomTemplate(tmpl.create(name));\r\n    }\r\n}\r\n\r\n@singleton\r\nexport class TemplateContainer {\r\n    constructor() {\r\n        this._templates = {};\r\n    }\r\n\r\n    /**\r\n     * @return {HTMLElement}\r\n     */\r\n    create(name) {\r\n        let tmpl = this._templates[name];\r\n        return document.importNode(tmpl.content, true).firstElementChild;\r\n    }\r\n\r\n    /**\r\n     * @param {HTMLElement} domTree\r\n     */\r\n    discover(domTree) {\r\n        Array.from(domTree.querySelectorAll('template')).forEach(tmplNode => {\r\n            this._templates[tmplNode.dataset.name] = tmplNode;\r\n        });\r\n    }\r\n\r\n    getTemplateNames() {\r\n        return Object.keys(this._templates);\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef {Object} TemplateSlot\r\n * @property {HTMLElement} node\r\n * @property {String} name\r\n */\r\n\r\n\r\nexport class DomTemplate {\r\n    /**\r\n     *\r\n     * @param {HTMLElement} template\r\n     */\r\n    constructor(template) {\r\n        this.template = template;\r\n\r\n        /**\r\n         * @type {Array<TemplateSlot>}\r\n         */\r\n        this._slots = this._findSlots(template);\r\n    }\r\n\r\n    _findSlots(element) {\r\n        return Array.from(element.querySelectorAll('[data-slot]')).map(slotNode => {\r\n            return {\r\n                node: slotNode,\r\n                name: slotNode.dataset.slot\r\n            }\r\n        })\r\n    }\r\n\r\n    fillSlots(slotValues) {\r\n        this._slots.forEach(slot => {\r\n            if(slot.name in slotValues) {\r\n                slot.node.textContent = slotValues[slot.name];\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @return {HTMLElement}\r\n     */\r\n    getRoot() {\r\n        return this.template;\r\n    }\r\n}","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @package needlepoint\n * @copyright 2015 Andrew Munsell <andrew@wizardapps.net>\n */\n\n// Currently initialized instances for singletons\nvar dependencies = new Map();\nvar singletons = new Map();\n\nvar Container = (function () {\n    function Container() {\n        _classCallCheck(this, Container);\n    }\n\n    _createClass(Container, null, [{\n        key: 'resolve',\n\n        /**\n         * Resolve a single class to an instance, injecting dependencies as needed\n         * @param  {class|string} clazz\n         * @return {object}       Instance of the class\n         */\n        value: function resolve(clazz) {\n            clazz = Container.normalizeClass(clazz);\n\n            // If the class being injected is a singleton, handle it separately\n            // since instances of it are cached.\n            if (singletons.has(clazz)) {\n                return Container.resolveSingleton(clazz);\n            } else {\n                return Container.resolveSingleInstance(clazz);\n            }\n        }\n\n        /**\n         * Resolve the specified classes, injecting dependencies as needed\n         * @param  {class|string} ...classes\n         * @return {...object}\n         */\n\n    }, {\n        key: 'resolveAll',\n        value: function resolveAll() {\n            for (var _len = arguments.length, classes = Array(_len), _key = 0; _key < _len; _key++) {\n                classes[_key] = arguments[_key];\n            }\n\n            return classes.map(Container.resolve);\n        }\n\n        /**\n         * Resolve a class into a singleton instance. This single instance will be\n         * used across the entire application.\n         * @param  {class|string} clazz\n         * @return {object}       Resolved instance of the class as a singleton\n         */\n\n    }, {\n        key: 'resolveSingleton',\n        value: function resolveSingleton(clazz) {\n            if (singletons.get(clazz) === null) {\n                singletons.set(clazz, Container.resolveSingleInstance(clazz));\n            }\n\n            return singletons.get(clazz);\n        }\n\n        /**\n         * Resolve a class into an instance with all of its dependencies injected.\n         * @param  {class|string} clazz\n         * @return {object}       Resolved instance of the class\n         */\n\n    }, {\n        key: 'resolveSingleInstance',\n        value: function resolveSingleInstance(clazz) {\n            // Check and see if there are any dependencies that need to be injected\n            var deps = Container.resolveAll.apply(Container, _toConsumableArray(dependencies.get(clazz) || []));\n\n            // Apply the dependencies and create a new instance of the class\n            return new (Function.prototype.bind.apply(clazz, [null].concat(_toConsumableArray(deps))))();\n        }\n\n        /**\n         * Resolve a dependency into its class.\n         * @param  {class|function|string} clazz\n         * @return {class}\n         */\n\n    }, {\n        key: 'normalizeClass',\n        value: function normalizeClass(clazz) {\n            if (typeof clazz == 'string') {\n                // TODO: Actually resolve the class from the string name that\n                // was provided to us.\n            } else if (typeof clazz == 'function') {\n                    return clazz;\n                } else {\n                    throw new Error('Unable to resolve the dependency name to the class.');\n                }\n        }\n\n        /**\n         * Register an instance as a singleton for the specified class\n         * @param  {class|string} clazz\n         * @param  {object} instance\n         */\n\n    }, {\n        key: 'registerInstance',\n        value: function registerInstance(clazz, instance) {\n            if ((typeof instance === 'undefined' ? 'undefined' : _typeof(instance)) != 'object' && typeof instance != 'function') {\n                throw new Error('The argument passed was an invalid type.');\n            }\n\n            clazz = Container.normalizeClass(clazz);\n\n            singletons.set(clazz, instance);\n        }\n\n        /**\n         * Register the list of dependencies required for the specified class.\n         * @param  {class} clazz        Class to register dependencies for\n         * @param  {array} dependencies Array of dependencies for the class\n         */\n\n    }, {\n        key: 'registerDependencies',\n        value: function registerDependencies(clazz, deps) {\n            dependencies.set(clazz, deps);\n        }\n\n        /**\n         * Register the specified class as a singleton, meaning only a single\n         * instance of it will be created for the entire application.\n         * @param  {class} clazz\n         */\n\n    }, {\n        key: 'registerAsSingleton',\n        value: function registerAsSingleton(clazz) {\n            if (!singletons.has(clazz)) {\n                singletons.set(clazz, null);\n            }\n        }\n    }]);\n\n    return Container;\n})();\n\nexports.default = Container;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = dependencies;\n\nvar _container = require('./container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction dependencies() {\n    for (var _len = arguments.length, deps = Array(_len), _key = 0; _key < _len; _key++) {\n        deps[_key] = arguments[_key];\n    }\n\n    return function decorator(Clazz) {\n        _container2.default.registerDependencies(Clazz, deps);\n    };\n} /**\n   * @package needlepoint\n   * @copyright 2015 Andrew Munsell <andrew@wizardapps.net>\n   */","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _container = require('./container');\n\nObject.defineProperty(exports, 'container', {\n  enumerable: true,\n  get: function get() {\n    return _container.default;\n  }\n});\n\nvar _singleton = require('./singleton');\n\nObject.defineProperty(exports, 'singleton', {\n  enumerable: true,\n  get: function get() {\n    return _singleton.default;\n  }\n});\n\nvar _dependencies = require('./dependencies');\n\nObject.defineProperty(exports, 'dependencies', {\n  enumerable: true,\n  get: function get() {\n    return _dependencies.default;\n  }\n});","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = singleton;\n\nvar _container = require('./container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction singleton(Clazz) {\n  _container2.default.registerAsSingleton(Clazz);\n} /**\n   * @package needlepoint\n   * @copyright 2015 Andrew Munsell <andrew@wizardapps.net>\n   */"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9hcHAuanMiLCJqcy9nYW1lLmpzIiwianMvaGFuZC5qcyIsImpzL2luaXQuanMiLCJqcy9zY29yaW5nLmpzIiwianMvdXRpbHMuanMiLCJqcy92aWV3L2dhbWVCYWxhbmNlLmpzIiwianMvdmlldy9nYW1lUGFuZWwuanMiLCJqcy92aWV3L2dhbWVzTGlzdC5qcyIsImpzL3ZpZXcvaGFuZENyZWF0b3IuanMiLCJqcy92aWV3L25ld0dhbWVGb3JtLmpzIiwianMvdmlldy90ZW1wbGF0ZXMuanMiLCJub2RlX21vZHVsZXMvbmVlZGxlcG9pbnQvZGlzdC9jb250YWluZXIuanMiLCJub2RlX21vZHVsZXMvbmVlZGxlcG9pbnQvZGlzdC9kZXBlbmRlbmNpZXMuanMiLCJub2RlX21vZHVsZXMvbmVlZGxlcG9pbnQvZGlzdC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9uZWVkbGVwb2ludC9kaXN0L3NpbmdsZXRvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0FDQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQUdBOzs7Ozs7Ozs7OztBQVdBOzs7Ozs7SUFRYSxTLFdBQUEsUyxXQURaLCtCQUFhLDBCQUFVLEtBQVYsQ0FBYixFQUErQiw0QkFBL0IsRUFBZ0QsaUNBQWhELEVBQXNFLHdCQUF0RSxFQUFxRiw0QkFBckYsQzs7QUFHRzs7Ozs7OztBQU9BLHVCQUFZLFFBQVosRUFBc0IsV0FBdEIsRUFBbUMsV0FBbkMsRUFBZ0QsUUFBaEQsRUFBMEQsV0FBMUQsRUFBdUU7QUFBQTs7QUFBQTs7QUFDbkUsYUFBSyxJQUFMLEdBQVksU0FBUyxPQUFULEVBQVo7O0FBRUEsYUFBSyxXQUFMLEdBQW1CLFdBQW5CO0FBQ0EsYUFBSyxZQUFMLEdBQW9CLFdBQXBCO0FBQ0EsYUFBSyxRQUFMLEdBQWdCLFFBQWhCO0FBQ0EsYUFB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIlxyXG5pbXBvcnQge0hhbmR9IGZyb20gJy4vaGFuZC5qcyc7XHJcbmltcG9ydCB7UGxheWVyLCBHYW1lfSBmcm9tICcuL2dhbWUuanMnO1xyXG5pbXBvcnQge0hhbmRDcmVhdG9yVmlld30gZnJvbSBcIi4vdmlldy9oYW5kQ3JlYXRvci5qc1wiO1xyXG5pbXBvcnQge0dhbWVCYWxhbmNlVGFibGVWaWV3fSBmcm9tIFwiLi92aWV3L2dhbWVCYWxhbmNlXCI7XHJcblxyXG5pbXBvcnQge2RlcGVuZGVuY2llc30gZnJvbSAnbmVlZGxlcG9pbnQnO1xyXG5pbXBvcnQge2RvbUxvYWRlcn0gZnJvbSBcIi4vdmlldy90ZW1wbGF0ZXNcIjtcclxuaW1wb3J0IHtHYW1lc0xpc3RWaWV3fSBmcm9tIFwiLi92aWV3L2dhbWVzTGlzdFwiO1xyXG5pbXBvcnQge05ld0dhbWVGb3JtVmlld30gZnJvbSBcIi4vdmlldy9uZXdHYW1lRm9ybVwiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPbkVkaXRGaW5pc2hFdmVudFxyXG4gKiBAcHJvcGVydHkge1JvdW5kfSByb3VuZFxyXG4gKiBAcHJvcGVydHkge1BsYXllcn0gcGxheWVyXHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8VGlsZVNldD59IHRpbGVzZXRzXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaXNXaW5uZXJcclxuICogQHByb3BlcnR5IHtib29sZWFufSBsYXN0VGlsZUZyb21XYWxsXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gbGFzdEF2YWlsYWJsZVRpbGVcclxuICogQHByb3BlcnR5IHtib29sZWFufSBsYXN0VGlsZVNwZWNpYWxcclxuICovXHJcblxyXG4vKipcclxuICogQHR5cGVkZWYge09iamVjdH0gT25IYW5kRWRpdEV2ZW50XHJcbiAqIEBwcm9wZXJ0eSB7Um91bmR9IHJvdW5kXHJcbiAqIEBwcm9wZXJ0eSB7UGxheWVyfSBwbGF5ZXJcclxuICovXHJcblxyXG5cclxuQGRlcGVuZGVuY2llcyhkb21Mb2FkZXIoJ2FwcCcpLCBIYW5kQ3JlYXRvclZpZXcsIEdhbWVCYWxhbmNlVGFibGVWaWV3LCBHYW1lc0xpc3RWaWV3LCBOZXdHYW1lRm9ybVZpZXcpXHJcbmV4cG9ydCBjbGFzcyBNYWluQXBwVUkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtEb21UZW1wbGF0ZX0gdGVtcGxhdGVcclxuICAgICAqIEBwYXJhbSB7SGFuZENyZWF0b3JWaWV3fSBoYW5kQ3JlYXRvclxyXG4gICAgICogQHBhcmFtIHtHYW1lQmFsYW5jZVRhYmxlVmlld30gYmFsYW5jZVZpZXdcclxuICAgICAqIEBwYXJhbSB7R2FtZXNMaXN0Vmlld30gZ2FtZUxpc3RcclxuICAgICAqIEBwYXJhbSB7TmV3R2FtZUZvcm1WaWV3fSBuZXdHYW1lRm9ybVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSwgaGFuZENyZWF0b3IsIGJhbGFuY2VWaWV3LCBnYW1lTGlzdCwgbmV3R2FtZUZvcm0pIHtcclxuICAgICAgICB0aGlzLnJvb3QgPSB0ZW1wbGF0ZS5nZXRSb290KCk7XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZENyZWF0b3IgPSBoYW5kQ3JlYXRvcjtcclxuICAgICAgICB0aGlzLmJhbGFuY2VUYWJsZSA9IGJhbGFuY2VWaWV3O1xyXG4gICAgICAgIHRoaXMuZ2FtZUxpc3QgPSBnYW1lTGlzdDtcclxuICAgICAgICB0aGlzLm5ld0dhbWVGb3JtID0gbmV3R2FtZUZvcm07XHJcblxyXG4gICAgICAgIHRoaXMucGFuZWxzID0gW3RoaXMuaGFuZENyZWF0b3IsIHRoaXMuYmFsYW5jZVRhYmxlLCB0aGlzLmdhbWVMaXN0LCB0aGlzLm5ld0dhbWVGb3JtXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB0eXBlIHtHYW1lUGFuZWx9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5hY3RpdmVQYW5lbCA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMucGFuZWxzLmZvckVhY2gocGFuZWwgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJvb3QuYXBwZW5kQ2hpbGQocGFuZWwuZ2V0Um9vdCgpKTtcclxuICAgICAgICAgICAgcGFuZWwuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmhhbmRDcmVhdG9yLmluaXRVSSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dQYW5lbChwYW5lbCkge1xyXG4gICAgICAgIGlmKHRoaXMuYWN0aXZlUGFuZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVQYW5lbC5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFjdGl2ZVBhbmVsID0gcGFuZWw7XHJcblxyXG4gICAgICAgIHRoaXMuYWN0aXZlUGFuZWwuc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdW50KHBhcmVudCkge1xyXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLnJvb3QpO1xyXG4gICAgfVxyXG59XHJcblxyXG5AZGVwZW5kZW5jaWVzKE1haW5BcHBVSSlcclxuZXhwb3J0IGNsYXNzIE1haGpvbmdMaWxIZWxwZXJNYWluVmlld0NvbnRyb2xsZXIge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtNYWluQXBwVUl9IHZpZXdcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iodmlldykge1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtHYW1lfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY3VycmVudEdhbWUgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8R2FtZT59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5nYW1lcyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuZ2FtZUxpc3QuZ2FtZVNlbGVjdGVkRXZlbnQuYWRkTGlzdGVuZXIoZ2FtZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEdhbWUoZ2FtZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudmlldy5nYW1lTGlzdC5uZXdHYW1lRXZlbnQuYWRkTGlzdGVuZXIoKCkgPT4gdGhpcy52aWV3LnNob3dQYW5lbCh0aGlzLnZpZXcubmV3R2FtZUZvcm0pKTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3Lm5ld0dhbWVGb3JtLmNhbmNlbEV2ZW50LmFkZExpc3RlbmVyKCgpID0+IHRoaXMudmlldy5zaG93UGFuZWwodGhpcy52aWV3LmdhbWVMaXN0KSk7XHJcblxyXG4gICAgICAgIHRoaXMudmlldy5uZXdHYW1lRm9ybS5uZXdHYW1lQ3JlYXRlRXZlbnQuYWRkTGlzdGVuZXIocGxheWVycyA9PiB0aGlzLmFkZE5ld0dhbWUocGxheWVycykpO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuYmFsYW5jZVRhYmxlLm9uSGFuZEVkaXRDbGljay5hZGRMaXN0ZW5lcigoLypPbkhhbmRFZGl0RXZlbnQqL2V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5zaG93UGFuZWwodGhpcy52aWV3LmhhbmRDcmVhdG9yKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlldy5oYW5kQ3JlYXRvci5zaG93SGFuZChldmVudC5yb3VuZCwgZXZlbnQucGxheWVyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3LmJhbGFuY2VUYWJsZS5hZGRSb3VuZEV2ZW50LmFkZExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50R2FtZS5jcmVhdGVSb3VuZCgpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuYmFsYW5jZVRhYmxlLnJlbmRlckdhbWVCYWxhbmNlKHRoaXMuY3VycmVudEdhbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuYmFsYW5jZVRhYmxlLnJldHVyblRvR2FtZUxpc3RFdmVudC5hZGRMaXN0ZW5lcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5nYW1lTGlzdC5sb2FkR2FtZXModGhpcy5nYW1lcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXcuc2hvd1BhbmVsKHRoaXMudmlldy5nYW1lTGlzdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudmlldy5oYW5kQ3JlYXRvci5vbkVkaXRGaW5pc2guYWRkTGlzdGVuZXIodGhpcy5oYW5kbGVIYW5kRWRpdEZpbmlzaC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkU3RhdGUoZ2FtZXMpIHtcclxuICAgICAgICB0aGlzLnZpZXcuc2hvd1BhbmVsKHRoaXMudmlldy5nYW1lTGlzdCk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZXMgPSBnYW1lcztcclxuICAgICAgICB0aGlzLnZpZXcuZ2FtZUxpc3QubG9hZEdhbWVzKHRoaXMuZ2FtZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRHYW1lKGdhbWUpIHtcclxuICAgICAgICB0aGlzLnZpZXcuc2hvd1BhbmVsKHRoaXMudmlldy5iYWxhbmNlVGFibGUpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEdhbWUgPSBnYW1lO1xyXG4gICAgICAgIHRoaXMudmlldy5iYWxhbmNlVGFibGUucmVuZGVyR2FtZUJhbGFuY2UodGhpcy5jdXJyZW50R2FtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTmV3R2FtZShwbGF5ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lcy5wdXNoKG5ldyBHYW1lKC4uLnBsYXllcnMpKTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3LnNob3dQYW5lbCh0aGlzLnZpZXcuZ2FtZUxpc3QpO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuZ2FtZUxpc3QubG9hZEdhbWVzKHRoaXMuZ2FtZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtPbkVkaXRGaW5pc2hFdmVudH0gZXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlSGFuZEVkaXRGaW5pc2goZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnZpZXcuc2hvd1BhbmVsKHRoaXMudmlldy5iYWxhbmNlVGFibGUpO1xyXG5cclxuICAgICAgICBsZXQgaGFuZCA9IG5ldyBIYW5kKCk7XHJcbiAgICAgICAgZXZlbnQudGlsZXNldHMuZm9yRWFjaChzZXQgPT4gaGFuZC5hZGRTZXQoc2V0KSk7XHJcblxyXG4gICAgICAgIGV2ZW50LnJvdW5kLnNldEhhbmQoZXZlbnQucGxheWVyLCBoYW5kKTtcclxuICAgICAgICBpZihldmVudC5pc1dpbm5lcikge1xyXG4gICAgICAgICAgICBldmVudC5yb3VuZC5zZXRXaW5uZXIoZXZlbnQucGxheWVyLCBldmVudC5sYXN0QXZhaWxhYmxlVGlsZSwgZXZlbnQubGFzdFRpbGVGcm9tV2FsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZpZXcuYmFsYW5jZVRhYmxlLnJlbmRlckdhbWVCYWxhbmNlKHRoaXMuY3VycmVudEdhbWUpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIGhhbmQgZnJvbSAnLi9oYW5kLmpzJztcclxuaW1wb3J0ICogYXMgc2NvcmUgZnJvbSAnLi9zY29yaW5nLmpzJztcclxuXHJcbmNsYXNzIFBsYXllciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWF0TnVtYmVyLCBuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5zZWF0TnVtYmVyID0gc2VhdE51bWJlcjtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBSb3VuZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwbGF5ZXJzLCByb3VuZEluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5yb3VuZE51bWJlciA9IHJvdW5kSW5kZXggKyAxO1xyXG4gICAgICAgIHRoaXMucm91bmRJbmRleCA9IHJvdW5kSW5kZXg7XHJcblxyXG4gICAgICAgIHRoaXMuYmFsYW5jZUNhbGN1bGF0b3IgPSBuZXcgUm91bmRCYWxhbmNlQ2FsY3VsYXRvcigpO1xyXG4gICAgICAgIHRoaXMuc2NvcmVDYWxjdWxhdG9yID0gc2NvcmUuU2NvcmVDYWxjdWxhdG9yLmNyZWF0ZURlZmF1bHRTY29yZUNhbGN1bGF0b3IoKTtcclxuXHJcbiAgICAgICAgdGhpcy53aW5kUGhhc2UgPSBNYXRoLmZsb29yKHRoaXMucm91bmRJbmRleC80KTtcclxuICAgICAgICB0aGlzLndpbmRJbmRpY2F0b3IgPSBoYW5kLldpbmRPcmRlclt0aGlzLndpbmRQaGFzZSAlIDRdO1xyXG5cclxuICAgICAgICB0aGlzLmVhc3RXaW5kUGxheWVyID0gcGxheWVyc1t0aGlzLnJvdW5kSW5kZXggJSA0XTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1BsYXllcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLndpbm5lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sYXN0QXZhaWxhYmxlVGlsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGFzdFRpbGVGcm9tV2FsbCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmhhbmRzID0gW1xyXG4gICAgICAgICAgICB7cGxheWVyOiBwbGF5ZXJzWzBdLCBoYW5kOiBudWxsfSxcclxuICAgICAgICAgICAge3BsYXllcjogcGxheWVyc1sxXSwgaGFuZDogbnVsbH0sXHJcbiAgICAgICAgICAgIHtwbGF5ZXI6IHBsYXllcnNbMl0sIGhhbmQ6IG51bGx9LFxyXG4gICAgICAgICAgICB7cGxheWVyOiBwbGF5ZXJzWzNdLCBoYW5kOiBudWxsfSxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXllcnMgPSBwbGF5ZXJzO1xyXG4gICAgICAgIHRoaXMucm91bmRTY29yZXMgPSBbMCwgMCwgMCwgMF07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SGFuZChwbGF5ZXIsIGhhbmQpIHtcclxuICAgICAgICB0aGlzLmhhbmRzW3BsYXllci5zZWF0TnVtYmVyXS5oYW5kID0gaGFuZDtcclxuXHJcbiAgICAgICAgdGhpcy5yb3VuZFNjb3Jlc1twbGF5ZXIuc2VhdE51bWJlcl0gPSB0aGlzLnNjb3JlQ2FsY3VsYXRvci5jYWxjdWxhdGVTY29yZSh0aGlzLCBwbGF5ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFdpbm5lcihwbGF5ZXIsIGxhc3RBdmFpbGFibGVUaWxlLCBsYXN0VGlsZUZyb21XYWxsKSB7XHJcbiAgICAgICAgdGhpcy53aW5uZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5sYXN0QXZhaWxhYmxlVGlsZSA9IGxhc3RBdmFpbGFibGVUaWxlIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGFzdFRpbGVGcm9tV2FsbCA9IGxhc3RUaWxlRnJvbVdhbGwgfHwgZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMucGxheWVycy5mb3JFYWNoKChwbGF5ZXIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucm91bmRTY29yZXNbaW5kZXhdID0gdGhpcy5zY29yZUNhbGN1bGF0b3IuY2FsY3VsYXRlU2NvcmUodGhpcywgcGxheWVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRIYW5kKHBsYXllcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRzW3BsYXllci5zZWF0TnVtYmVyXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQbGF5ZXJXaW5kKHBsYXllcikge1xyXG4gICAgICAgIGxldCBwbGF5ZXJJbmRleCA9ICh0aGlzLndpbmRQaGFzZSArIHBsYXllci5zZWF0TnVtYmVyIC0gKHRoaXMucm91bmRJbmRleCArIHRoaXMud2luZFBoYXNlKSAlIDQpICUgNDtcclxuXHJcbiAgICAgICAgaWYocGxheWVySW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kLldpbmRPcmRlcltoYW5kLldpbmRPcmRlci5sZW5ndGggKyBwbGF5ZXJJbmRleF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGFuZC5XaW5kT3JkZXJbcGxheWVySW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJvdW5kQmFsYW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlQ2FsY3VsYXRvci5nZXRCYWxhbmNlKHRoaXMsIHRoaXMucGxheWVycywgdGhpcy5yb3VuZFNjb3Jlcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFJvdW5kQmFsYW5jZUNhbGN1bGF0b3Ige1xyXG4gICAgZ2V0QmFsYW5jZShyb3VuZCwgcGxheWVycywgc2NvcmVzKSB7XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQgPSBbMCwgMCwgMCwgMF07XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IGkrMTsgaiA8IHBsYXllcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBwMSA9IHBsYXllcnNbaV07XHJcbiAgICAgICAgICAgICAgICBsZXQgcDIgPSBwbGF5ZXJzW2pdO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzcmNJZHggPSBwMS5zZWF0TnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgbGV0IG90aGVySWR4ID0gcDIuc2VhdE51bWJlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IG11bHQgPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBkZWFsc1dpdGhFYXN0V2luZCA9IChwMSA9PT0gcm91bmQuZWFzdFdpbmRQbGF5ZXIgfHwgcDIgPT09IHJvdW5kLmVhc3RXaW5kUGxheWVyKTtcclxuICAgICAgICAgICAgICAgIGxldCBkZWFsc1dpdGhXaW5uZXIgPSAocDEgPT09IHJvdW5kLndpbm5lciB8fCBwMiA9PT0gcm91bmQud2lubmVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihkZWFsc1dpdGhFYXN0V2luZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG11bHQgPSAyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBnYWluZXIsIGxvc2VyO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGRlYWxzV2l0aFdpbm5lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhaW5lciA9IChwMSA9PT0gcm91bmQud2lubmVyKSA/IHAxIDogcDI7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9zZXIgPSAocDEgIT09IHJvdW5kLndpbm5lcikgPyBwMSA6IHAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29yZSA9IHNjb3Jlc1tnYWluZXIuc2VhdE51bWJlcl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBnYWluZXIgPSAoc2NvcmVzW3NyY0lkeF0gPj0gc2NvcmVzW290aGVySWR4XSkgPyBwMSA6IHAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvc2VyID0gKHNjb3Jlc1tzcmNJZHhdIDwgc2NvcmVzW290aGVySWR4XSkgPyBwMSA6IHAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29yZSA9IHNjb3Jlc1tnYWluZXIuc2VhdE51bWJlcl0gLSBzY29yZXNbbG9zZXIuc2VhdE51bWJlcl07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2dhaW5lci5zZWF0TnVtYmVyXSArPSBzY29yZSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbbG9zZXIuc2VhdE51bWJlcl0gLT0gc2NvcmUgKiBtdWx0O1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgR2FtZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwMSwgcDIsIHAzLCBwNCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxQbGF5ZXI+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IFtwMSwgcDIsIHAzLCBwNF07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxSb3VuZD59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yb3VuZHMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4ge1JvdW5kfVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVSb3VuZCgpIHtcclxuICAgICAgICBsZXQgcm91bmQgPSBuZXcgUm91bmQodGhpcy5wbGF5ZXJzLCB0aGlzLnJvdW5kcy5sZW5ndGgpO1xyXG5cclxuICAgICAgICB0aGlzLnJvdW5kcy5wdXNoKHJvdW5kKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJvdW5kO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRvdGFsQmFsYW5jZShtYXhSb3VuZE51bWJlcikge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBbMCwgMCwgMCwgMF07XHJcblxyXG4gICAgICAgIG1heFJvdW5kTnVtYmVyID0gKG1heFJvdW5kTnVtYmVyID09PSB1bmRlZmluZWQpID8gdGhpcy5yb3VuZHMubGVuZ3RoIDogbWF4Um91bmROdW1iZXI7XHJcblxyXG4gICAgICAgIHRoaXMucm91bmRzLnNsaWNlKDAsIG1heFJvdW5kTnVtYmVyKzEpLmZvckVhY2gocm91bmQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcm91bmRCYWxhbmNlID0gcm91bmQuZ2V0Um91bmRCYWxhbmNlKCk7XHJcblxyXG4gICAgICAgICAgICByZXN1bHRbMF0gKz0gcm91bmRCYWxhbmNlWzBdO1xyXG4gICAgICAgICAgICByZXN1bHRbMV0gKz0gcm91bmRCYWxhbmNlWzFdO1xyXG4gICAgICAgICAgICByZXN1bHRbMl0gKz0gcm91bmRCYWxhbmNlWzJdO1xyXG4gICAgICAgICAgICByZXN1bHRbM10gKz0gcm91bmRCYWxhbmNlWzNdO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IHtHYW1lLCBSb3VuZCwgUGxheWVyLCBSb3VuZEJhbGFuY2VDYWxjdWxhdG9yfTtcclxuZXhwb3J0IHtHYW1lLCBSb3VuZCwgUGxheWVyLCBSb3VuZEJhbGFuY2VDYWxjdWxhdG9yfTsiLCJcclxuXHJcbmNvbnN0IFN1aXRzID0ge1xyXG4gICAgQkFNQk9POiAnYmFtYm9vJyxcclxuICAgIENJUkNMRTogJ2NpcmNsZScsXHJcbiAgICBDSEFSQUNURVI6ICdjaGFyYWN0ZXInLFxyXG4gICAgRFJBR09OOiAnZHJhZ29uJyxcclxuICAgIFdJTkQ6ICd3aW5kJyxcclxuICAgIEJPTlVTOiAnYm9udXMnLFxyXG59O1xyXG5cclxuY29uc3QgRHJhZ29ucyA9IHtcclxuICAgIFJFRDogJ3JlZCcsXHJcbiAgICBHUkVFTjogJ2dyZWVuJyxcclxuICAgIFdISVRFOiAnd2hpdGUnLFxyXG59O1xyXG5cclxuY29uc3QgV2luZHMgPSB7XHJcbiAgICBFQVNUOiAnZWFzdCcsXHJcbiAgICBXRVNUOiAnd2VzdCcsXHJcbiAgICBOT1JUSDogJ25vcnRoJyxcclxuICAgIFNPVVRIOiAnc291dGgnLFxyXG59O1xyXG5cclxuY29uc3QgQm9udXMgPSB7XHJcbiAgICBGTE9XRVIxOiAnZmxvd2VyMScsXHJcbiAgICBGTE9XRVIyOiAnZmxvd2VyMicsXHJcbiAgICBGTE9XRVIzOiAnZmxvd2VyMycsXHJcbiAgICBGTE9XRVI0OiAnZmxvd2VyNCcsXHJcbiAgICBTVU1NRVI6ICdzdW1tZXInLFxyXG4gICAgU1BSSU5HOiAnc3ByaW5nJyxcclxuICAgIEFVVFVNTjogJ2F1dHVtbicsXHJcbiAgICBXSU5URVI6ICd3aW50ZXInLFxyXG59O1xyXG5cclxuXHJcbmNsYXNzIFRpbGUge1xyXG4gICAgY29uc3RydWN0b3IoaXNTdWl0LCBpc0hvbm91cikge1xyXG4gICAgICAgIHRoaXMuaXNTdWl0ID0gaXNTdWl0O1xyXG4gICAgICAgIHRoaXMuaXNIb25vdXIgPSBpc0hvbm91cjtcclxuICAgIH1cclxuXHJcbiAgICBlcXVhbHMob3RoZXIpIHtcclxuICAgICAgICBpZih0aGlzLmlzU3VpdCAhPT0gb3RoZXIuaXNTdWl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmlzSG9ub3VyID09PSBvdGhlci5pc0hvbm91cjtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgU3VpdFRpbGUgZXh0ZW5kcyBUaWxlIHtcclxuICAgIGNvbnN0cnVjdG9yKHN1aXQsIG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHRydWUsIG51bWJlciA8IDIgfHwgbnVtYmVyID4gOCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3VpdCA9IHN1aXQ7XHJcbiAgICAgICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIGBbU3VpdFRpbGUgJHt0aGlzLnN1aXR9JHt0aGlzLm51bWJlcn1dYFxyXG4gICAgfVxyXG5cclxuICAgIHRvVHlwZVN0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYHN1aXQtJHt0aGlzLnN1aXR9LSR7dGhpcy5udW1iZXJ9YDtcclxuICAgIH1cclxuXHJcbiAgICBlcXVhbHMob3RoZXIpIHtcclxuICAgICAgICBpZighc3VwZXIuZXF1YWxzKG90aGVyKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLnN1aXQgIT09IG90aGVyLnN1aXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtYmVyID09PSBvdGhlci5udW1iZXI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIERyYWdvblRpbGUgZXh0ZW5kcyBUaWxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGtpbmQpIHtcclxuICAgICAgICBzdXBlcihmYWxzZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhZ29uS2luZCA9IGtpbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIGBbRHJhZ29uVGlsZSAke3RoaXMuZHJhZ29uS2luZH1dYFxyXG4gICAgfVxyXG5cclxuICAgIHRvVHlwZVN0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYGRyYWdvbi0ke3RoaXMuZHJhZ29uS2luZH1gO1xyXG4gICAgfVxyXG5cclxuICAgIGVxdWFscyhvdGhlcikge1xyXG4gICAgICAgIGlmKCFzdXBlci5lcXVhbHMob3RoZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmRyYWdvbktpbmQgPT09IG90aGVyLmRyYWdvbktpbmQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFdpbmRUaWxlIGV4dGVuZHMgVGlsZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihraW5kKSB7XHJcbiAgICAgICAgc3VwZXIoZmFsc2UsIHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLndpbmRLaW5kID0ga2luZDtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYFtXaW5kVGlsZSAke3RoaXMud2luZEtpbmR9XWBcclxuICAgIH1cclxuXHJcbiAgICB0b1R5cGVTdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIGB3aW5kLSR7dGhpcy53aW5kS2luZH1gO1xyXG4gICAgfVxyXG5cclxuICAgIGVxdWFscyhvdGhlcikge1xyXG4gICAgICAgIGlmKCFzdXBlci5lcXVhbHMob3RoZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRLaW5kID09PSBvdGhlci53aW5kS2luZDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQm9udXNUaWxlIGV4dGVuZHMgVGlsZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihraW5kKSB7XHJcbiAgICAgICAgc3VwZXIoZmFsc2UsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5ib251c0tpbmQgPSBraW5kO1xyXG4gICAgfVxyXG5cclxuICAgIHRvVHlwZVN0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYGJvbnVzLSR7dGhpcy5ib251c0tpbmR9YDtcclxuICAgIH1cclxuXHJcbiAgICBlcXVhbHMob3RoZXIpIHtcclxuICAgICAgICBpZighc3VwZXIuZXF1YWxzKG90aGVyKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5ib251c0tpbmQgPT09IG90aGVyLmJvbnVzS2luZDtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgVGlsZXMgPSB7XHJcbiAgICBDaXJjbGUxOiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0lSQ0xFLCAxKSxcclxuICAgIENpcmNsZTI6IG5ldyBTdWl0VGlsZShTdWl0cy5DSVJDTEUsIDIpLFxyXG4gICAgQ2lyY2xlMzogbmV3IFN1aXRUaWxlKFN1aXRzLkNJUkNMRSwgMyksXHJcbiAgICBDaXJjbGU0OiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0lSQ0xFLCA0KSxcclxuICAgIENpcmNsZTU6IG5ldyBTdWl0VGlsZShTdWl0cy5DSVJDTEUsIDUpLFxyXG4gICAgQ2lyY2xlNjogbmV3IFN1aXRUaWxlKFN1aXRzLkNJUkNMRSwgNiksXHJcbiAgICBDaXJjbGU3OiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0lSQ0xFLCA3KSxcclxuICAgIENpcmNsZTg6IG5ldyBTdWl0VGlsZShTdWl0cy5DSVJDTEUsIDgpLFxyXG4gICAgQ2lyY2xlOTogbmV3IFN1aXRUaWxlKFN1aXRzLkNJUkNMRSwgOSksXHJcblxyXG4gICAgQmFtYm9vMTogbmV3IFN1aXRUaWxlKFN1aXRzLkJBTUJPTywgMSksXHJcbiAgICBCYW1ib28yOiBuZXcgU3VpdFRpbGUoU3VpdHMuQkFNQk9PLCAyKSxcclxuICAgIEJhbWJvbzM6IG5ldyBTdWl0VGlsZShTdWl0cy5CQU1CT08sIDMpLFxyXG4gICAgQmFtYm9vNDogbmV3IFN1aXRUaWxlKFN1aXRzLkJBTUJPTywgNCksXHJcbiAgICBCYW1ib281OiBuZXcgU3VpdFRpbGUoU3VpdHMuQkFNQk9PLCA1KSxcclxuICAgIEJhbWJvbzY6IG5ldyBTdWl0VGlsZShTdWl0cy5CQU1CT08sIDYpLFxyXG4gICAgQmFtYm9vNzogbmV3IFN1aXRUaWxlKFN1aXRzLkJBTUJPTywgNyksXHJcbiAgICBCYW1ib284OiBuZXcgU3VpdFRpbGUoU3VpdHMuQkFNQk9PLCA4KSxcclxuICAgIEJhbWJvbzk6IG5ldyBTdWl0VGlsZShTdWl0cy5CQU1CT08sIDkpLFxyXG5cclxuICAgIENoYXJhY3RlcjE6IG5ldyBTdWl0VGlsZShTdWl0cy5DSEFSQUNURVIsIDEpLFxyXG4gICAgQ2hhcmFjdGVyMjogbmV3IFN1aXRUaWxlKFN1aXRzLkNIQVJBQ1RFUiwgMiksXHJcbiAgICBDaGFyYWN0ZXIzOiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0hBUkFDVEVSLCAzKSxcclxuICAgIENoYXJhY3RlcjQ6IG5ldyBTdWl0VGlsZShTdWl0cy5DSEFSQUNURVIsIDQpLFxyXG4gICAgQ2hhcmFjdGVyNTogbmV3IFN1aXRUaWxlKFN1aXRzLkNIQVJBQ1RFUiwgNSksXHJcbiAgICBDaGFyYWN0ZXI2OiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0hBUkFDVEVSLCA2KSxcclxuICAgIENoYXJhY3Rlcjc6IG5ldyBTdWl0VGlsZShTdWl0cy5DSEFSQUNURVIsIDcpLFxyXG4gICAgQ2hhcmFjdGVyODogbmV3IFN1aXRUaWxlKFN1aXRzLkNIQVJBQ1RFUiwgOCksXHJcbiAgICBDaGFyYWN0ZXI5OiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0hBUkFDVEVSLCA5KSxcclxuXHJcbiAgICBEcmFnb25SZWQ6IG5ldyBEcmFnb25UaWxlKERyYWdvbnMuUkVEKSxcclxuICAgIERyYWdvbldoaXRlOiBuZXcgRHJhZ29uVGlsZShEcmFnb25zLldISVRFKSxcclxuICAgIERyYWdvbkdyZWVuOiBuZXcgRHJhZ29uVGlsZShEcmFnb25zLkdSRUVOKSxcclxuXHJcbiAgICBXaW5kRWFzdDogbmV3IFdpbmRUaWxlKFdpbmRzLkVBU1QpLFxyXG4gICAgV2luZFdlc3Q6IG5ldyBXaW5kVGlsZShXaW5kcy5XRVNUKSxcclxuICAgIFdpbmROb3J0aDogbmV3IFdpbmRUaWxlKFdpbmRzLk5PUlRIKSxcclxuICAgIFdpbmRTb3V0aDogbmV3IFdpbmRUaWxlKFdpbmRzLlNPVVRIKSxcclxuXHJcbiAgICBCb251c0Zsb3dlcjE6IG5ldyBCb251c1RpbGUoQm9udXMuRkxPV0VSMSksXHJcbiAgICBCb251c0Zsb3dlcjI6IG5ldyBCb251c1RpbGUoQm9udXMuRkxPV0VSMiksXHJcbiAgICBCb251c0Zsb3dlcjM6IG5ldyBCb251c1RpbGUoQm9udXMuRkxPV0VSMyksXHJcbiAgICBCb251c0Zsb3dlcjQ6IG5ldyBCb251c1RpbGUoQm9udXMuRkxPV0VSNCksXHJcbiAgICBCb251c1N1bW1lcjogbmV3IEJvbnVzVGlsZShCb251cy5TVU1NRVIpLFxyXG4gICAgQm9udXNTcHJpbmc6IG5ldyBCb251c1RpbGUoQm9udXMuU1BSSU5HKSxcclxuICAgIEJvbnVzQXV0dW1uOiBuZXcgQm9udXNUaWxlKEJvbnVzLkFVVFVNTiksXHJcbiAgICBCb251c1dpbnRlcjogbmV3IEJvbnVzVGlsZShCb251cy5XSU5URVIpLFxyXG59O1xyXG5cclxuY29uc3QgVGlsZUdyb3VwcyA9IHtcclxuICAgIFtTdWl0cy5CQU1CT09dOiBbVGlsZXMuQmFtYm9vMSwgVGlsZXMuQmFtYm9vMiwgVGlsZXMuQmFtYm9vMywgVGlsZXMuQmFtYm9vNCwgVGlsZXMuQmFtYm9vNSwgVGlsZXMuQmFtYm9vNiwgVGlsZXMuQmFtYm9vNywgVGlsZXMuQmFtYm9vOCwgVGlsZXMuQmFtYm9vOV0sXHJcbiAgICBbU3VpdHMuQ0lSQ0xFXTogW1RpbGVzLkNpcmNsZTEsIFRpbGVzLkNpcmNsZTIsIFRpbGVzLkNpcmNsZTMsIFRpbGVzLkNpcmNsZTQsIFRpbGVzLkNpcmNsZTUsIFRpbGVzLkNpcmNsZTYsIFRpbGVzLkNpcmNsZTcsIFRpbGVzLkNpcmNsZTgsIFRpbGVzLkNpcmNsZTldLFxyXG4gICAgW1N1aXRzLkNIQVJBQ1RFUl06IFtUaWxlcy5DaGFyYWN0ZXIxLCBUaWxlcy5DaGFyYWN0ZXIyLCBUaWxlcy5DaGFyYWN0ZXIzLCBUaWxlcy5DaGFyYWN0ZXI0LCBUaWxlcy5DaGFyYWN0ZXI1LCBUaWxlcy5DaGFyYWN0ZXI2LCBUaWxlcy5DaGFyYWN0ZXI3LCBUaWxlcy5DaGFyYWN0ZXI4LCBUaWxlcy5DaGFyYWN0ZXI5XSxcclxuICAgIFtTdWl0cy5EUkFHT05dOiBbVGlsZXMuRHJhZ29uUmVkLCBUaWxlcy5EcmFnb25HcmVlbiwgVGlsZXMuRHJhZ29uV2hpdGVdLFxyXG4gICAgW1N1aXRzLldJTkRdOiBbVGlsZXMuV2luZFdlc3QsIFRpbGVzLldpbmRFYXN0LCBUaWxlcy5XaW5kTm9ydGgsIFRpbGVzLldpbmRTb3V0aF0sXHJcbiAgICBbU3VpdHMuQk9OVVNdOiBbVGlsZXMuQm9udXNGbG93ZXIxLCBUaWxlcy5Cb251c0Zsb3dlcjIsIFRpbGVzLkJvbnVzRmxvd2VyMywgVGlsZXMuQm9udXNGbG93ZXI0LFxyXG4gICAgICAgIFRpbGVzLkJvbnVzU3VtbWVyLCBUaWxlcy5Cb251c1NwcmluZywgVGlsZXMuQm9udXNBdXR1bW4sIFRpbGVzLkJvbnVzV2ludGVyXSxcclxufTtcclxuXHJcbmNvbnN0IFdpbmRPcmRlciA9IFtcclxuICAgIFRpbGVzLldpbmRFYXN0LFxyXG4gICAgVGlsZXMuV2luZFNvdXRoLFxyXG4gICAgVGlsZXMuV2luZFdlc3QsXHJcbiAgICBUaWxlcy5XaW5kTm9ydGgsXHJcbl07XHJcblxyXG5jbGFzcyBUaWxlU2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKHJldmVhbGVkLCB0aWxlcykge1xyXG4gICAgICAgIHRoaXMuaXNSZXZlYWxlZCA9IHJldmVhbGVkO1xyXG4gICAgICAgIHRoaXMudGlsZXMgPSB0aWxlcztcclxuXHJcbiAgICAgICAgdGhpcy5zaW1wbGVTZXQgPSAodGlsZXNbMF0gaW5zdGFuY2VvZiBTdWl0VGlsZSkgJiYgIXRpbGVzWzBdLmlzSG9ub3VyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRpbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZXNbMF07XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENob3cgZXh0ZW5kcyBUaWxlU2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKHJldmVhbGVkLCB0aWxlMSwgdGlsZTIsIHRpbGUzKSB7XHJcbiAgICAgICAgc3VwZXIocmV2ZWFsZWQsIFt0aWxlMSwgdGlsZTIsIHRpbGUzXSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFB1bmcgZXh0ZW5kcyBUaWxlU2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKHJldmVhbGVkLCB0aWxlKSB7XHJcbiAgICAgICAgc3VwZXIocmV2ZWFsZWQsIFt0aWxlLCB0aWxlLCB0aWxlXSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEtvbmcgZXh0ZW5kcyBUaWxlU2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKHJldmVhbGVkLCB0aWxlKSB7XHJcbiAgICAgICAgc3VwZXIocmV2ZWFsZWQsIFt0aWxlLCB0aWxlLCB0aWxlLCB0aWxlXSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBhaXIgZXh0ZW5kcyBUaWxlU2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKHRpbGUpIHtcclxuICAgICAgICBzdXBlcihmYWxzZSwgW3RpbGUsIHRpbGVdKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRnJlZVRpbGVzIGV4dGVuZHMgVGlsZVNldCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0aWxlcykge1xyXG4gICAgICAgIHN1cGVyKGZhbHNlLCB0aWxlcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBIYW5kIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudGlsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnNldHMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRUaWxlKHRpbGUpIHtcclxuICAgICAgICB0aGlzLnRpbGVzLnB1c2godGlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGlsZUNvdW50KHRpbGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aWxlcy5maWx0ZXIoKHQpID0+IHQuZXF1YWxzKHRpbGUpKS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkU2V0KHRpbGVTZXQpIHtcclxuICAgICAgICB0aGlzLnNldHMucHVzaCh0aWxlU2V0KTtcclxuICAgICAgICB0aGlzLnRpbGVzID0gdGhpcy50aWxlcy5jb25jYXQodGlsZVNldC50aWxlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxUaWxlU2V0Pn1cclxuICAgICAqL1xyXG4gICAgZ2V0U2V0c09mVHlwZShjbGF6eiwgdGlsZVR5cGUpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5zZXRzLmZpbHRlcigodGlsZVNldCkgPT4gdGlsZVNldCBpbnN0YW5jZW9mIGNsYXp6KTtcclxuXHJcbiAgICAgICAgaWYodGlsZVR5cGUpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigodGlsZVNldCkgPT4gdGlsZVNldC5nZXRUaWxlKCkgaW5zdGFuY2VvZiB0aWxlVHlwZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGlsZXNPZlR5cGUodGlsZVR5cGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aWxlcy5maWx0ZXIodGlsZSA9PiB0aWxlIGluc3RhbmNlb2YgdGlsZVR5cGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IHtcclxuLy8gICAgIEhhbmQsIFRpbGVzLCBTdWl0VGlsZSwgU3VpdHMsIERyYWdvbnMsIERyYWdvblRpbGUsIFdpbmRzLCBXaW5kVGlsZSwgQm9udXMsIEJvbnVzVGlsZSxcclxuLy8gICAgIENob3csIEtvbmcsIFB1bmcsIFBhaXIsIFdpbmRPcmRlclxyXG4vLyB9O1xyXG5cclxuZXhwb3J0IHtcclxuICAgIEhhbmQsIFRpbGVzLCBTdWl0VGlsZSwgU3VpdHMsIERyYWdvbnMsIERyYWdvblRpbGUsIFdpbmRzLCBXaW5kVGlsZSwgQm9udXMsIEJvbnVzVGlsZSxcclxuICAgIENob3csIEtvbmcsIFB1bmcsIFBhaXIsIEZyZWVUaWxlcywgV2luZE9yZGVyLCBUaWxlR3JvdXBzXHJcbn07IiwiaW1wb3J0IHtUZW1wbGF0ZUNvbnRhaW5lcn0gZnJvbSBcIi4vdmlldy90ZW1wbGF0ZXNcIjtcclxuaW1wb3J0IHtHYW1lLCBQbGF5ZXJ9IGZyb20gXCIuL2dhbWVcIjtcclxuaW1wb3J0IHtNYWhqb25nTGlsSGVscGVyTWFpblZpZXdDb250cm9sbGVyfSBmcm9tIFwiLi9hcHBcIjtcclxuXHJcbmltcG9ydCB7Y29udGFpbmVyfSBmcm9tICduZWVkbGVwb2ludCc7XHJcblxyXG5mdW5jdGlvbiBnYW1lMSgpIHtcclxuICAgIGxldCBwbGF5ZXJzID0gW1xyXG4gICAgICAgIG5ldyBQbGF5ZXIoMCwgXCJHcnplc2lla1wiKSxcclxuICAgICAgICBuZXcgUGxheWVyKDEsIFwiV29qdGVrXCIpLFxyXG4gICAgICAgIG5ldyBQbGF5ZXIoMiwgXCJHb3NpYVwiKSxcclxuICAgICAgICBuZXcgUGxheWVyKDMsIFwiT2xhXCIpLFxyXG4gICAgXTtcclxuICAgIGxldCBnYW1lID0gbmV3IEdhbWUocGxheWVyc1swXSwgcGxheWVyc1sxXSwgcGxheWVyc1syXSwgcGxheWVyc1szXSk7XHJcblxyXG4gICAgbGV0IHJvdW5kMSA9IGdhbWUuY3JlYXRlUm91bmQoKTtcclxuICAgIGxldCByb3VuZDIgPSBnYW1lLmNyZWF0ZVJvdW5kKCk7XHJcbiAgICBsZXQgcm91bmQzID0gZ2FtZS5jcmVhdGVSb3VuZCgpO1xyXG5cclxuICAgIHJldHVybiBnYW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnYW1lMigpIHtcclxuICAgIGxldCBwbGF5ZXJzID0gW1xyXG4gICAgICAgIG5ldyBQbGF5ZXIoMCwgXCJHcnplc2lla1wiKSxcclxuICAgICAgICBuZXcgUGxheWVyKDEsIFwiUmF0dXN6XCIpLFxyXG4gICAgICAgIG5ldyBQbGF5ZXIoMiwgXCJLYXNpYVwiKSxcclxuICAgICAgICBuZXcgUGxheWVyKDMsIFwiT2xhXCIpLFxyXG4gICAgXTtcclxuICAgIGxldCBnYW1lID0gbmV3IEdhbWUocGxheWVyc1swXSwgcGxheWVyc1sxXSwgcGxheWVyc1syXSwgcGxheWVyc1szXSk7XHJcblxyXG4gICAgbGV0IHJvdW5kMSA9IGdhbWUuY3JlYXRlUm91bmQoKTtcclxuICAgIC8vIHJvdW5kMS5yb3VuZFNjb3JlcyA9IFsxMDAsIDIwMCwgMzAwLCA0MDBdO1xyXG5cclxuICAgIC8vIGxldCByb3VuZDIgPSBnYW1lLmNyZWF0ZVJvdW5kKCk7XHJcbiAgICAvLyAvLyByb3VuZDIucm91bmRTY29yZXMgPSBbMjAwLCAxMDAsIDUwLCAxMF07XHJcbiAgICAvL1xyXG4gICAgLy8gbGV0IHJvdW5kMyA9IGdhbWUuY3JlYXRlUm91bmQoKTtcclxuXHJcbiAgICByZXR1cm4gZ2FtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2FtZTMoKSB7XHJcbiAgICBsZXQgcGxheWVycyA9IFtcclxuICAgICAgICBuZXcgUGxheWVyKDAsIFwiUDFcIiksXHJcbiAgICAgICAgbmV3IFBsYXllcigxLCBcIlAyXCIpLFxyXG4gICAgICAgIG5ldyBQbGF5ZXIoMiwgXCJQM1wiKSxcclxuICAgICAgICBuZXcgUGxheWVyKDMsIFwiUDRcIiksXHJcbiAgICBdO1xyXG4gICAgbGV0IGdhbWUgPSBuZXcgR2FtZShwbGF5ZXJzWzBdLCBwbGF5ZXJzWzFdLCBwbGF5ZXJzWzJdLCBwbGF5ZXJzWzNdKTtcclxuXHJcbiAgICAvLyBsZXQgcm91bmQxID0gZ2FtZS5jcmVhdGVSb3VuZCgpO1xyXG5cclxuICAgIHJldHVybiBnYW1lO1xyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbihldmVudCkge1xyXG5cclxuICAgIGxldCBnYW1lcyA9IFtcclxuICAgICAgICBnYW1lMSgpLFxyXG4gICAgICAgIGdhbWUyKCksXHJcbiAgICAgICAgZ2FtZTMoKVxyXG4gICAgXTtcclxuXHJcbiAgICBsZXQgdG1wbCA9IGNvbnRhaW5lci5yZXNvbHZlKFRlbXBsYXRlQ29udGFpbmVyKTtcclxuICAgIHRtcGwuZGlzY292ZXIoZG9jdW1lbnQuYm9keSk7XHJcblxyXG4gICAgbGV0IGN0cmwgPSBjb250YWluZXIucmVzb2x2ZShNYWhqb25nTGlsSGVscGVyTWFpblZpZXdDb250cm9sbGVyKTtcclxuXHJcbiAgICBjdHJsLnZpZXcubW91bnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haGpvbmdDb250ZW50JykpO1xyXG5cclxuICAgIGN0cmwubG9hZFN0YXRlKGdhbWVzKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnUkVBRFknLCBjdHJsKTtcclxufSk7IiwiXHJcbmltcG9ydCAqIGFzIGggZnJvbSAnLi9oYW5kLmpzJztcclxuXHJcblxyXG5mdW5jdGlvbiBjYWxjUHVuZ0tvbmdWYWx1ZShiYXNlVmFsdWUsIHRpbGVTZXQpIHtcclxuICAgIGlmKCF0aWxlU2V0LnNpbXBsZVNldCkge1xyXG4gICAgICAgIGJhc2VWYWx1ZSAqPSAyO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCF0aWxlU2V0LmlzUmV2ZWFsZWQpIHtcclxuICAgICAgICBiYXNlVmFsdWUgKj0gMjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYmFzZVZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBseU11bHRpcGxpZXJzKG51bU11bHRpcGxpZXJzLCB2YWx1ZSkge1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG51bU11bHRpcGxpZXJzOyBpKyspIHtcclxuICAgICAgICB2YWx1ZSAqPSAyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuY2xhc3MgU2NvcmVDYWxjdWxhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvaW50c1J1bGVzLCBtdWx0aXBsaWVyc0ZvckFsbCwgbXVsdGlwbGllcnNGb3JXaW5uZXIpIHtcclxuICAgICAgICB0aGlzLnBvaW50c1J1bGVzID0gcG9pbnRzUnVsZXM7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsaWVyUnVsZXNGb3JBbGwgPSBtdWx0aXBsaWVyc0ZvckFsbDtcclxuICAgICAgICB0aGlzLm11bHRpcGxpZXJSdWxlc0Zvcldpbm5lciA9IG11bHRpcGxpZXJzRm9yV2lubmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZVNjb3JlKHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBsZXQgaGFuZCA9IHJvdW5kLmdldEhhbmQocGxheWVyKS5oYW5kO1xyXG5cclxuICAgICAgICBpZihoYW5kID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGFwcGxpZWRQb2ludHMgPSBbXTtcclxuICAgICAgICBsZXQgYXBwbGllZE11bHRpcGxpZXJzID0gW107XHJcblxyXG4gICAgICAgIGxldCBwb2ludHMgPSB0aGlzLnBvaW50c1J1bGVzLnJlZHVjZSgodmFsdWUsIHJ1bGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IHAgPSBydWxlLmdldFBvaW50cyhoYW5kLCByb3VuZCwgcGxheWVyKTtcclxuICAgICAgICAgICAgaWYocCkge1xyXG4gICAgICAgICAgICAgICAgYXBwbGllZFBvaW50cy5wdXNoKHtydWxlOiBydWxlLCBhbW91bnQ6IHB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgKyAocCB8fCAwKVxyXG4gICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICBsZXQgbXVsdGlwbGllcnMgPSB0aGlzLm11bHRpcGxpZXJSdWxlc0ZvckFsbC5yZWR1Y2UoKHZhbHVlLCBydWxlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBtdWx0ID0gcnVsZS5nZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCwgcGxheWVyKTtcclxuXHJcbiAgICAgICAgICAgIGlmKG11bHQpIHtcclxuICAgICAgICAgICAgICAgIGFwcGxpZWRNdWx0aXBsaWVycy5wdXNoKHtydWxlOiBydWxlLCBhbW91bnQ6IG11bHR9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICsgKG11bHQgfHwgMClcclxuICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgaWYocm91bmQud2lubmVyID09PSBwbGF5ZXIpIHtcclxuICAgICAgICAgICAgbXVsdGlwbGllcnMgPSB0aGlzLm11bHRpcGxpZXJSdWxlc0Zvcldpbm5lci5yZWR1Y2UoKHZhbHVlLCBydWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbXVsdCA9IHJ1bGUuZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQsIHBsYXllcik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYobXVsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcGxpZWRNdWx0aXBsaWVycy5wdXNoKHtydWxlOiBydWxlLCBtdWx0aXBsaWVyOiBtdWx0fSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICsgKG11bHQgfHwgMClcclxuICAgICAgICAgICAgfSwgbXVsdGlwbGllcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGFwcGx5TXVsdGlwbGllcnMobXVsdGlwbGllcnMsIHBvaW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZURlZmF1bHRTY29yZUNhbGN1bGF0b3IoKSB7XHJcbiAgICAgICAgbGV0IHBvaW50c1J1bGVzID0gW1xyXG4gICAgICAgICAgICBuZXcgQm9udXNUaWxlUG9pbnRzKCksXHJcbiAgICAgICAgICAgIG5ldyBQb2ludHNGb3JQYWlyT2ZSb3VuZFdpbmRSdWxlKCksXHJcbiAgICAgICAgICAgIG5ldyBQb2ludHNGb3JQYWlyT2ZPd25XaW5kUnVsZSgpLFxyXG4gICAgICAgICAgICBuZXcgUG9pbnRzRm9yUGFpck9mRHJhZ29uc1J1bGUoKSxcclxuICAgICAgICAgICAgbmV3IFBvaW50c0ZvclB1bmdSdWxlKCksXHJcbiAgICAgICAgICAgIG5ldyBQb2ludHNGb3JLb25nUnVsZSgpLFxyXG4gICAgICAgICAgICBuZXcgUG9pbnRzRm9yTWFoam9uZygpLFxyXG4gICAgICAgICAgICBuZXcgUG9pbnRzRm9yTGFzdEF2YWlsYWJsZVRpbGUoKSxcclxuICAgICAgICAgICAgbmV3IFBvaW50c0Zvckxhc3RUaWxlRnJvbVdhbGwoKSxcclxuICAgICAgICBdO1xyXG4gICAgICAgIGxldCBtdWx0aXBsaWVyUnVsZXNGb3JBbGwgPSBbXHJcbiAgICAgICAgICAgIG5ldyBEcmFnb25TZXRNdWx0aXBsaWVyKCksXHJcbiAgICAgICAgICAgIG5ldyBSb3VuZFdpbmRTZXRNdWx0aXBsaWVyKCksXHJcbiAgICAgICAgICAgIG5ldyBPd25XaW5kU2V0TXVsdGlwbGllcigpLFxyXG4gICAgICAgICAgICBuZXcgVGhyZWVDb25jZWFsZWRQdW5nc011bHRpcGxpZXIoKSxcclxuICAgICAgICAgICAgbmV3IFRocmVlTGl0dGxlU2FnZXNNdWx0aXBsaWVyKCksXHJcbiAgICAgICAgICAgIG5ldyBUaHJlZUdyYW5kU2FnZXNNdWx0aXBsaWVyKCksXHJcbiAgICAgICAgICAgIG5ldyBGb3VyTGl0dGxlQmxlc3NpbmdzTXVsdGlwbGllcigpLFxyXG4gICAgICAgICAgICBuZXcgRm91ckdyYW5kQmxlc3NpbmdzTXVsdGlwbGllcigpLFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgbGV0IG11bHRpcGxpZXJSdWxlc0Zvcldpbm5lciA9IFtcclxuICAgICAgICAgICAgbmV3IFB1cmVDaG93c011bHRpcGxpZXIoKSxcclxuICAgICAgICAgICAgbmV3IE5vQ2hvd3NNdWx0aXBsaWVyKCksXHJcbiAgICAgICAgICAgIG5ldyBIYWxmQ29sb3JNdWx0aXBsaWVyKCksXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBTY29yZUNhbGN1bGF0b3IocG9pbnRzUnVsZXMsIG11bHRpcGxpZXJSdWxlc0ZvckFsbCwgbXVsdGlwbGllclJ1bGVzRm9yV2lubmVyKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8jcmVnaW9uIFJ1bGVzIGZvciBwb2ludHNcclxuXHJcbmNsYXNzIFBvaW50c1J1bGUge1xyXG4gICAgZ2V0UG9pbnRzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHt9XHJcbn1cclxuXHJcbmNsYXNzIFBvaW50c0ZvclRpbGVzZXRSdWxlIGV4dGVuZHMgUG9pbnRzUnVsZSB7XHJcblxyXG4gICAgZ2V0UG9pbnRzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICByZXR1cm4gaGFuZC5zZXRzLnJlZHVjZSgodmFsdWUsIHRpbGVTZXQpID0+IHZhbHVlICsgKHRoaXMuZ2V0VGlsZXNldFZhbHVlKHRpbGVTZXQsIHJvdW5kLCBwbGF5ZXIpIHx8IDApLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUaWxlc2V0VmFsdWUodGlsZVNldCwgcm91bmQsIHBsYXllcikge3JldHVybiAwfVxyXG59XHJcblxyXG5jbGFzcyBQb2ludHNGb3JUaWxlUnVsZSBleHRlbmRzIFBvaW50c1J1bGUge1xyXG5cclxuICAgIGdldFBvaW50cyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGhhbmQudGlsZXMucmVkdWNlKCh2YWx1ZSwgdGlsZSkgPT4gdmFsdWUgKyAodGhpcy5nZXRUaWxlVmFsdWUodGlsZSkgfHwgMCksIDApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRpbGVWYWx1ZSh0aWxlKSB7cmV0dXJuIDB9XHJcbn1cclxuXHJcbmNsYXNzIEJvbnVzVGlsZVBvaW50cyBleHRlbmRzIFBvaW50c0ZvclRpbGVSdWxlIHtcclxuICAgIGdldFRpbGVWYWx1ZSh0aWxlKSB7XHJcbiAgICAgICAgaWYodGlsZSBpbnN0YW5jZW9mIGguQm9udXNUaWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiA0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUG9pbnRzRm9yUGFpck9mRHJhZ29uc1J1bGUgZXh0ZW5kcyBQb2ludHNGb3JUaWxlc2V0UnVsZSB7XHJcblxyXG4gICAgZ2V0VGlsZXNldFZhbHVlKHRpbGVTZXQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBpZighKHRpbGVTZXQgaW5zdGFuY2VvZiBoLlBhaXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGlsZVNldC5nZXRUaWxlKCkgaW5zdGFuY2VvZiBoLkRyYWdvblRpbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb2ludHNGb3JQYWlyT2ZSb3VuZFdpbmRSdWxlIGV4dGVuZHMgUG9pbnRzRm9yVGlsZXNldFJ1bGUge1xyXG5cclxuICAgIGdldFRpbGVzZXRWYWx1ZSh0aWxlU2V0LCByb3VuZCkge1xyXG4gICAgICAgIGlmKCEodGlsZVNldCBpbnN0YW5jZW9mIGguUGFpcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihyb3VuZC53aW5kSW5kaWNhdG9yLmVxdWFscyh0aWxlU2V0LmdldFRpbGUoKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb2ludHNGb3JQYWlyT2ZPd25XaW5kUnVsZSBleHRlbmRzIFBvaW50c0ZvclRpbGVzZXRSdWxlIHtcclxuXHJcbiAgICBnZXRUaWxlc2V0VmFsdWUodGlsZVNldCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGlmKCEodGlsZVNldCBpbnN0YW5jZW9mIGguUGFpcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihyb3VuZC5nZXRQbGF5ZXJXaW5kKHBsYXllcikuZXF1YWxzKHRpbGVTZXQuZ2V0VGlsZSgpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBvaW50c0ZvclB1bmdSdWxlIGV4dGVuZHMgUG9pbnRzRm9yVGlsZXNldFJ1bGUge1xyXG5cclxuICAgIGdldFRpbGVzZXRWYWx1ZSh0aWxlU2V0LCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgaWYodGlsZVNldCBpbnN0YW5jZW9mIGguUHVuZykge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsY1B1bmdLb25nVmFsdWUoMiwgdGlsZVNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb2ludHNGb3JLb25nUnVsZSBleHRlbmRzIFBvaW50c0ZvclRpbGVzZXRSdWxlIHtcclxuXHJcbiAgICBnZXRUaWxlc2V0VmFsdWUodGlsZVNldCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGlmKHRpbGVTZXQgaW5zdGFuY2VvZiBoLktvbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGNQdW5nS29uZ1ZhbHVlKDgsIHRpbGVTZXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUG9pbnRzRm9yTWFoam9uZyBleHRlbmRzIFBvaW50c1J1bGUge1xyXG5cclxuICAgIGdldFBvaW50cyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgaWYocm91bmQud2lubmVyID09PSBwbGF5ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDIwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUG9pbnRzRm9yTGFzdEF2YWlsYWJsZVRpbGUgZXh0ZW5kcyBQb2ludHNSdWxlIHtcclxuXHJcbiAgICBnZXRQb2ludHMoaGFuZCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGlmKHJvdW5kLndpbm5lciA9PT0gcGxheWVyICYmIHJvdW5kLmxhc3RBdmFpbGFibGVUaWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUG9pbnRzRm9yTGFzdFRpbGVGcm9tV2FsbCBleHRlbmRzIFBvaW50c1J1bGUge1xyXG5cclxuICAgIGdldFBvaW50cyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgaWYocm91bmQud2lubmVyID09PSBwbGF5ZXIgJiYgcm91bmQubGFzdFRpbGVGcm9tV2FsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vI2VuZHJlZ2lvblxyXG5cclxuLy8jcmVnaW9uIFJ1bGVzIGZvciBtdWx0aXBsaWVyc1xyXG5cclxuY2xhc3MgTXVsdGlwbGllclJ1bGUge1xyXG4gICAgZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQsIHBsYXllcikge31cclxufVxyXG5cclxuY2xhc3MgRHJhZ29uU2V0TXVsdGlwbGllciBleHRlbmRzIE11bHRpcGxpZXJSdWxlIHtcclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIGhhbmQuZ2V0U2V0c09mVHlwZShoLktvbmcsIGguRHJhZ29uVGlsZSkuY29uY2F0KGhhbmQuZ2V0U2V0c09mVHlwZShoLlB1bmcsIGguRHJhZ29uVGlsZSkpLmxlbmd0aDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUm91bmRXaW5kU2V0TXVsdGlwbGllciBleHRlbmRzIE11bHRpcGxpZXJSdWxlIHtcclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kKSB7XHJcbiAgICAgICAgbGV0IHdpbmRTZXRzID0gaGFuZC5nZXRTZXRzT2ZUeXBlKGguS29uZywgaC5XaW5kVGlsZSkuY29uY2F0KGhhbmQuZ2V0U2V0c09mVHlwZShoLlB1bmcsIGguV2luZFRpbGUpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHdpbmRTZXRzLmZpbHRlcih0aWxlU2V0ID0+IHRpbGVTZXQuZ2V0VGlsZSgpLmVxdWFscyhyb3VuZC53aW5kSW5kaWNhdG9yKSkubGVuZ3RoO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBPd25XaW5kU2V0TXVsdGlwbGllciBleHRlbmRzIE11bHRpcGxpZXJSdWxlIHtcclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBsZXQgd2luZFNldHMgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5Lb25nLCBoLldpbmRUaWxlKS5jb25jYXQoaGFuZC5nZXRTZXRzT2ZUeXBlKGguUHVuZywgaC5XaW5kVGlsZSkpO1xyXG5cclxuICAgICAgICByZXR1cm4gd2luZFNldHMuZmlsdGVyKHRpbGVTZXQgPT4gdGlsZVNldC5nZXRUaWxlKCkuZXF1YWxzKHJvdW5kLmdldFBsYXllcldpbmQocGxheWVyKSkpLmxlbmd0aDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgVGhyZWVDb25jZWFsZWRQdW5nc011bHRpcGxpZXIgZXh0ZW5kcyBNdWx0aXBsaWVyUnVsZSB7XHJcblxyXG4gICAgZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGxldCBwdW5ncyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLlB1bmcpLmZpbHRlcih0aWxlU2V0ID0+ICF0aWxlU2V0LmlzUmV2ZWFsZWQpO1xyXG5cclxuICAgICAgICBpZihwdW5ncy5sZW5ndGggPj0gMykge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFRocmVlTGl0dGxlU2FnZXNNdWx0aXBsaWVyIGV4dGVuZHMgTXVsdGlwbGllclJ1bGUge1xyXG5cclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBsZXQgZHJhZ29uU2V0cyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLktvbmcsIGguRHJhZ29uVGlsZSkuY29uY2F0KGhhbmQuZ2V0U2V0c09mVHlwZShoLlB1bmcsIGguRHJhZ29uVGlsZSkpO1xyXG4gICAgICAgIGxldCBkcmFnb25QYWlycyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLlBhaXIsIGguRHJhZ29uVGlsZSk7XHJcblxyXG4gICAgICAgIGlmKGRyYWdvblNldHMubGVuZ3RoID49IDIgJiYgZHJhZ29uUGFpcnMubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBUaHJlZUdyYW5kU2FnZXNNdWx0aXBsaWVyIGV4dGVuZHMgTXVsdGlwbGllclJ1bGUge1xyXG5cclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBsZXQgZHJhZ29uU2V0cyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLktvbmcsIGguRHJhZ29uVGlsZSkuY29uY2F0KGhhbmQuZ2V0U2V0c09mVHlwZShoLlB1bmcsIGguRHJhZ29uVGlsZSkpO1xyXG5cclxuICAgICAgICBpZihkcmFnb25TZXRzLmxlbmd0aCA+PSAzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRm91ckxpdHRsZUJsZXNzaW5nc011bHRpcGxpZXIgZXh0ZW5kcyBNdWx0aXBsaWVyUnVsZSB7XHJcblxyXG4gICAgZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGxldCB3aW5kU2V0cyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLktvbmcsIGguV2luZFRpbGUpLmNvbmNhdChoYW5kLmdldFNldHNPZlR5cGUoaC5QdW5nLCBoLldpbmRUaWxlKSk7XHJcbiAgICAgICAgbGV0IHdpbmRQYWlycyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLlBhaXIpO1xyXG5cclxuICAgICAgICBpZih3aW5kU2V0cy5sZW5ndGggPj0gMyAmJiB3aW5kUGFpcnMubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBGb3VyR3JhbmRCbGVzc2luZ3NNdWx0aXBsaWVyIGV4dGVuZHMgTXVsdGlwbGllclJ1bGUge1xyXG5cclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBsZXQgd2luZFNldHMgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5Lb25nLCBoLldpbmRUaWxlKS5jb25jYXQoaGFuZC5nZXRTZXRzT2ZUeXBlKGguUHVuZywgaC5XaW5kVGlsZSkpO1xyXG5cclxuICAgICAgICBpZih3aW5kU2V0cy5sZW5ndGggPj0gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFB1cmVDaG93c011bHRpcGxpZXIgZXh0ZW5kcyBNdWx0aXBsaWVyUnVsZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5wb2ludFJ1bGVzID0gW1xyXG4gICAgICAgICAgICBuZXcgUG9pbnRzRm9yUGFpck9mRHJhZ29uc1J1bGUoKSxcclxuICAgICAgICAgICAgbmV3IFBvaW50c0ZvclBhaXJPZk93bldpbmRSdWxlKCksXHJcbiAgICAgICAgICAgIG5ldyBQb2ludHNGb3JQYWlyT2ZSb3VuZFdpbmRSdWxlKCksXHJcbiAgICAgICAgICAgIG5ldyBCb251c1RpbGVQb2ludHMoKSxcclxuICAgICAgICBdXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGxldCBrb25nc0FuZFB1bmdzID0gaGFuZC5nZXRTZXRzT2ZUeXBlKGguS29uZykuY29uY2F0KGhhbmQuZ2V0U2V0c09mVHlwZShoLlB1bmcpKTtcclxuXHJcbiAgICAgICAgbGV0IHBvaW50cyA9IHRoaXMucG9pbnRSdWxlcy5yZWR1Y2UoKHZhbHVlLCBydWxlKT0+IHZhbHVlICsgKHJ1bGUuZ2V0UG9pbnRzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHx8IDApLCAwKTtcclxuXHJcbiAgICAgICAgaWYoa29uZ3NBbmRQdW5ncy5sZW5ndGggPT09IDAgJiYgcG9pbnRzID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTm9DaG93c011bHRpcGxpZXIgZXh0ZW5kcyBNdWx0aXBsaWVyUnVsZSB7XHJcblxyXG4gICAgZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGxldCBjaG93cyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLkNob3cpLmxlbmd0aDtcclxuICAgICAgICBsZXQgcHVuZ3MgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5QdW5nKS5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGtvbmdzID0gaGFuZC5nZXRTZXRzT2ZUeXBlKGguS29uZykubGVuZ3RoO1xyXG5cclxuICAgICAgICBpZihjaG93cyA9PT0gMCAmJiAocHVuZ3MgKyBrb25ncykgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgSGFsZkNvbG9yTXVsdGlwbGllciBleHRlbmRzIE11bHRpcGxpZXJSdWxlIHtcclxuXHJcbiAgICBnZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgbGV0IGNoYXJUaWxlcyA9IGhhbmQuZ2V0VGlsZXNPZlR5cGUoaC5TdWl0VGlsZSkuZmlsdGVyKHRpbGUgPT4gdGlsZS5zdWl0ID09PSBoLlN1aXRzLkNIQVJBQ1RFUik7XHJcbiAgICAgICAgbGV0IGJhbWJvb1RpbGVzID0gaGFuZC5nZXRUaWxlc09mVHlwZShoLlN1aXRUaWxlKS5maWx0ZXIodGlsZSA9PiB0aWxlLnN1aXQgPT09IGguU3VpdHMuQkFNQk9PKTtcclxuICAgICAgICBsZXQgY2lyY2xlVGlsZXMgPSBoYW5kLmdldFRpbGVzT2ZUeXBlKGguU3VpdFRpbGUpLmZpbHRlcih0aWxlID0+IHRpbGUuc3VpdCA9PT0gaC5TdWl0cy5DSVJDTEUpO1xyXG5cclxuICAgICAgICBsZXQgaGFzQ2hhclRpbGVzID0gY2hhclRpbGVzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgbGV0IGhhc0JhbWJvb1RpbGVzID0gYmFtYm9vVGlsZXMubGVuZ3RoID4gMDtcclxuICAgICAgICBsZXQgaGFzQ2lyY2xlVGlsZXMgPSBjaXJjbGVUaWxlcy5sZW5ndGggPiAwO1xyXG5cclxuICAgICAgICBpZihoYXNDaGFyVGlsZXMgKyBoYXNCYW1ib29UaWxlcyArIGhhc0NpcmNsZVRpbGVzID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8jZW5kcmVnaW9uXHJcblxyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IHtTY29yZUNhbGN1bGF0b3J9O1xyXG5leHBvcnQge1Njb3JlQ2FsY3VsYXRvcn07IiwiXHJcblxyXG5jbGFzcyBFdmVudEVtaXR0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTGlzdGVuZXIoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgZW1pdCguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7RXZlbnRFbWl0dGVyfSIsImltcG9ydCB7RXZlbnRFbWl0dGVyfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHtkb21Mb2FkZXJ9IGZyb20gXCIuL3RlbXBsYXRlc1wiO1xyXG5pbXBvcnQge2RlcGVuZGVuY2llc30gZnJvbSBcIm5lZWRsZXBvaW50XCI7XHJcbmltcG9ydCB7R2FtZVBhbmVsfSBmcm9tIFwiLi9nYW1lUGFuZWxcIjtcclxuXHJcblxyXG5AZGVwZW5kZW5jaWVzKGRvbUxvYWRlcignZ2FtZUJhbGFuY2UnKSlcclxuZXhwb3J0IGNsYXNzIEdhbWVCYWxhbmNlVGFibGVWaWV3IGV4dGVuZHMgR2FtZVBhbmVse1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtEb21UZW1wbGF0ZX0gdGVtcGxhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGUpIHtcclxuICAgICAgICBzdXBlcih0ZW1wbGF0ZS5nZXRSb290KCkpO1xyXG5cclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICAgICAgdGhpcy50YWJsZSA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCd0YWJsZScpO1xyXG4gICAgICAgIHRoaXMudGJvZHkgPSB0aGlzLnRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XHJcblxyXG4gICAgICAgIHRoaXMub25IYW5kRWRpdENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMuYWRkUm91bmRFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLnJldHVyblRvR2FtZUxpc3RFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY3JlYXRlZFJvd3MgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImFkZFJvdW5kXCJdJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUm91bmRFdmVudC5lbWl0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCdhJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJldHVyblRvR2FtZUxpc3RFdmVudC5lbWl0KCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7R2FtZX0gZ2FtZVxyXG4gICAgICovXHJcbiAgICByZW5kZXJHYW1lQmFsYW5jZShnYW1lKSB7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZS5maWxsU2xvdHMoe1xyXG4gICAgICAgICAgICBwbGF5ZXIxTmFtZTogZ2FtZS5wbGF5ZXJzWzBdLm5hbWUsXHJcbiAgICAgICAgICAgIHBsYXllcjJOYW1lOiBnYW1lLnBsYXllcnNbMV0ubmFtZSxcclxuICAgICAgICAgICAgcGxheWVyM05hbWU6IGdhbWUucGxheWVyc1syXS5uYW1lLFxyXG4gICAgICAgICAgICBwbGF5ZXI0TmFtZTogZ2FtZS5wbGF5ZXJzWzNdLm5hbWUsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2NyZWF0ZWRSb3dzLmZvckVhY2gocm93ID0+IHJvdy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHJvdykpO1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZWRSb3dzID0gW107XHJcblxyXG4gICAgICAgIGdhbWUucm91bmRzLmZvckVhY2gocm91bmQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgYmFsYW5jZSA9IHJvdW5kLmdldFJvdW5kQmFsYW5jZSgpO1xyXG4gICAgICAgICAgICBsZXQgY3VtdWxhdGl2ZUJhbGFuY2UgPSBnYW1lLmdldFRvdGFsQmFsYW5jZShyb3VuZC5yb3VuZEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLnRhYmxlLmluc2VydFJvdygpO1xyXG4gICAgICAgICAgICB0aGlzLnRib2R5LmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZWRSb3dzLnB1c2gocm93KTtcclxuXHJcbiAgICAgICAgICAgIHJvdy5pbnNlcnRDZWxsKCkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocm91bmQucm91bmROdW1iZXIpKTtcclxuXHJcbiAgICAgICAgICAgIGxldCByb3VuZENlbGxzID0gdGhpcy5fcmVuZGVyQmFsYW5jZShyb3csIGJhbGFuY2UpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJCYWxhbmNlKHJvdywgY3VtdWxhdGl2ZUJhbGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgcm91bmRDZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uSGFuZEVkaXRDbGljay5lbWl0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91bmQ6IHJvdW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IGdhbWUucGxheWVyc1tpbmRleF0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW5kZXJCYWxhbmNlKHJvdywgYmFsYW5jZSkge1xyXG4gICAgICAgIHJldHVybiBiYWxhbmNlLm1hcChiYWwgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY2VsbCA9IHJvdy5pbnNlcnRDZWxsKCk7XHJcbiAgICAgICAgICAgIGNlbGwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYmFsKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjZWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiXHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZVBhbmVsIHtcclxuICAgIGNvbnN0cnVjdG9yKHJvb3QpIHtcclxuICAgICAgICB0aGlzLnJvb3QgPSByb290O1xyXG5cclxuICAgICAgICB0aGlzLnJvb3QuY2xhc3NMaXN0LmFkZCgnZ2FtZVBhbmVsJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Um9vdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290O1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5yb290LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5yb290LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQge2RvbUxvYWRlcn0gZnJvbSBcIi4vdGVtcGxhdGVzXCI7XHJcbmltcG9ydCB7ZGVwZW5kZW5jaWVzfSBmcm9tIFwibmVlZGxlcG9pbnRcIjtcclxuaW1wb3J0IHtHYW1lUGFuZWx9IGZyb20gXCIuL2dhbWVQYW5lbFwiO1xyXG5cclxuXHJcbkBkZXBlbmRlbmNpZXMoZG9tTG9hZGVyKCdnYW1lc0xpc3QnKSlcclxuZXhwb3J0IGNsYXNzIEdhbWVzTGlzdFZpZXcgZXh0ZW5kcyBHYW1lUGFuZWx7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0RvbVRlbXBsYXRlfSB0ZW1wbGF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHRlbXBsYXRlLmdldFJvb3QoKSk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZVNlbGVjdGVkRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5uZXdHYW1lRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZXNMaXN0ID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XHJcblxyXG4gICAgICAgIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5uZXdHYW1lRXZlbnQuZW1pdCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtBcnJheTxHYW1lPn0gZ2FtZXNMaXN0XHJcbiAgICAgKi9cclxuICAgIGxvYWRHYW1lcyhnYW1lc0xpc3QpIHtcclxuICAgICAgICB3aGlsZSh0aGlzLmdhbWVzTGlzdC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZXNMaXN0LnJlbW92ZUNoaWxkKHRoaXMuZ2FtZXNMaXN0LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2FtZXNMaXN0LmZvckVhY2goZ2FtZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgICAgICByb3cudGV4dENvbnRlbnQgPSB0aGlzLl9nZXRHYW1lTGFiZWwoZ2FtZSk7XHJcblxyXG4gICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVTZWxlY3RlZEV2ZW50LmVtaXQoZ2FtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nYW1lc0xpc3QuYXBwZW5kQ2hpbGQocm93KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtHYW1lfSBnYW1lXHJcbiAgICAgKi9cclxuICAgIF9nZXRHYW1lTGFiZWwoZ2FtZSkge1xyXG4gICAgICAgIGxldCBiYWxhbmNlID0gZ2FtZS5nZXRUb3RhbEJhbGFuY2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGBSdW5kYSAke2dhbWUucm91bmRzLmxlbmd0aH06IFxyXG4gICAgICAgICAgICAke2dhbWUucGxheWVyc1swXS5uYW1lfSAoJHtiYWxhbmNlWzBdfSksIFxyXG4gICAgICAgICAgICAke2dhbWUucGxheWVyc1sxXS5uYW1lfSAoJHtiYWxhbmNlWzFdfSksIFxyXG4gICAgICAgICAgICAke2dhbWUucGxheWVyc1syXS5uYW1lfSAoJHtiYWxhbmNlWzJdfSksIFxyXG4gICAgICAgICAgICAke2dhbWUucGxheWVyc1szXS5uYW1lfSAoJHtiYWxhbmNlWzNdfSlgLnJlcGxhY2UoL1xccysvZywgJyAnKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7U3VpdHMsIFB1bmcsIEtvbmcsIENob3csIFBhaXIsIFRpbGVHcm91cHMsIEZyZWVUaWxlc30gZnJvbSBcIi4uL2hhbmQuanNcIjtcclxuaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gXCIuLi91dGlscy5qc1wiO1xyXG5pbXBvcnQge2RvbUxvYWRlcn0gZnJvbSBcIi4vdGVtcGxhdGVzLmpzXCI7XHJcblxyXG5pbXBvcnQge2RlcGVuZGVuY2llc30gZnJvbSAnbmVlZGxlcG9pbnQnO1xyXG5pbXBvcnQge0dhbWVQYW5lbH0gZnJvbSBcIi4vZ2FtZVBhbmVsXCI7XHJcblxyXG5AZGVwZW5kZW5jaWVzKGRvbUxvYWRlcignaGFuZCcpKVxyXG5jbGFzcyBIYW5kQ3JlYXRvclZpZXcgZXh0ZW5kcyBHYW1lUGFuZWx7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0RvbVRlbXBsYXRlfSB0ZW1wbGF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHRlbXBsYXRlLmdldFJvb3QoKSk7XHJcblxyXG4gICAgICAgIHRoaXMub25FZGl0RmluaXNoID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmFsbFRpbGVzID0gW107XHJcbiAgICAgICAgdGhpcy5hZGRlZFNldHMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWl0R3JvdXBzID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJy5zdWl0R3JvdXBzJyk7XHJcbiAgICAgICAgdGhpcy5oYW5kQ29udGVudHMgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLmhhbmRDb250ZW50Jyk7XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZFJldmVhbGVkSW5wdXQgPSB0aGlzLnJvb3QuZWxlbWVudHNbJ3JldmVhbGVkJ107XHJcbiAgICAgICAgdGhpcy5pc1dpbm5lcklucHV0ID0gdGhpcy5yb290LmVsZW1lbnRzWydpc1dpbm5lciddO1xyXG4gICAgICAgIHRoaXMubGFzdFRpbGVGcm9tV2FsbElucHV0ID0gdGhpcy5yb290LmVsZW1lbnRzWydsYXN0VGlsZUZyb21XYWxsJ107XHJcbiAgICAgICAgdGhpcy5sYXN0QXZhaWxhYmxlVGlsZUlucHV0ID0gdGhpcy5yb290LmVsZW1lbnRzWydsYXN0QXZhaWxhYmxlVGlsZSddO1xyXG4gICAgICAgIHRoaXMubGFzdFRpbGVTcGVjaWFsSW5wdXQgPSB0aGlzLnJvb3QuZWxlbWVudHNbJ2xhc3RUaWxlU3BlY2lhbCddO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXllck5hbWVTbG90ID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNsb3Q9XCJwbGF5ZXJOYW1lXCJdJyk7XHJcbiAgICAgICAgdGhpcy5yb3VuZE51bWJlclNsb3QgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtc2xvdD1cInJvdW5kTnVtYmVyXCJdJyk7XHJcblxyXG4gICAgICAgIHRoaXMuYnRuRmluaXNoSGFuZCA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJmaW5pc2hIYW5kXCJdJyk7XHJcblxyXG4gICAgICAgIHRoaXMuYnRuQWRkUGFpciA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJhZGRQYWlyXCJdJyk7XHJcbiAgICAgICAgdGhpcy5idG5BZGRDaG93ID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImFkZENob3dcIl0nKTtcclxuICAgICAgICB0aGlzLmJ0bkFkZFB1bmcgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiYWRkUHVuZ1wiXScpO1xyXG4gICAgICAgIHRoaXMuYnRuQWRkS29uZyA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJhZGRLb25nXCJdJyk7XHJcbiAgICAgICAgdGhpcy5idG5BZGRUaWxlcyA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJhZGRUaWxlc1wiXScpO1xyXG5cclxuICAgICAgICB0aGlzLnJvb3QuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xyXG5cclxuICAgICAgICB0aGlzLmJ0bkFkZENob3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25OZXdTZXRDbGlja2VkKHRpbGVzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKHRpbGVzLmxlbmd0aCAhPT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDaG93KHRoaXMuZ2V0SGFuZFJldmVhbGVkVmFsdWUoKSwgLi4udGlsZXMpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYnRuQWRkUHVuZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbk5ld1NldENsaWNrZWQodGlsZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYodGlsZXMubGVuZ3RoICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHVuZyh0aGlzLmdldEhhbmRSZXZlYWxlZFZhbHVlKCksIHRpbGVzWzBdKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ0bkFkZEtvbmcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25OZXdTZXRDbGlja2VkKHRpbGVzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKHRpbGVzLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEtvbmcodGhpcy5nZXRIYW5kUmV2ZWFsZWRWYWx1ZSgpLCB0aWxlc1swXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5idG5BZGRQYWlyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uTmV3U2V0Q2xpY2tlZCh0aWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZih0aWxlcy5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQYWlyKHRpbGVzWzBdKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ0bkFkZFRpbGVzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uTmV3U2V0Q2xpY2tlZCh0aWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZih0aWxlcy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRnJlZVRpbGVzKHRpbGVzKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ0bkZpbmlzaEhhbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0aWxlc2V0cyA9IHRoaXMuYWRkZWRTZXRzLm1hcChzID0+IHMudGlsZXNldCk7XHJcbiAgICAgICAgICAgIHRoaXMub25FZGl0RmluaXNoLmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgcm91bmQ6IHRoaXMuY3VycmVudEVkaXQucm91bmQsXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXI6IHRoaXMuY3VycmVudEVkaXQucGxheWVyLFxyXG4gICAgICAgICAgICAgICAgdGlsZXNldHM6IHRpbGVzZXRzLFxyXG4gICAgICAgICAgICAgICAgaXNXaW5uZXI6IHRoaXMuaXNXaW5uZXJJbnB1dC5jaGVja2VkLFxyXG4gICAgICAgICAgICAgICAgbGFzdFRpbGVGcm9tV2FsbDogdGhpcy5sYXN0VGlsZUZyb21XYWxsSW5wdXQuY2hlY2tlZCxcclxuICAgICAgICAgICAgICAgIGxhc3RBdmFpbGFibGVUaWxlOiB0aGlzLmxhc3RBdmFpbGFibGVUaWxlSW5wdXQuY2hlY2tlZCxcclxuICAgICAgICAgICAgICAgIGxhc3RUaWxlU3BlY2lhbDogdGhpcy5sYXN0VGlsZVNwZWNpYWxJbnB1dC5jaGVja2VkLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0VUkoKSB7XHJcbiAgICAgICAgW1N1aXRzLkJBTUJPTywgU3VpdHMuQ0lSQ0xFLCBTdWl0cy5DSEFSQUNURVIsIFN1aXRzLldJTkQsIFN1aXRzLkRSQUdPTiwgU3VpdHMuQk9OVVNdLmZvckVhY2goc3VpdFR5cGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLnJlbmRlclRpbGVHcm91cChUaWxlR3JvdXBzW3N1aXRUeXBlXSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN1aXRHcm91cHMuYXBwZW5kQ2hpbGQoZ3JvdXApO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0hhbmQocm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIHRoaXMuYWRkZWRTZXRzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMucmVmcmVzaEhhbmRDb250ZW50KCk7XHJcblxyXG4gICAgICAgIGxldCBoYW5kID0gcm91bmQuZ2V0SGFuZChwbGF5ZXIpLmhhbmQ7XHJcblxyXG4gICAgICAgIGlmKGhhbmQpIHtcclxuICAgICAgICAgICAgaGFuZC5zZXRzLmZvckVhY2gocyA9PiB0aGlzLnJlbmRlck5ld1RpbGVzZXQocykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yb3VuZE51bWJlclNsb3QudGV4dENvbnRlbnQgPSByb3VuZC5yb3VuZE51bWJlcjtcclxuICAgICAgICB0aGlzLnBsYXllck5hbWVTbG90LnRleHRDb250ZW50ID0gcGxheWVyLm5hbWU7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudEVkaXQgPSB7XHJcbiAgICAgICAgICAgIHBsYXllcjogcGxheWVyLFxyXG4gICAgICAgICAgICByb3VuZDogcm91bmQsXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclRpbGVHcm91cCh0aWxlcykge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG5cclxuICAgICAgICB0aWxlcy5mb3JFYWNoKHRpbGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGlsZVZpZXcgPSBuZXcgSGFuZENyZWF0b3JUaWxlVmlldyh0aWxlKTtcclxuICAgICAgICAgICAgdGhpcy5hbGxUaWxlcy5wdXNoKHRpbGVWaWV3KTtcclxuICAgICAgICAgICAgcmVzdWx0LmFwcGVuZENoaWxkKHRpbGVWaWV3LnZpZXcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIG9uTmV3U2V0Q2xpY2tlZChjYWxsYmFjaykge1xyXG4gICAgICAgIGxldCB0aWxlcyA9IHRoaXMuYWxsVGlsZXMuZmlsdGVyKHQgPT4gdC5zZWxlY3RlZCkubWFwKHQgPT4gdC50aWxlKTtcclxuXHJcbiAgICAgICAgbGV0IG5ld1NldCA9IGNhbGxiYWNrKHRpbGVzKTtcclxuXHJcbiAgICAgICAgaWYobmV3U2V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTmV3VGlsZXNldChuZXdTZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hbGxUaWxlcy5mb3JFYWNoKHQgPT4gdC5yZXNldFNlbGVjdGVkKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlck5ld1RpbGVzZXQodGlsZXNldCkge1xyXG4gICAgICAgIGxldCB2aWV3ID0gdGhpcy5yZW5kZXJOZXdUaWxlcyh0aWxlc2V0LCB0aWxlc2V0LnRpbGVzLCB0aWxlc2V0LmlzUmV2ZWFsZWQpO1xyXG5cclxuICAgICAgICB2aWV3Lm9uUmVtb3ZlLmFkZExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hZGRlZFNldHMuc3BsaWNlKHRoaXMuYWRkZWRTZXRzLmluZGV4T2YodmlldyksIDEpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hIYW5kQ29udGVudCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5hZGRlZFNldHMucHVzaCh2aWV3KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJOZXdUaWxlcyh0aWxlc2V0LCB0aWxlcywgcmV2ZWFsZWQpIHtcclxuICAgICAgICBsZXQgdmlldyA9IG5ldyBIYW5kQWRkZWRUaWxlc1ZpZXcodGlsZXNldCwgdGlsZXMsIHJldmVhbGVkIHx8IGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5oYW5kQ29udGVudHMuYXBwZW5kQ2hpbGQodmlldy52aWV3KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZpZXc7XHJcbiAgICB9XHJcblxyXG4gICAgcmVmcmVzaEhhbmRDb250ZW50KCkge1xyXG4gICAgICAgIHdoaWxlKHRoaXMuaGFuZENvbnRlbnRzLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kQ29udGVudHMucmVtb3ZlQ2hpbGQodGhpcy5oYW5kQ29udGVudHMuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFkZGVkU2V0cy5mb3JFYWNoKHNldFZpZXcgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRDb250ZW50cy5hcHBlbmRDaGlsZChzZXRWaWV3LnZpZXcpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SGFuZFJldmVhbGVkVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuICEhdGhpcy5oYW5kUmV2ZWFsZWRJbnB1dC52YWx1ZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyVGlsZSh0aWxlKSB7XHJcbiAgICBsZXQgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICBpbWcuY2xhc3NMaXN0LmFkZCgndGlsZScpO1xyXG4gICAgaW1nLnNyYyA9ICd0aWxlcy8nICsgdGlsZS50b1R5cGVTdHJpbmcoKSArICcucG5nJztcclxuICAgIHJldHVybiBpbWc7XHJcbn1cclxuXHJcbmNsYXNzIEhhbmRDcmVhdG9yVGlsZVZpZXcge1xyXG4gICAgY29uc3RydWN0b3IodGlsZSkge1xyXG4gICAgICAgIHRoaXMudGlsZSA9IHRpbGU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudmlldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgdGhpcy52aWV3LmFwcGVuZENoaWxkKHJlbmRlclRpbGUodGlsZSkpO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSAhdGhpcy5zZWxlY3RlZDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcsIHRoaXMuc2VsZWN0ZWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRTZWxlY3RlZCgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEhhbmRBZGRlZFRpbGVzVmlldyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0aWxlc2V0LCB0aWxlcywgcmV2ZWFsZWQpIHtcclxuICAgICAgICB0aGlzLnRpbGVzID0gdGlsZXM7XHJcbiAgICAgICAgdGhpcy50aWxlc2V0ID0gdGlsZXNldDtcclxuXHJcbiAgICAgICAgdGhpcy5vblJlbW92ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLnZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG5cclxuICAgICAgICBpZihyZXZlYWxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LmFkZCgncmV2ZWFsZWRTZXQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGlsZXMuZm9yRWFjaCh0aWxlID0+IHtcclxuICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMudmlldy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKTtcclxuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHJlbmRlclRpbGUodGlsZSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgZGVsQnV0dG9uID0gdGhpcy52aWV3LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpO1xyXG4gICAgICAgIGRlbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3Rpb25EZWxldGUnKTtcclxuXHJcbiAgICAgICAgZGVsQnV0dG9uLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdYJykpO1xyXG4gICAgICAgIGRlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vblJlbW92ZS5lbWl0KCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtIYW5kQ3JlYXRvclZpZXd9IiwiaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQge2RvbUxvYWRlcn0gZnJvbSBcIi4vdGVtcGxhdGVzXCI7XHJcbmltcG9ydCB7ZGVwZW5kZW5jaWVzfSBmcm9tIFwibmVlZGxlcG9pbnRcIjtcclxuaW1wb3J0IHtHYW1lUGFuZWx9IGZyb20gXCIuL2dhbWVQYW5lbFwiO1xyXG5pbXBvcnQge1BsYXllcn0gZnJvbSBcIi4uL2dhbWVcIjtcclxuXHJcblxyXG5AZGVwZW5kZW5jaWVzKGRvbUxvYWRlcignbmV3R2FtZUZvcm0nKSlcclxuZXhwb3J0IGNsYXNzIE5ld0dhbWVGb3JtVmlldyBleHRlbmRzIEdhbWVQYW5lbCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0RvbVRlbXBsYXRlfSB0ZW1wbGF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHRlbXBsYXRlLmdldFJvb3QoKSk7XHJcblxyXG4gICAgICAgIHRoaXMubmV3R2FtZUNyZWF0ZUV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZm9ybSA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKTtcclxuXHJcbiAgICAgICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGUgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMubmV3R2FtZUNyZWF0ZUV2ZW50LmVtaXQodGhpcy5fZ2V0UGxheWVycygpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5mb3JtLmVsZW1lbnRzLmNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEV2ZW50LmVtaXQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIHN1cGVyLnNob3coKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dHMuZm9yRWFjaChpbnB1dCA9PiBpbnB1dC52YWx1ZSA9ICcnKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0UGxheWVycygpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBuZXcgUGxheWVyKDAsIHRoaXMuZm9ybS5lbGVtZW50cy5wbGF5ZXIxTmFtZS52YWx1ZSksXHJcbiAgICAgICAgICAgIG5ldyBQbGF5ZXIoMSwgdGhpcy5mb3JtLmVsZW1lbnRzLnBsYXllcjJOYW1lLnZhbHVlKSxcclxuICAgICAgICAgICAgbmV3IFBsYXllcigyLCB0aGlzLmZvcm0uZWxlbWVudHMucGxheWVyM05hbWUudmFsdWUpLFxyXG4gICAgICAgICAgICBuZXcgUGxheWVyKDMsIHRoaXMuZm9ybS5lbGVtZW50cy5wbGF5ZXI0TmFtZS52YWx1ZSksXHJcbiAgICAgICAgXVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtkZXBlbmRlbmNpZXMsIHNpbmdsZXRvbiwgY29udGFpbmVyfSBmcm9tICduZWVkbGVwb2ludCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZG9tTG9hZGVyKG5hbWUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgdG1wbCA9IGNvbnRhaW5lci5yZXNvbHZlKFRlbXBsYXRlQ29udGFpbmVyKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvbVRlbXBsYXRlKHRtcGwuY3JlYXRlKG5hbWUpKTtcclxuICAgIH1cclxufVxyXG5cclxuQHNpbmdsZXRvblxyXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVDb250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cclxuICAgICAqL1xyXG4gICAgY3JlYXRlKG5hbWUpIHtcclxuICAgICAgICBsZXQgdG1wbCA9IHRoaXMuX3RlbXBsYXRlc1tuYW1lXTtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0bXBsLmNvbnRlbnQsIHRydWUpLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZG9tVHJlZVxyXG4gICAgICovXHJcbiAgICBkaXNjb3Zlcihkb21UcmVlKSB7XHJcbiAgICAgICAgQXJyYXkuZnJvbShkb21UcmVlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJykpLmZvckVhY2godG1wbE5vZGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZXNbdG1wbE5vZGUuZGF0YXNldC5uYW1lXSA9IHRtcGxOb2RlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRlbXBsYXRlTmFtZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3RlbXBsYXRlcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUZW1wbGF0ZVNsb3RcclxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gbm9kZVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbmFtZVxyXG4gKi9cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRG9tVGVtcGxhdGUge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGUpIHtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxUZW1wbGF0ZVNsb3Q+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3Nsb3RzID0gdGhpcy5fZmluZFNsb3RzKHRlbXBsYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBfZmluZFNsb3RzKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNsb3RdJykpLm1hcChzbG90Tm9kZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBub2RlOiBzbG90Tm9kZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHNsb3ROb2RlLmRhdGFzZXQuc2xvdFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmaWxsU2xvdHMoc2xvdFZhbHVlcykge1xyXG4gICAgICAgIHRoaXMuX3Nsb3RzLmZvckVhY2goc2xvdCA9PiB7XHJcbiAgICAgICAgICAgIGlmKHNsb3QubmFtZSBpbiBzbG90VmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICBzbG90Lm5vZGUudGV4dENvbnRlbnQgPSBzbG90VmFsdWVzW3Nsb3QubmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgIGdldFJvb3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGU7XHJcbiAgICB9XHJcbn0iLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXG4gKiBAcGFja2FnZSBuZWVkbGVwb2ludFxuICogQGNvcHlyaWdodCAyMDE1IEFuZHJldyBNdW5zZWxsIDxhbmRyZXdAd2l6YXJkYXBwcy5uZXQ+XG4gKi9cblxuLy8gQ3VycmVudGx5IGluaXRpYWxpemVkIGluc3RhbmNlcyBmb3Igc2luZ2xldG9uc1xudmFyIGRlcGVuZGVuY2llcyA9IG5ldyBNYXAoKTtcbnZhciBzaW5nbGV0b25zID0gbmV3IE1hcCgpO1xuXG52YXIgQ29udGFpbmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb250YWluZXIoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250YWluZXIpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDb250YWluZXIsIG51bGwsIFt7XG4gICAgICAgIGtleTogJ3Jlc29sdmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXNvbHZlIGEgc2luZ2xlIGNsYXNzIHRvIGFuIGluc3RhbmNlLCBpbmplY3RpbmcgZGVwZW5kZW5jaWVzIGFzIG5lZWRlZFxuICAgICAgICAgKiBAcGFyYW0gIHtjbGFzc3xzdHJpbmd9IGNsYXp6XG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdH0gICAgICAgSW5zdGFuY2Ugb2YgdGhlIGNsYXNzXG4gICAgICAgICAqL1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZShjbGF6eikge1xuICAgICAgICAgICAgY2xhenogPSBDb250YWluZXIubm9ybWFsaXplQ2xhc3MoY2xhenopO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgY2xhc3MgYmVpbmcgaW5qZWN0ZWQgaXMgYSBzaW5nbGV0b24sIGhhbmRsZSBpdCBzZXBhcmF0ZWx5XG4gICAgICAgICAgICAvLyBzaW5jZSBpbnN0YW5jZXMgb2YgaXQgYXJlIGNhY2hlZC5cbiAgICAgICAgICAgIGlmIChzaW5nbGV0b25zLmhhcyhjbGF6eikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udGFpbmVyLnJlc29sdmVTaW5nbGV0b24oY2xhenopO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udGFpbmVyLnJlc29sdmVTaW5nbGVJbnN0YW5jZShjbGF6eik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzb2x2ZSB0aGUgc3BlY2lmaWVkIGNsYXNzZXMsIGluamVjdGluZyBkZXBlbmRlbmNpZXMgYXMgbmVlZGVkXG4gICAgICAgICAqIEBwYXJhbSAge2NsYXNzfHN0cmluZ30gLi4uY2xhc3Nlc1xuICAgICAgICAgKiBAcmV0dXJuIHsuLi5vYmplY3R9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZXNvbHZlQWxsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmVBbGwoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NlcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgICAgIGNsYXNzZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjbGFzc2VzLm1hcChDb250YWluZXIucmVzb2x2ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzb2x2ZSBhIGNsYXNzIGludG8gYSBzaW5nbGV0b24gaW5zdGFuY2UuIFRoaXMgc2luZ2xlIGluc3RhbmNlIHdpbGwgYmVcbiAgICAgICAgICogdXNlZCBhY3Jvc3MgdGhlIGVudGlyZSBhcHBsaWNhdGlvbi5cbiAgICAgICAgICogQHBhcmFtICB7Y2xhc3N8c3RyaW5nfSBjbGF6elxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgIFJlc29sdmVkIGluc3RhbmNlIG9mIHRoZSBjbGFzcyBhcyBhIHNpbmdsZXRvblxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVzb2x2ZVNpbmdsZXRvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlU2luZ2xldG9uKGNsYXp6KSB7XG4gICAgICAgICAgICBpZiAoc2luZ2xldG9ucy5nZXQoY2xhenopID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2luZ2xldG9ucy5zZXQoY2xhenosIENvbnRhaW5lci5yZXNvbHZlU2luZ2xlSW5zdGFuY2UoY2xhenopKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNpbmdsZXRvbnMuZ2V0KGNsYXp6KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXNvbHZlIGEgY2xhc3MgaW50byBhbiBpbnN0YW5jZSB3aXRoIGFsbCBvZiBpdHMgZGVwZW5kZW5jaWVzIGluamVjdGVkLlxuICAgICAgICAgKiBAcGFyYW0gIHtjbGFzc3xzdHJpbmd9IGNsYXp6XG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdH0gICAgICAgUmVzb2x2ZWQgaW5zdGFuY2Ugb2YgdGhlIGNsYXNzXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZXNvbHZlU2luZ2xlSW5zdGFuY2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZVNpbmdsZUluc3RhbmNlKGNsYXp6KSB7XG4gICAgICAgICAgICAvLyBDaGVjayBhbmQgc2VlIGlmIHRoZXJlIGFyZSBhbnkgZGVwZW5kZW5jaWVzIHRoYXQgbmVlZCB0byBiZSBpbmplY3RlZFxuICAgICAgICAgICAgdmFyIGRlcHMgPSBDb250YWluZXIucmVzb2x2ZUFsbC5hcHBseShDb250YWluZXIsIF90b0NvbnN1bWFibGVBcnJheShkZXBlbmRlbmNpZXMuZ2V0KGNsYXp6KSB8fCBbXSkpO1xuXG4gICAgICAgICAgICAvLyBBcHBseSB0aGUgZGVwZW5kZW5jaWVzIGFuZCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGNsYXNzXG4gICAgICAgICAgICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShjbGF6eiwgW251bGxdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZGVwcykpKSkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXNvbHZlIGEgZGVwZW5kZW5jeSBpbnRvIGl0cyBjbGFzcy5cbiAgICAgICAgICogQHBhcmFtICB7Y2xhc3N8ZnVuY3Rpb258c3RyaW5nfSBjbGF6elxuICAgICAgICAgKiBAcmV0dXJuIHtjbGFzc31cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ25vcm1hbGl6ZUNsYXNzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzKGNsYXp6KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNsYXp6ID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogQWN0dWFsbHkgcmVzb2x2ZSB0aGUgY2xhc3MgZnJvbSB0aGUgc3RyaW5nIG5hbWUgdGhhdFxuICAgICAgICAgICAgICAgIC8vIHdhcyBwcm92aWRlZCB0byB1cy5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNsYXp6ID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYXp6O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHJlc29sdmUgdGhlIGRlcGVuZGVuY3kgbmFtZSB0byB0aGUgY2xhc3MuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIGFuIGluc3RhbmNlIGFzIGEgc2luZ2xldG9uIGZvciB0aGUgc3BlY2lmaWVkIGNsYXNzXG4gICAgICAgICAqIEBwYXJhbSAge2NsYXNzfHN0cmluZ30gY2xhenpcbiAgICAgICAgICogQHBhcmFtICB7b2JqZWN0fSBpbnN0YW5jZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVnaXN0ZXJJbnN0YW5jZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3Rlckluc3RhbmNlKGNsYXp6LCBpbnN0YW5jZSkge1xuICAgICAgICAgICAgaWYgKCh0eXBlb2YgaW5zdGFuY2UgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGluc3RhbmNlKSkgIT0gJ29iamVjdCcgJiYgdHlwZW9mIGluc3RhbmNlICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBhcmd1bWVudCBwYXNzZWQgd2FzIGFuIGludmFsaWQgdHlwZS4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2xhenogPSBDb250YWluZXIubm9ybWFsaXplQ2xhc3MoY2xhenopO1xuXG4gICAgICAgICAgICBzaW5nbGV0b25zLnNldChjbGF6eiwgaW5zdGFuY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIHRoZSBsaXN0IG9mIGRlcGVuZGVuY2llcyByZXF1aXJlZCBmb3IgdGhlIHNwZWNpZmllZCBjbGFzcy5cbiAgICAgICAgICogQHBhcmFtICB7Y2xhc3N9IGNsYXp6ICAgICAgICBDbGFzcyB0byByZWdpc3RlciBkZXBlbmRlbmNpZXMgZm9yXG4gICAgICAgICAqIEBwYXJhbSAge2FycmF5fSBkZXBlbmRlbmNpZXMgQXJyYXkgb2YgZGVwZW5kZW5jaWVzIGZvciB0aGUgY2xhc3NcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlZ2lzdGVyRGVwZW5kZW5jaWVzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyRGVwZW5kZW5jaWVzKGNsYXp6LCBkZXBzKSB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXMuc2V0KGNsYXp6LCBkZXBzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlciB0aGUgc3BlY2lmaWVkIGNsYXNzIGFzIGEgc2luZ2xldG9uLCBtZWFuaW5nIG9ubHkgYSBzaW5nbGVcbiAgICAgICAgICogaW5zdGFuY2Ugb2YgaXQgd2lsbCBiZSBjcmVhdGVkIGZvciB0aGUgZW50aXJlIGFwcGxpY2F0aW9uLlxuICAgICAgICAgKiBAcGFyYW0gIHtjbGFzc30gY2xhenpcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlZ2lzdGVyQXNTaW5nbGV0b24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJBc1NpbmdsZXRvbihjbGF6eikge1xuICAgICAgICAgICAgaWYgKCFzaW5nbGV0b25zLmhhcyhjbGF6eikpIHtcbiAgICAgICAgICAgICAgICBzaW5nbGV0b25zLnNldChjbGF6eiwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udGFpbmVyO1xufSkoKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ29udGFpbmVyOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZGVwZW5kZW5jaWVzO1xuXG52YXIgX2NvbnRhaW5lciA9IHJlcXVpcmUoJy4vY29udGFpbmVyJyk7XG5cbnZhciBfY29udGFpbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbnRhaW5lcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGRlcGVuZGVuY2llcygpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgZGVwcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBkZXBzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiBkZWNvcmF0b3IoQ2xhenopIHtcbiAgICAgICAgX2NvbnRhaW5lcjIuZGVmYXVsdC5yZWdpc3RlckRlcGVuZGVuY2llcyhDbGF6eiwgZGVwcyk7XG4gICAgfTtcbn0gLyoqXG4gICAqIEBwYWNrYWdlIG5lZWRsZXBvaW50XG4gICAqIEBjb3B5cmlnaHQgMjAxNSBBbmRyZXcgTXVuc2VsbCA8YW5kcmV3QHdpemFyZGFwcHMubmV0PlxuICAgKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY29udGFpbmVyID0gcmVxdWlyZSgnLi9jb250YWluZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdjb250YWluZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfY29udGFpbmVyLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX3NpbmdsZXRvbiA9IHJlcXVpcmUoJy4vc2luZ2xldG9uJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnc2luZ2xldG9uJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3NpbmdsZXRvbi5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9kZXBlbmRlbmNpZXMgPSByZXF1aXJlKCcuL2RlcGVuZGVuY2llcycpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ2RlcGVuZGVuY2llcycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9kZXBlbmRlbmNpZXMuZGVmYXVsdDtcbiAgfVxufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gc2luZ2xldG9uO1xuXG52YXIgX2NvbnRhaW5lciA9IHJlcXVpcmUoJy4vY29udGFpbmVyJyk7XG5cbnZhciBfY29udGFpbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbnRhaW5lcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHNpbmdsZXRvbihDbGF6eikge1xuICBfY29udGFpbmVyMi5kZWZhdWx0LnJlZ2lzdGVyQXNTaW5nbGV0b24oQ2xhenopO1xufSAvKipcbiAgICogQHBhY2thZ2UgbmVlZGxlcG9pbnRcbiAgICogQGNvcHlyaWdodCAyMDE1IEFuZHJldyBNdW5zZWxsIDxhbmRyZXdAd2l6YXJkYXBwcy5uZXQ+XG4gICAqLyJdfQ=="}