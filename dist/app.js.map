{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/app.js","js/db.js","js/game.js","js/hand.js","js/init.js","js/scoring.js","js/utils.js","js/view/gameBalance.js","js/view/gamePanel.js","js/view/gamesList.js","js/view/handCreator.js","js/view/newGameForm.js","js/view/templates.js","js/view/utils.js","node_modules/needlepoint/dist/container.js","node_modules/needlepoint/dist/dependencies.js","node_modules/needlepoint/dist/index.js","node_modules/needlepoint/dist/singleton.js"],"names":[],"mappings":"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,yBAAK,IAAL,CAAU,WAAV,CAAsB,OAAK,YAAL,CAAkB,KAAlB,CAAtB;AACH;AACJ,aAJD;AAKH;;AAED;;;;;;kCAGU;AACN,mBAAO,KAAK,IAAZ;AACH;;;;EA7E4B,iB;;;;;;;;QCvCjB,U,GAAA,U;AALhB;;;;;AAKO,SAAS,UAAT,CAAoB,IAApB,EAA0B;AAC7B,QAAI,OAAO,SAAS,aAAT,CAAuB,GAAvB,CAAX;AACA,SAAK,SAAL,CAAe,GAAf,CAAmB,WAAnB;AACA,SAAK,SAAL,CAAe,GAAf,CAAmB,UAAQ,KAAK,YAAL,EAA3B;AACA,SAAK,YAAL,CAAkB,WAAlB,EAA+B,KAAK,YAAL,EAA/B;AACA,WAAO,IAAP;AACH;;;ACXD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\r\nimport {Hand} from './hand.js';\r\nimport {Player, Game} from './game.js';\r\nimport {HandCreatorView} from \"./view/handCreator.js\";\r\nimport {GameBalanceTableView} from \"./view/gameBalance\";\r\n\r\nimport {dependencies} from 'needlepoint';\r\nimport {domLoader} from \"./view/templates\";\r\nimport {GamesListView} from \"./view/gamesList\";\r\nimport {NewGameFormView} from \"./view/newGameForm\";\r\nimport {MahjongDatabase} from \"./db\";\r\n\r\n\r\n/**\r\n * @typedef {Object} OnEditFinishEvent\r\n * @property {Round} round\r\n * @property {Player} player\r\n * @property {Array<TileSet>} tilesets\r\n * @property {boolean} isWinner\r\n * @property {boolean} lastTileFromWall\r\n * @property {boolean} lastAvailableTile\r\n * @property {boolean} lastTileSpecial\r\n * @property {String} specialSet\r\n */\r\n\r\n/**\r\n * @typedef {Object} OnHandEditEvent\r\n * @property {Round} round\r\n * @property {Player} player\r\n */\r\n\r\n\r\n@dependencies(domLoader('app'), HandCreatorView, GameBalanceTableView, GamesListView, NewGameFormView)\r\nexport class MainAppUI {\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     * @param {HandCreatorView} handCreator\r\n     * @param {GameBalanceTableView} balanceView\r\n     * @param {GamesListView} gameList\r\n     * @param {NewGameFormView} newGameForm\r\n     */\r\n    constructor(template, handCreator, balanceView, gameList, newGameForm) {\r\n        this.root = template.getRoot();\r\n\r\n        this.handCreator = handCreator;\r\n        this.balanceTable = balanceView;\r\n        this.gameList = gameList;\r\n        this.newGameForm = newGameForm;\r\n\r\n        this.panels = [this.handCreator, this.balanceTable, this.gameList, this.newGameForm];\r\n        /**\r\n         *\r\n         * @type {GamePanel}\r\n         */\r\n        this.activePanel = null;\r\n\r\n        this.panels.forEach(panel => {\r\n            this.root.appendChild(panel.getRoot());\r\n            panel.hide();\r\n        });\r\n\r\n        this.handCreator.initUI();\r\n    }\r\n\r\n    showPanel(panel) {\r\n        if(this.activePanel) {\r\n            this.activePanel.hide();\r\n        }\r\n\r\n        this.activePanel = panel;\r\n\r\n        this.activePanel.show();\r\n    }\r\n\r\n    mount(parent) {\r\n        parent.appendChild(this.root);\r\n    }\r\n}\r\n\r\n@dependencies(MainAppUI, MahjongDatabase)\r\nexport class MahjongLilHelperMainViewController {\r\n\r\n    /**\r\n     * @param {MainAppUI} view\r\n     * @param {MahjongDatabase} db\r\n     */\r\n    constructor(view, db) {\r\n        this.view = view;\r\n        this.db = db;\r\n\r\n        /**\r\n         * @type {Game}\r\n         */\r\n        this.currentGame = null;\r\n\r\n        /**\r\n         * @type {Array<Game>}\r\n         */\r\n        this.games = [];\r\n\r\n        this.view.gameList.gameSelectedEvent.addListener(game => {\r\n            this.loadGame(game);\r\n            this.view.showPanel(this.view.balanceTable);\r\n        });\r\n\r\n        this.view.gameList.newGameEvent.addListener(() => {\r\n            this.view.showPanel(this.view.newGameForm)\r\n        });\r\n\r\n        this.view.newGameForm.cancelEvent.addListener(() => {\r\n            this.view.showPanel(this.view.gameList)\r\n        });\r\n\r\n        this.view.newGameForm.newGameCreateEvent.addListener(players => {\r\n            this.addNewGame(players);\r\n            this.view.showPanel(this.view.gameList);\r\n        });\r\n\r\n        this.view.balanceTable.onHandEditClick.addListener((/*OnHandEditEvent*/event) => {\r\n            this.view.handCreator.showHand(event.round, event.player);\r\n            this.view.showPanel(this.view.handCreator);\r\n        });\r\n\r\n        this.view.balanceTable.addRoundEvent.addListener(() => {\r\n            this.currentGame.createRound();\r\n            this.save();\r\n            this.view.balanceTable.renderGameBalance(this.currentGame);\r\n        });\r\n\r\n        this.view.balanceTable.returnToGameListEvent.addListener(() => {\r\n            this.view.gameList.loadGames(this.games);\r\n            this.view.showPanel(this.view.gameList);\r\n        });\r\n\r\n        this.view.handCreator.onEditFinish.addListener(event => {\r\n            this.handleHandEditFinish(event);\r\n            this.view.showPanel(this.view.balanceTable);\r\n        });\r\n    }\r\n\r\n    loadState(games) {\r\n        this.view.showPanel(this.view.gameList);\r\n\r\n        this.games = games;\r\n        this.view.gameList.loadGames(this.games);\r\n    }\r\n\r\n    loadGame(game) {\r\n        this.currentGame = game;\r\n        this.view.balanceTable.renderGameBalance(this.currentGame);\r\n    }\r\n\r\n    load() {\r\n        this.loadState(this.db.load());\r\n    }\r\n\r\n    save() {\r\n        this.db.save(this.games);\r\n    }\r\n\r\n    addNewGame(players) {\r\n        this.games.push(new Game(...players));\r\n\r\n        this.save();\r\n\r\n        this.view.gameList.loadGames(this.games);\r\n    }\r\n\r\n    /**\r\n     * @param {OnEditFinishEvent} event\r\n     */\r\n    handleHandEditFinish(event) {\r\n        let hand = new Hand();\r\n        event.tilesets.forEach(set => hand.addSet(set));\r\n\r\n        if(event.specialSet) {\r\n            hand.setSpecialSet(event.specialSet);\r\n        }\r\n\r\n        event.round.setHand(event.player, hand);\r\n        if(event.isWinner) {\r\n            event.round.setWinner(event.player, event.lastAvailableTile, event.lastTileFromWall);\r\n        }\r\n\r\n        this.save();\r\n\r\n        this.view.balanceTable.renderGameBalance(this.currentGame);\r\n    }\r\n}\r\n","\r\nimport {dependencies} from 'needlepoint';\r\nimport {Chow, FreeTiles, Hand, Kong, Pair, Pung, SpecialSets, Tiles} from \"./hand\";\r\nimport {Game, Player} from \"./game\";\r\n\r\nexport class LocalStorageDriver {\r\n    /**\r\n     * @return {Storage}\r\n     */\r\n    getDriver() {\r\n        return window.localStorage;\r\n    }\r\n}\r\n\r\nexport class GameSerializer {\r\n    /**\r\n     * @param {Game} game\r\n     */\r\n    serialize(game) {\r\n        let result = {\r\n            players: game.players.map(p => {return {name: p.name, seatNumber: p.seatNumber}}),\r\n            rounds: game.rounds.map(round => {\r\n                return {\r\n                    winner: round.winner ? round.winner.seatNumber : null,\r\n                    lastAvailableTile: round.lastAvailableTile,\r\n                    lastTileFromWall: round.lastTileFromWall,\r\n                    hands: round.hands.map(hand => hand.hand ? this._serializeHand(hand.hand) : null)\r\n                }\r\n            }),\r\n        };\r\n\r\n        return result;\r\n    }\r\n\r\n    deserialize(gameJson) {\r\n        let players = gameJson.players.map(playerData => new Player(playerData.seatNumber, playerData.name));\r\n\r\n        let game = new Game(...players);\r\n\r\n        gameJson.rounds.forEach(roundData => {\r\n            let round = game.createRound();\r\n\r\n            roundData.hands.forEach((handData, playerIndex) => {\r\n                if(handData === null) {\r\n                    return;\r\n                }\r\n\r\n                let hand = new Hand();\r\n\r\n                (handData.sets || handData).forEach(setData => {\r\n                    hand.addSet(this._deserializeTileset(setData));\r\n                });\r\n\r\n                if(handData.specialSet) {\r\n                    hand.setSpecialSet(SpecialSets[handData.specialSet]);\r\n                }\r\n\r\n                round.setHand(players[playerIndex], hand);\r\n            });\r\n\r\n            if(roundData.winner !== null) {\r\n                round.setWinner(players[roundData.winner], roundData.lastAvailableTile, roundData.lastTileFromWall);\r\n            }\r\n        });\r\n\r\n        return game;\r\n    }\r\n\r\n    /**\r\n     * @param {Hand} hand\r\n     */\r\n    _serializeHand(hand) {\r\n        return {\r\n            sets: hand.sets.map(this._serializeTileset, this),\r\n            specialSet: hand.specialSet,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @param {TileSet} tileset\r\n     */\r\n    _serializeTileset(tileset) {\r\n        if(tileset instanceof Kong) {\r\n            return {\r\n                type: 'kong',\r\n                isRevealed: tileset.isRevealed,\r\n                tile: this._getTileCode(tileset.getTile())\r\n            }\r\n        }\r\n\r\n        if(tileset instanceof Pung) {\r\n            return {\r\n                type: 'pung',\r\n                isRevealed: tileset.isRevealed,\r\n                tile: this._getTileCode(tileset.getTile()),\r\n            }\r\n        }\r\n\r\n        if(tileset instanceof Chow) {\r\n            return {\r\n                type: 'chow',\r\n                isRevealed: tileset.isRevealed,\r\n                tiles: tileset.tiles.map(tile => this._getTileCode(tile))\r\n            }\r\n        }\r\n\r\n        if(tileset instanceof Pair) {\r\n            return {\r\n                type: 'pair',\r\n                tile: this._getTileCode(tileset.getTile()),\r\n            }\r\n        }\r\n\r\n        if(tileset instanceof FreeTiles) {\r\n            return {\r\n                type: 'free',\r\n                tiles: tileset.tiles.map(tile => this._getTileCode(tile))\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {Tile} tile\r\n     */\r\n    _getTileCode(tile) {\r\n        return Object.keys(Tiles).map(tileKey => {\r\n            if(Tiles[tileKey].equals(tile)) {\r\n                return tileKey;\r\n            }\r\n        }).filter(key => key)[0];\r\n    }\r\n\r\n    _deserializeTileset(setData) {\r\n        if(setData.type === 'kong') {\r\n            return new Kong(setData.isRevealed, Tiles[setData.tile]);\r\n        }\r\n\r\n        if(setData.type === 'pung') {\r\n            return new Pung(setData.isRevealed, Tiles[setData.tile]);\r\n        }\r\n\r\n        if(setData.type === 'chow') {\r\n            return new Chow(setData.isRevealed, Tiles[setData.tiles[0]],\r\n                Tiles[setData.tiles[1]], Tiles[setData.tiles[2]])\r\n        }\r\n\r\n        if(setData.type === 'pair') {\r\n            return new Pair(Tiles[setData.tile]);\r\n        }\r\n\r\n        if(setData.type === 'free') {\r\n            return new FreeTiles(setData.tiles.map(tile => Tiles[tile]));\r\n        }\r\n    }\r\n}\r\n\r\n\r\n@dependencies(LocalStorageDriver, GameSerializer)\r\nexport class MahjongDatabase {\r\n\r\n    /**\r\n     * @param {LocalStorageDriver} storage\r\n     * @param {GameSerializer} serializer\r\n     */\r\n    constructor(storage, serializer) {\r\n        this.storage = storage.getDriver();\r\n        this.serializer = serializer;\r\n\r\n        this.storageKey = 'mahjongGames';\r\n    }\r\n\r\n    load() {\r\n        let gamesStr  = this.storage.getItem(this.storageKey);\r\n\r\n        let games = JSON.parse(gamesStr);\r\n\r\n        if(games !== null) {\r\n            return games.map(this.serializer.deserialize, this.serializer);\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    save(games) {\r\n        let gamesArr = games.map(this.serializer.serialize, this.serializer);\r\n\r\n        this.storage.setItem(this.storageKey, JSON.stringify(gamesArr));\r\n    }\r\n}","import * as hand from './hand.js';\r\nimport * as score from './scoring.js';\r\n\r\nclass Player {\r\n    constructor(seatNumber, name) {\r\n        this.seatNumber = seatNumber;\r\n        this.name = name;\r\n    }\r\n}\r\n\r\nclass Round {\r\n    /**\r\n     * @param {Array<Player>} players\r\n     * @param {Number} roundIndex\r\n     * @param {Game} game\r\n     */\r\n    constructor(players, roundIndex, game) {\r\n        this.roundNumber = roundIndex + 1;\r\n        this.roundIndex = roundIndex;\r\n        this.game = game;\r\n\r\n        this.balanceCalculator = new RoundBalanceCalculator();\r\n\r\n        /**\r\n         * @type {ScoreCalculator}\r\n         */\r\n        this.scoreCalculator = score.ScoreCalculator.createDefaultScoreCalculator();\r\n\r\n        this.windPhase = Math.floor(this.roundIndex/4);\r\n        this.windIndicator = hand.WindOrder[this.windPhase % 4];\r\n\r\n        this.eastWindPlayer = players[this.roundIndex % 4];\r\n\r\n        /**\r\n         * @type {Player}\r\n         */\r\n        this.winner = null;\r\n        this.lastAvailableTile = false;\r\n        this.lastTileFromWall = false;\r\n        this.lastTileSpecial = false;\r\n\r\n        this.hands = [\r\n            {player: players[0], hand: null},\r\n            {player: players[1], hand: null},\r\n            {player: players[2], hand: null},\r\n            {player: players[3], hand: null},\r\n        ];\r\n\r\n        this.players = players;\r\n        this.roundScores = [0, 0, 0, 0];\r\n    }\r\n\r\n    setHand(player, hand) {\r\n        this.hands[player.seatNumber].hand = hand;\r\n\r\n        this.roundScores[player.seatNumber] = this.scoreCalculator.calculateScore(this, player);\r\n    }\r\n\r\n    setWinner(player, lastAvailableTile, lastTileFromWall, lastTileSpecial) {\r\n        this.winner = player;\r\n        this.lastAvailableTile = lastAvailableTile || false;\r\n        this.lastTileFromWall = lastTileFromWall || false;\r\n        this.lastTileSpecial = lastTileSpecial || false;\r\n\r\n        this.players.forEach((player, index) => {\r\n            this.roundScores[index] = this.scoreCalculator.calculateScore(this, player) || 0;\r\n        });\r\n    }\r\n\r\n    getHand(player) {\r\n        return this.hands[player.seatNumber];\r\n    }\r\n\r\n    getPlayerWind(player) {\r\n        let playerIndex = (this.windPhase + player.seatNumber - (this.roundIndex + this.windPhase) % 4) % 4;\r\n\r\n        if(playerIndex < 0) {\r\n            return hand.WindOrder[hand.WindOrder.length + playerIndex];\r\n        }\r\n\r\n        return hand.WindOrder[playerIndex];\r\n    }\r\n\r\n    getRoundBalance() {\r\n        return this.balanceCalculator.getBalance(this, this.players, this.roundScores);\r\n    }\r\n}\r\n\r\nclass RoundBalanceCalculator {\r\n    getBalance(round, players, scores) {\r\n\r\n        let result = [0, 0, 0, 0];\r\n\r\n        for(let i = 0; i < players.length; i++) {\r\n            for(let j = i+1; j < players.length; j++) {\r\n                let p1 = players[i];\r\n                let p2 = players[j];\r\n\r\n                let srcIdx = p1.seatNumber;\r\n                let otherIdx = p2.seatNumber;\r\n\r\n                let score = 0;\r\n                let mult = 1;\r\n\r\n                let dealsWithEastWind = (p1 === round.eastWindPlayer || p2 === round.eastWindPlayer);\r\n                let dealsWithWinner = (p1 === round.winner || p2 === round.winner);\r\n\r\n                if(dealsWithEastWind) {\r\n                    mult = 2;\r\n                }\r\n\r\n                let gainer, loser;\r\n\r\n                if(dealsWithWinner) {\r\n                    gainer = (p1 === round.winner) ? p1 : p2;\r\n                    loser = (p1 !== round.winner) ? p1 : p2;\r\n\r\n                    score = scores[gainer.seatNumber];\r\n                }\r\n                else {\r\n                    gainer = (scores[srcIdx] >= scores[otherIdx]) ? p1 : p2;\r\n                    loser = (scores[srcIdx] < scores[otherIdx]) ? p1 : p2;\r\n\r\n                    score = scores[gainer.seatNumber] - scores[loser.seatNumber];\r\n                }\r\n\r\n                result[gainer.seatNumber] += score * mult;\r\n                result[loser.seatNumber] -= score * mult;\r\n\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nclass Game {\r\n    constructor(p1, p2, p3, p4) {\r\n        /**\r\n         * @type {Array<Player>}\r\n         */\r\n        this.players = [p1, p2, p3, p4];\r\n\r\n        /**\r\n         * @type {Array<Round>}\r\n         */\r\n        this.rounds = [];\r\n\r\n        this.roundLimit = 1000;\r\n    }\r\n\r\n    /**\r\n     * @return {Round}\r\n     */\r\n    createRound() {\r\n        let round = new Round(this.players, this.rounds.length, this);\r\n\r\n        this.rounds.push(round);\r\n\r\n        return round;\r\n    }\r\n\r\n    getTotalBalance(maxRoundNumber) {\r\n        let result = [0, 0, 0, 0];\r\n\r\n        maxRoundNumber = (maxRoundNumber === undefined) ? this.rounds.length : maxRoundNumber;\r\n\r\n        this.rounds.slice(0, maxRoundNumber+1).forEach(round => {\r\n            let roundBalance = round.getRoundBalance();\r\n\r\n            result[0] += roundBalance[0];\r\n            result[1] += roundBalance[1];\r\n            result[2] += roundBalance[2];\r\n            result[3] += roundBalance[3];\r\n        });\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\n// module.exports = {Game, Round, Player, RoundBalanceCalculator};\r\nexport {Game, Round, Player, RoundBalanceCalculator};","\r\n\r\nconst Suits = {\r\n    BAMBOO: 'bamboo',\r\n    CIRCLE: 'circle',\r\n    CHARACTER: 'character',\r\n    DRAGON: 'dragon',\r\n    WIND: 'wind',\r\n    BONUS: 'bonus',\r\n};\r\n\r\nconst Dragons = {\r\n    RED: 'red',\r\n    GREEN: 'green',\r\n    WHITE: 'white',\r\n};\r\n\r\nconst Winds = {\r\n    EAST: 'east',\r\n    WEST: 'west',\r\n    NORTH: 'north',\r\n    SOUTH: 'south',\r\n};\r\n\r\nconst Bonus = {\r\n    FLOWER1: 'flower1',\r\n    FLOWER2: 'flower2',\r\n    FLOWER3: 'flower3',\r\n    FLOWER4: 'flower4',\r\n    SUMMER: 'summer',\r\n    SPRING: 'spring',\r\n    AUTUMN: 'autumn',\r\n    WINTER: 'winter',\r\n};\r\n\r\nconst SpecialSets = {\r\n    'minor': 'minor',\r\n    'major': 'major',\r\n};\r\n\r\n\r\nclass Tile {\r\n    constructor(isSuit, isHonour) {\r\n        this.isSuit = isSuit;\r\n        this.isHonour = isHonour;\r\n    }\r\n\r\n    equals(other) {\r\n        if(this.isSuit !== other.isSuit) {\r\n            return false;\r\n        }\r\n\r\n        return this.isHonour === other.isHonour;\r\n    }\r\n\r\n    toTypeString() {\r\n        return `[Tile ${this}]`;\r\n    }\r\n}\r\n\r\nclass SuitTile extends Tile {\r\n    constructor(suit, number) {\r\n        super(true, number < 2 || number > 8);\r\n\r\n        this.suit = suit;\r\n        this.number = number;\r\n    }\r\n\r\n    toString() {\r\n        return `[SuitTile ${this.suit}${this.number}]`\r\n    }\r\n\r\n    toTypeString() {\r\n        return `suit-${this.suit}-${this.number}`;\r\n    }\r\n\r\n    equals(other) {\r\n        if(!super.equals(other)) {\r\n            return false;\r\n        }\r\n\r\n        if(this.suit !== other.suit) {\r\n            return false;\r\n        }\r\n\r\n        return this.number === other.number;\r\n    }\r\n}\r\n\r\nclass DragonTile extends Tile {\r\n    constructor(kind) {\r\n        super(false, true);\r\n\r\n        this.dragonKind = kind;\r\n    }\r\n\r\n    toString() {\r\n        return `[DragonTile ${this.dragonKind}]`\r\n    }\r\n\r\n    toTypeString() {\r\n        return `dragon-${this.dragonKind}`;\r\n    }\r\n\r\n    equals(other) {\r\n        if(!super.equals(other)) {\r\n            return false;\r\n        }\r\n\r\n        return this.dragonKind === other.dragonKind;\r\n    }\r\n}\r\n\r\nclass WindTile extends Tile {\r\n    constructor(kind) {\r\n        super(false, true);\r\n\r\n        this.windKind = kind;\r\n    }\r\n\r\n    toString() {\r\n        return `[WindTile ${this.windKind}]`\r\n    }\r\n\r\n    toTypeString() {\r\n        return `wind-${this.windKind}`;\r\n    }\r\n\r\n    equals(other) {\r\n        if(!super.equals(other)) {\r\n            return false;\r\n        }\r\n\r\n        return this.windKind === other.windKind;\r\n    }\r\n}\r\n\r\nclass BonusTile extends Tile {\r\n    constructor(kind) {\r\n        super(false, false);\r\n\r\n        this.bonusKind = kind;\r\n    }\r\n\r\n    toTypeString() {\r\n        return `bonus-${this.bonusKind}`;\r\n    }\r\n\r\n    equals(other) {\r\n        if(!super.equals(other)) {\r\n            return false;\r\n        }\r\n\r\n        return this.bonusKind === other.bonusKind;\r\n    }\r\n}\r\n\r\nconst Tiles = {\r\n    Circle1: new SuitTile(Suits.CIRCLE, 1),\r\n    Circle2: new SuitTile(Suits.CIRCLE, 2),\r\n    Circle3: new SuitTile(Suits.CIRCLE, 3),\r\n    Circle4: new SuitTile(Suits.CIRCLE, 4),\r\n    Circle5: new SuitTile(Suits.CIRCLE, 5),\r\n    Circle6: new SuitTile(Suits.CIRCLE, 6),\r\n    Circle7: new SuitTile(Suits.CIRCLE, 7),\r\n    Circle8: new SuitTile(Suits.CIRCLE, 8),\r\n    Circle9: new SuitTile(Suits.CIRCLE, 9),\r\n\r\n    Bamboo1: new SuitTile(Suits.BAMBOO, 1),\r\n    Bamboo2: new SuitTile(Suits.BAMBOO, 2),\r\n    Bamboo3: new SuitTile(Suits.BAMBOO, 3),\r\n    Bamboo4: new SuitTile(Suits.BAMBOO, 4),\r\n    Bamboo5: new SuitTile(Suits.BAMBOO, 5),\r\n    Bamboo6: new SuitTile(Suits.BAMBOO, 6),\r\n    Bamboo7: new SuitTile(Suits.BAMBOO, 7),\r\n    Bamboo8: new SuitTile(Suits.BAMBOO, 8),\r\n    Bamboo9: new SuitTile(Suits.BAMBOO, 9),\r\n\r\n    Character1: new SuitTile(Suits.CHARACTER, 1),\r\n    Character2: new SuitTile(Suits.CHARACTER, 2),\r\n    Character3: new SuitTile(Suits.CHARACTER, 3),\r\n    Character4: new SuitTile(Suits.CHARACTER, 4),\r\n    Character5: new SuitTile(Suits.CHARACTER, 5),\r\n    Character6: new SuitTile(Suits.CHARACTER, 6),\r\n    Character7: new SuitTile(Suits.CHARACTER, 7),\r\n    Character8: new SuitTile(Suits.CHARACTER, 8),\r\n    Character9: new SuitTile(Suits.CHARACTER, 9),\r\n\r\n    DragonRed: new DragonTile(Dragons.RED),\r\n    DragonWhite: new DragonTile(Dragons.WHITE),\r\n    DragonGreen: new DragonTile(Dragons.GREEN),\r\n\r\n    WindEast: new WindTile(Winds.EAST),\r\n    WindWest: new WindTile(Winds.WEST),\r\n    WindNorth: new WindTile(Winds.NORTH),\r\n    WindSouth: new WindTile(Winds.SOUTH),\r\n\r\n    BonusFlower1: new BonusTile(Bonus.FLOWER1),\r\n    BonusFlower2: new BonusTile(Bonus.FLOWER2),\r\n    BonusFlower3: new BonusTile(Bonus.FLOWER3),\r\n    BonusFlower4: new BonusTile(Bonus.FLOWER4),\r\n    BonusSummer: new BonusTile(Bonus.SUMMER),\r\n    BonusSpring: new BonusTile(Bonus.SPRING),\r\n    BonusAutumn: new BonusTile(Bonus.AUTUMN),\r\n    BonusWinter: new BonusTile(Bonus.WINTER),\r\n};\r\n\r\nconst TileGroups = {\r\n    [Suits.BAMBOO]: [Tiles.Bamboo1, Tiles.Bamboo2, Tiles.Bamboo3, Tiles.Bamboo4, Tiles.Bamboo5, Tiles.Bamboo6, Tiles.Bamboo7, Tiles.Bamboo8, Tiles.Bamboo9],\r\n    [Suits.CIRCLE]: [Tiles.Circle1, Tiles.Circle2, Tiles.Circle3, Tiles.Circle4, Tiles.Circle5, Tiles.Circle6, Tiles.Circle7, Tiles.Circle8, Tiles.Circle9],\r\n    [Suits.CHARACTER]: [Tiles.Character1, Tiles.Character2, Tiles.Character3, Tiles.Character4, Tiles.Character5, Tiles.Character6, Tiles.Character7, Tiles.Character8, Tiles.Character9],\r\n    [Suits.DRAGON]: [Tiles.DragonRed, Tiles.DragonGreen, Tiles.DragonWhite],\r\n    [Suits.WIND]: [Tiles.WindWest, Tiles.WindEast, Tiles.WindNorth, Tiles.WindSouth],\r\n    [Suits.BONUS]: [Tiles.BonusFlower1, Tiles.BonusFlower2, Tiles.BonusFlower3, Tiles.BonusFlower4,\r\n        Tiles.BonusSummer, Tiles.BonusSpring, Tiles.BonusAutumn, Tiles.BonusWinter],\r\n};\r\n\r\nconst WindOrder = [\r\n    Tiles.WindEast,\r\n    Tiles.WindSouth,\r\n    Tiles.WindWest,\r\n    Tiles.WindNorth,\r\n];\r\n\r\nclass TileSet {\r\n    constructor(revealed, tiles) {\r\n        this.isRevealed = revealed;\r\n        this.tiles = tiles;\r\n\r\n        this.simpleSet = (tiles[0] instanceof SuitTile) && !tiles[0].isHonour;\r\n    }\r\n\r\n    getTile() {\r\n        return this.tiles[0];\r\n    }\r\n}\r\n\r\nclass Chow extends TileSet {\r\n    constructor(revealed, tile1, tile2, tile3) {\r\n        super(revealed, [tile1, tile2, tile3]);\r\n    }\r\n}\r\n\r\nclass Pung extends TileSet {\r\n    constructor(revealed, tile) {\r\n        super(revealed, [tile, tile, tile]);\r\n    }\r\n}\r\n\r\nclass Kong extends TileSet {\r\n    constructor(revealed, tile) {\r\n        super(revealed, [tile, tile, tile, tile]);\r\n    }\r\n}\r\n\r\nclass Pair extends TileSet {\r\n    constructor(tile) {\r\n        super(false, [tile, tile]);\r\n    }\r\n}\r\n\r\nclass FreeTiles extends TileSet {\r\n    constructor(tiles) {\r\n        super(false, tiles);\r\n    }\r\n}\r\n\r\n\r\nclass Hand {\r\n    constructor() {\r\n        /**\r\n         * @type {Array<Tile>}\r\n         */\r\n        this.tiles = [];\r\n        this.sets = [];\r\n        this.specialSet = null;\r\n    }\r\n\r\n    setSpecialSet(specialSet) {\r\n        this.specialSet = specialSet;\r\n    }\r\n\r\n    addTile(tile) {\r\n        this.tiles.push(tile);\r\n    }\r\n\r\n    getTileCount(tile) {\r\n        return this.tiles.filter((t) => t.equals(tile)).length;\r\n    }\r\n\r\n    addSet(tileSet) {\r\n        this.sets.push(tileSet);\r\n        this.tiles = this.tiles.concat(tileSet.tiles);\r\n    }\r\n\r\n    /**\r\n     * @return {Array<TileSet>}\r\n     */\r\n    getSetsOfType(clazz, tileType) {\r\n        let result = this.sets.filter((tileSet) => tileSet instanceof clazz);\r\n\r\n        if(tileType) {\r\n            result = result.filter((tileSet) => tileSet.getTile() instanceof tileType)\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getTilesOfType(tileType) {\r\n        return this.tiles.filter(tile => tile instanceof tileType);\r\n    }\r\n}\r\n\r\nexport {\r\n    Hand, Tiles, SuitTile, Suits, Dragons, DragonTile, Winds, WindTile, Bonus, BonusTile,\r\n    Chow, Kong, Pung, Pair, FreeTiles, WindOrder, TileGroups, SpecialSets\r\n};","import {TemplateContainer} from \"./view/templates\";\r\nimport {Game, Player} from \"./game\";\r\nimport {MahjongLilHelperMainViewController} from \"./app\";\r\n\r\nimport {container} from 'needlepoint';\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\r\n\r\n    let tmpl = container.resolve(TemplateContainer);\r\n    tmpl.discover(document.body);\r\n\r\n    /**\r\n     * @type {MahjongLilHelperMainViewController}\r\n     */\r\n    let ctrl = container.resolve(MahjongLilHelperMainViewController);\r\n\r\n    ctrl.view.mount(document.getElementById('mahjongContent'));\r\n\r\n    ctrl.load();\r\n\r\n    console.log('READY', ctrl);\r\n});","\r\nimport * as h from './hand.js';\r\nimport {BonusTile, SpecialSets} from \"./hand\";\r\n\r\n\r\nfunction calcPungKongValue(baseValue, tileSet) {\r\n    if(!tileSet.simpleSet) {\r\n        baseValue *= 2;\r\n    }\r\n\r\n    if(!tileSet.isRevealed) {\r\n        baseValue *= 2;\r\n    }\r\n\r\n    return baseValue;\r\n}\r\n\r\nfunction applyMultipliers(numMultipliers, value) {\r\n    for(let i = 0; i < numMultipliers; i++) {\r\n        value *= 2;\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\nclass ScoreCalculator {\r\n    constructor(pointsRules, multipliersForAll, multipliersForWinner, specialSetsRules) {\r\n        this.pointsRules = pointsRules;\r\n        this.multiplierRulesForAll = multipliersForAll;\r\n        this.multiplierRulesForWinner = multipliersForWinner;\r\n        this.specialSetsRules = specialSetsRules;\r\n    }\r\n\r\n    /**\r\n     * @param {Round} round\r\n     * @param {Player} player\r\n     * @return {{score,multipliers,points}}\r\n     */\r\n    calculateExtendedScore(round, player) {\r\n        let hand = round.getHand(player).hand;\r\n\r\n        if(hand === null) {\r\n            return {\r\n                score: 0,\r\n                multipliers: [],\r\n                points: [],\r\n            };\r\n        }\r\n\r\n        let appliedPoints = [];\r\n        let appliedMultipliers = [];\r\n\r\n        let points = 0;\r\n        let multipliers = 0;\r\n\r\n        let specialPoints = this.specialSetsRules.map((/*SpecialSetRule*/rule) => {\r\n            return {\r\n                rule: rule,\r\n                amount: rule.getPoints(hand, round, player),\r\n            }\r\n        }).filter(rule => rule.amount > 0);\r\n\r\n        if(specialPoints.length > 0) {\r\n            points = round.game.roundLimit * specialPoints[0].amount;\r\n            appliedPoints.push({\r\n                rule: specialPoints[0].rule,\r\n                amount: points,\r\n            });\r\n        }\r\n        else {\r\n            points = this.pointsRules.reduce((value, rule) => {\r\n                let p = rule.getPoints(hand, round, player);\r\n                if (p) {\r\n                    appliedPoints.push({rule: rule, amount: p});\r\n                }\r\n                return value + (p || 0)\r\n            }, 0);\r\n\r\n            multipliers = this.multiplierRulesForAll.reduce((value, rule) => {\r\n                let mult = rule.getMultipliers(hand, round, player);\r\n\r\n                if (mult) {\r\n                    appliedMultipliers.push({rule: rule, amount: mult});\r\n                }\r\n\r\n                return value + (mult || 0)\r\n            }, 0);\r\n\r\n            if (round.winner === player) {\r\n                multipliers = this.multiplierRulesForWinner.reduce((value, rule) => {\r\n                    let mult = rule.getMultipliers(hand, round, player);\r\n\r\n                    if (mult) {\r\n                        appliedMultipliers.push({rule: rule, amount: mult});\r\n                    }\r\n\r\n                    return value + (mult || 0)\r\n                }, multipliers);\r\n            }\r\n        }\r\n\r\n        return {\r\n            score: Math.min(applyMultipliers(multipliers, points), 1000),\r\n            multipliers: appliedMultipliers,\r\n            points: appliedPoints,\r\n        };\r\n    }\r\n\r\n    calculateScore(round, player) {\r\n        return this.calculateExtendedScore(round, player).score\r\n    }\r\n\r\n    /**\r\n     * @return {ScoreCalculator}\r\n     */\r\n    static createDefaultScoreCalculator() {\r\n        let pointsRules = [\r\n            new BonusTilePoints(),\r\n            new PointsForPairOfRoundWindRule(),\r\n            new PointsForPairOfOwnWindRule(),\r\n            new PointsForPairOfDragonsRule(),\r\n            new PointsForPungRule(),\r\n            new PointsForKongRule(),\r\n            new PointsForMahjong(),\r\n            new PointsForLastAvailableTile(),\r\n            new PointsForLastTileFromWall(),\r\n        ];\r\n        let multiplierRulesForAll = [\r\n            new DragonSetMultiplier(),\r\n            new RoundWindSetMultiplier(),\r\n            new OwnWindSetMultiplier(),\r\n            new ThreeConcealedPungsMultiplier(),\r\n            new ThreeLittleSagesMultiplier(),\r\n            new ThreeGrandSagesMultiplier(),\r\n            new FourLittleBlessingsMultiplier(),\r\n            new FourGrandBlessingsMultiplier(),\r\n        ];\r\n        let multiplierRulesForWinner = [\r\n            new LastTileSpecialMultiplier(),\r\n            new PureChowsMultiplier(),\r\n            new NoChowsMultiplier(),\r\n            new HalfColorMultiplier(),\r\n            new OnlyHonourTilesMultiplier(),\r\n            new NoHonourSameSuitTiles(),\r\n        ];\r\n\r\n        let specialSetsRules = [\r\n            new SpecialSetRule(),\r\n        ];\r\n\r\n        return new ScoreCalculator(pointsRules, multiplierRulesForAll, multiplierRulesForWinner,\r\n            specialSetsRules);\r\n    }\r\n}\r\n\r\nclass SpecialSetRule {\r\n    /**\r\n     * @param {Hand} hand\r\n     * @param {Round} round\r\n     * @param {Player} player\r\n     */\r\n    getPoints(hand, round, player) {\r\n        if(hand.specialSet) {\r\n            if(hand.specialSet === SpecialSets.minor) {\r\n                return (round.winner === player) ? 0.5 : 0.2;\r\n            }\r\n\r\n            if(hand.specialSet === SpecialSets.major) {\r\n                return (round.winner === player) ? 1 : 0.4;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//#region Rules for points\r\n\r\nclass PointsRule {\r\n    getPoints(hand, round, player) {}\r\n}\r\n\r\nclass PointsForTilesetRule extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        return hand.sets.reduce((value, tileSet) => value + (this.getTilesetValue(tileSet, round, player) || 0), 0);\r\n    }\r\n\r\n    getTilesetValue(tileSet, round, player) {return 0}\r\n}\r\n\r\nclass PointsForTileRule extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        return hand.tiles.reduce((value, tile) => value + (this.getTileValue(tile) || 0), 0);\r\n    }\r\n\r\n    getTileValue(tile) {return 0}\r\n}\r\n\r\nclass BonusTilePoints extends PointsForTileRule {\r\n    getTileValue(tile) {\r\n        if(tile instanceof h.BonusTile) {\r\n            return 4;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForPairOfDragonsRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round, player) {\r\n        if(!(tileSet instanceof h.Pair)) {\r\n            return\r\n        }\r\n\r\n        if(tileSet.getTile() instanceof h.DragonTile) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForPairOfRoundWindRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round) {\r\n        if(!(tileSet instanceof h.Pair)) {\r\n            return\r\n        }\r\n\r\n        if(round.windIndicator.equals(tileSet.getTile())) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForPairOfOwnWindRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round, player) {\r\n        if(!(tileSet instanceof h.Pair)) {\r\n            return\r\n        }\r\n\r\n        if(round.getPlayerWind(player).equals(tileSet.getTile())) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForPungRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round, player) {\r\n        if(tileSet instanceof h.Pung) {\r\n            return calcPungKongValue(2, tileSet);\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForKongRule extends PointsForTilesetRule {\r\n\r\n    getTilesetValue(tileSet, round, player) {\r\n        if(tileSet instanceof h.Kong) {\r\n            return calcPungKongValue(8, tileSet);\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForMahjong extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        if(round.winner === player) {\r\n            return 20;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForLastAvailableTile extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        if(round.winner === player && round.lastAvailableTile) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PointsForLastTileFromWall extends PointsRule {\r\n\r\n    getPoints(hand, round, player) {\r\n        if(round.winner === player && round.lastTileFromWall) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\n//#endregion\r\n\r\n//#region Rules for multipliers\r\n\r\nclass MultiplierRule {\r\n    getMultipliers(hand, round, player) {}\r\n}\r\n\r\nclass LastTileSpecialMultiplier extends MultiplierRule {\r\n    /**\r\n     * @param hand\r\n     * @param {Round} round\r\n     */\r\n    getMultipliers(hand, round) {\r\n        if(round.lastTileSpecial) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass DragonSetMultiplier extends MultiplierRule {\r\n    getMultipliers(hand) {\r\n        return hand.getSetsOfType(h.Kong, h.DragonTile).concat(hand.getSetsOfType(h.Pung, h.DragonTile)).length;\r\n    }\r\n}\r\n\r\nclass RoundWindSetMultiplier extends MultiplierRule {\r\n    getMultipliers(hand, round) {\r\n        let windSets = hand.getSetsOfType(h.Kong, h.WindTile).concat(hand.getSetsOfType(h.Pung, h.WindTile));\r\n\r\n        return windSets.filter(tileSet => tileSet.getTile().equals(round.windIndicator)).length;\r\n    }\r\n}\r\n\r\nclass OwnWindSetMultiplier extends MultiplierRule {\r\n    getMultipliers(hand, round, player) {\r\n        let windSets = hand.getSetsOfType(h.Kong, h.WindTile).concat(hand.getSetsOfType(h.Pung, h.WindTile));\r\n\r\n        return windSets.filter(tileSet => tileSet.getTile().equals(round.getPlayerWind(player))).length;\r\n    }\r\n}\r\n\r\nclass ThreeConcealedPungsMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let pungs = hand.getSetsOfType(h.Pung).filter(tileSet => !tileSet.isRevealed);\r\n\r\n        if(pungs.length >= 3) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass ThreeLittleSagesMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let dragonSets = hand.getSetsOfType(h.Kong, h.DragonTile).concat(hand.getSetsOfType(h.Pung, h.DragonTile));\r\n        let dragonPairs = hand.getSetsOfType(h.Pair, h.DragonTile);\r\n\r\n        if(dragonSets.length >= 2 && dragonPairs.length >= 1) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass ThreeGrandSagesMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let dragonSets = hand.getSetsOfType(h.Kong, h.DragonTile).concat(hand.getSetsOfType(h.Pung, h.DragonTile));\r\n\r\n        if(dragonSets.length >= 3) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass FourLittleBlessingsMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let windSets = hand.getSetsOfType(h.Kong, h.WindTile).concat(hand.getSetsOfType(h.Pung, h.WindTile));\r\n        let windPairs = hand.getSetsOfType(h.Pair);\r\n\r\n        if(windSets.length >= 3 && windPairs.length >= 1) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass FourGrandBlessingsMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let windSets = hand.getSetsOfType(h.Kong, h.WindTile).concat(hand.getSetsOfType(h.Pung, h.WindTile));\r\n\r\n        if(windSets.length >= 4) {\r\n            return 2;\r\n        }\r\n    }\r\n}\r\n\r\nclass PureChowsMultiplier extends MultiplierRule {\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.pointRules = [\r\n            new PointsForPairOfDragonsRule(),\r\n            new PointsForPairOfOwnWindRule(),\r\n            new PointsForPairOfRoundWindRule(),\r\n            new BonusTilePoints(),\r\n        ]\r\n    }\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let kongsAndPungs = hand.getSetsOfType(h.Kong).concat(hand.getSetsOfType(h.Pung));\r\n\r\n        let points = this.pointRules.reduce((value, rule)=> value + (rule.getPoints(hand, round, player) || 0), 0);\r\n\r\n        if(kongsAndPungs.length === 0 && points === 0) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass NoChowsMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let chows = hand.getSetsOfType(h.Chow).length;\r\n        let pungs = hand.getSetsOfType(h.Pung).length;\r\n        let kongs = hand.getSetsOfType(h.Kong).length;\r\n\r\n        if(chows === 0 && (pungs + kongs) > 0) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass HalfColorMultiplier extends MultiplierRule {\r\n\r\n    getMultipliers(hand, round, player) {\r\n        let charTiles = hand.getTilesOfType(h.SuitTile).filter(tile => tile.suit === h.Suits.CHARACTER);\r\n        let bambooTiles = hand.getTilesOfType(h.SuitTile).filter(tile => tile.suit === h.Suits.BAMBOO);\r\n        let circleTiles = hand.getTilesOfType(h.SuitTile).filter(tile => tile.suit === h.Suits.CIRCLE);\r\n\r\n        let hasCharTiles = charTiles.length > 0;\r\n        let hasBambooTiles = bambooTiles.length > 0;\r\n        let hasCircleTiles = circleTiles.length > 0;\r\n\r\n        if(hasCharTiles + hasBambooTiles + hasCircleTiles === 1) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass OnlyHonourTilesMultiplier extends MultiplierRule {\r\n    /**\r\n     * @param {Hand} hand\r\n     * @param {Round} round\r\n     * @param {Player} player\r\n     */\r\n    getMultipliers(hand, round, player) {\r\n        let importantTiles = hand.tiles.filter(t => !(t instanceof BonusTile));\r\n\r\n        if(importantTiles.length === 0) {\r\n            return 0;\r\n        }\r\n\r\n        let tiles = importantTiles.filter(t => !t.isHonour);\r\n\r\n        if(tiles.length === 0) {\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nclass NoHonourSameSuitTiles extends HalfColorMultiplier {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @param {Hand} hand\r\n     * @param {Round} round\r\n     * @param {Player} player\r\n     */\r\n    getMultipliers(hand, round, player) {\r\n        let isHalfColor = super.getMultipliers(hand, round, player);\r\n\r\n        if(!isHalfColor) {\r\n            return 0;\r\n        }\r\n\r\n        let importantTiles = hand.tiles.filter(t => !(t instanceof BonusTile));\r\n\r\n        if(importantTiles.length === 0) {\r\n            return 0;\r\n        }\r\n\r\n        if(importantTiles.filter(t => t.isHonour).length > 0) {\r\n            return 0;\r\n        }\r\n\r\n        return 2;\r\n    }\r\n}\r\n\r\n//#endregion\r\n\r\n// module.exports = {ScoreCalculator};\r\nexport {ScoreCalculator};","\r\n\r\nclass EventEmitter {\r\n    constructor() {\r\n        this._listeners = [];\r\n    }\r\n\r\n    addListener(callback) {\r\n        this._listeners.push(callback);\r\n    }\r\n\r\n    emit(...args) {\r\n        this._listeners.forEach((callback) => {\r\n            callback(...args);\r\n        })\r\n    }\r\n}\r\n\r\nexport {EventEmitter}","import {EventEmitter} from \"../utils\";\r\nimport {domLoader} from \"./templates\";\r\nimport {dependencies} from \"needlepoint\";\r\nimport {GamePanel} from \"./gamePanel\";\r\nimport {renderTile} from \"./utils\";\r\n\r\n\r\n@dependencies(domLoader('gameBalance'))\r\nexport class GameBalanceTableView extends GamePanel{\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     */\r\n    constructor(template) {\r\n        super(template.getRoot());\r\n\r\n        this.template = template;\r\n        this.table = this.root.querySelector('table');\r\n        this.tbody = this.table.querySelector('tbody');\r\n\r\n        this.onHandEditClick = new EventEmitter();\r\n        this.addRoundEvent = new EventEmitter();\r\n        this.returnToGameListEvent = new EventEmitter();\r\n\r\n        this.root.querySelector('[data-action=\"addRound\"]').addEventListener('click', () => {\r\n            this.addRoundEvent.emit();\r\n        });\r\n\r\n        this.root.querySelector('a').addEventListener('click', e => {\r\n            e.preventDefault();\r\n            this.returnToGameListEvent.emit();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @param {Game} game\r\n     */\r\n    renderGameBalance(game) {\r\n        this.template.fillSlots({\r\n            player1Name: game.players[0].name,\r\n            player2Name: game.players[1].name,\r\n            player3Name: game.players[2].name,\r\n            player4Name: game.players[3].name,\r\n        });\r\n\r\n        this.template.clearSlot('rows');\r\n\r\n        game.rounds.forEach(round => {\r\n            let balance = round.getRoundBalance();\r\n            let cumulativeBalance = game.getTotalBalance(round.roundIndex);\r\n\r\n            let row = this.template.create('row');\r\n            this.template.appendToSlot('rows', row);\r\n\r\n            row.fillSlots({\r\n                player1RoundBalance: balance[0],\r\n                player2RoundBalance: balance[1],\r\n                player3RoundBalance: balance[2],\r\n                player4RoundBalance: balance[3],\r\n                player1CumulativeBalance: cumulativeBalance[0],\r\n                player2CumulativeBalance: cumulativeBalance[1],\r\n                player3CumulativeBalance: cumulativeBalance[2],\r\n                player4CumulativeBalance: cumulativeBalance[3],\r\n                roundNumber: round.roundNumber,\r\n                windIndicator: renderTile(round.windIndicator)\r\n            });\r\n\r\n            Array.from(row.getRoot().querySelectorAll('[data-action=\"handEdit\"]')).forEach((elem, playerIndex) => {\r\n                if(round.winner && round.winner.seatNumber === playerIndex) {\r\n                    elem.classList.add('winner');\r\n                }\r\n\r\n                elem.addEventListener('click', () => {\r\n                    this.onHandEditClick.emit({\r\n                            round: round,\r\n                            player: game.players[playerIndex],\r\n                        });\r\n                });\r\n            })\r\n        });\r\n    }\r\n}","\r\n\r\nexport class GamePanel {\r\n    constructor(root) {\r\n        this.root = root;\r\n\r\n        this.root.classList.add('gamePanel');\r\n    }\r\n\r\n    getRoot() {\r\n        return this.root;\r\n    }\r\n\r\n    show() {\r\n        this.root.classList.remove('hidden');\r\n    }\r\n\r\n    hide() {\r\n        this.root.classList.add('hidden');\r\n    }\r\n}","import {EventEmitter} from \"../utils\";\r\nimport {domLoader} from \"./templates\";\r\nimport {dependencies} from \"needlepoint\";\r\nimport {GamePanel} from \"./gamePanel\";\r\n\r\n\r\n@dependencies(domLoader('gamesList'))\r\nexport class GamesListView extends GamePanel{\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     */\r\n    constructor(template) {\r\n        super(template.getRoot());\r\n\r\n        this.template = template;\r\n\r\n        this.gameSelectedEvent = new EventEmitter();\r\n        this.newGameEvent = new EventEmitter();\r\n\r\n        this.root.querySelector('button').addEventListener('click', () => {\r\n            this.newGameEvent.emit();\r\n        })\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {Array<Game>} gamesList\r\n     */\r\n    loadGames(gamesList) {\r\n        this.template.clearSlot('games');\r\n\r\n        gamesList.forEach(game => {\r\n\r\n            let balance = game.getTotalBalance();\r\n\r\n            let gameRow = this.template.create('gameRow');\r\n            gameRow.fillSlots({\r\n                roundNumber: game.rounds.length,\r\n                player1Name: game.players[0].name,\r\n                player2Name: game.players[1].name,\r\n                player3Name: game.players[2].name,\r\n                player4Name: game.players[3].name,\r\n                player1Score: balance[0],\r\n                player2Score: balance[1],\r\n                player3Score: balance[2],\r\n                player4Score: balance[3],\r\n            });\r\n\r\n            this.template.appendToSlot('games', gameRow);\r\n\r\n            gameRow.getRoot().addEventListener('click', () => {\r\n                this.gameSelectedEvent.emit(game);\r\n            })\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @param {Game} game\r\n     */\r\n    _getGameLabel(game) {\r\n        let balance = game.getTotalBalance();\r\n\r\n        return `Runda ${game.rounds.length}: \r\n            ${game.players[0].name} (${balance[0]}), \r\n            ${game.players[1].name} (${balance[1]}), \r\n            ${game.players[2].name} (${balance[2]}), \r\n            ${game.players[3].name} (${balance[3]})`.replace(/\\s+/g, ' ');\r\n    }\r\n}","import {Suits, Pung, Kong, Chow, Pair, TileGroups, FreeTiles} from \"../hand.js\";\r\nimport {EventEmitter} from \"../utils.js\";\r\nimport {domLoader} from \"./templates.js\";\r\n\r\nimport {dependencies} from 'needlepoint';\r\nimport {GamePanel} from \"./gamePanel\";\r\nimport {renderTile} from \"./utils\";\r\n\r\n@dependencies(domLoader('hand'))\r\nclass HandCreatorView extends GamePanel{\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     */\r\n    constructor(template) {\r\n        super(template.getRoot());\r\n\r\n        this.onEditFinish = new EventEmitter();\r\n\r\n        this.allTiles = [];\r\n        this.addedSets = [];\r\n\r\n        this.suitGroups = this.root.querySelector('.suitGroups');\r\n        this.handContents = this.root.querySelector('.handContent');\r\n        this.handScoreRules = this.root.querySelector('.handScoreRules');\r\n\r\n        this.form = this.root.querySelector('form');\r\n\r\n        this.handRevealedInput = this.form.elements['revealed'];\r\n        this.specialSetInput = this.form.elements['specialSet'];\r\n        this.isWinnerInput = this.form.elements['isWinner'];\r\n        this.lastTileFromWallInput = this.form.elements['lastTileFromWall'];\r\n        this.lastAvailableTileInput = this.form.elements['lastAvailableTile'];\r\n        this.lastTileSpecialInput = this.form.elements['lastTileSpecial'];\r\n\r\n        this.playerNameSlot = this.root.querySelector('[data-slot=\"playerName\"]');\r\n        this.roundNumberSlot = this.root.querySelector('[data-slot=\"roundNumber\"]');\r\n\r\n        this.btnFinishHand = this.root.querySelector('[data-action=\"finishHand\"]');\r\n\r\n        this.btnAddPair = this.root.querySelector('[data-action=\"addPair\"]');\r\n        this.btnAddChow = this.root.querySelector('[data-action=\"addChow\"]');\r\n        this.btnAddPung = this.root.querySelector('[data-action=\"addPung\"]');\r\n        this.btnAddKong = this.root.querySelector('[data-action=\"addKong\"]');\r\n        this.btnAddTiles = this.root.querySelector('[data-action=\"addTiles\"]');\r\n\r\n        this.root.addEventListener('submit', e => e.preventDefault());\r\n\r\n        this.btnAddChow.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length !== 3) {\r\n                    return null;\r\n                }\r\n                return new Chow(this.getHandRevealedValue(), ...tiles)\r\n            })\r\n        });\r\n\r\n        this.btnAddPung.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length !== 1) {\r\n                    return null\r\n                }\r\n                return new Pung(this.getHandRevealedValue(), tiles[0])\r\n            })\r\n        });\r\n\r\n        this.btnAddKong.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length !== 1) {\r\n                    return null\r\n                }\r\n                return new Kong(this.getHandRevealedValue(), tiles[0])\r\n            })\r\n        });\r\n\r\n        this.btnAddPair.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length !== 1) {\r\n                    return null\r\n                }\r\n                return new Pair(tiles[0])\r\n            })\r\n        });\r\n\r\n        this.btnAddTiles.addEventListener('click', () => {\r\n            this.onNewSetClicked(tiles => {\r\n                if(tiles.length < 1) {\r\n                    return null\r\n                }\r\n                return new FreeTiles(tiles)\r\n            })\r\n        });\r\n\r\n        this.btnFinishHand.addEventListener('click', () => {\r\n            let tilesets = this.addedSets.map(s => s.tileset);\r\n            this.onEditFinish.emit({\r\n                round: this.currentEdit.round,\r\n                player: this.currentEdit.player,\r\n                tilesets: tilesets,\r\n                isWinner: this.isWinnerInput.checked,\r\n                lastTileFromWall: this.lastTileFromWallInput.checked,\r\n                lastAvailableTile: this.lastAvailableTileInput.checked,\r\n                lastTileSpecial: this.lastTileSpecialInput.checked,\r\n                specialSet: this.specialSetInput.value,\r\n            });\r\n        });\r\n    }\r\n\r\n    initUI() {\r\n        [Suits.BAMBOO, Suits.CIRCLE, Suits.CHARACTER, Suits.WIND, Suits.DRAGON, Suits.BONUS].forEach(suitType => {\r\n            let group = this.renderTileGroup(TileGroups[suitType]);\r\n\r\n            this.suitGroups.appendChild(group);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @param {Round} round\r\n     * @param {Player} player\r\n     */\r\n    showHand(round, player) {\r\n        this.addedSets = [];\r\n\r\n        this.refreshHandContent();\r\n\r\n        /**\r\n         * @type {Hand}\r\n         */\r\n        let hand = round.getHand(player).hand;\r\n\r\n        this.isWinnerInput.checked = false;\r\n        this.lastTileFromWallInput.checked = false;\r\n        this.lastAvailableTileInput.checked = false;\r\n        this.lastTileSpecialInput.checked = false;\r\n        this.specialSetInput.value = '';\r\n        Array.from(this.specialSetInput).forEach(i => i.checked=false);\r\n\r\n        if(hand) {\r\n            hand.sets.forEach(s => this.renderNewTileset(s));\r\n\r\n            if(round.winner === player) {\r\n                this.isWinnerInput.checked = true;\r\n\r\n                this.lastTileFromWallInput.checked = round.lastTileFromWall;\r\n                this.lastAvailableTileInput.checked = round.lastAvailableTile;\r\n                this.lastTileSpecialInput.checked = round.lastTileSpecial;\r\n            }\r\n\r\n            if(hand.specialSet) {\r\n                this.specialSetInput.value = hand.specialSet;\r\n            }\r\n\r\n            let score = round.scoreCalculator.calculateExtendedScore(round, player);\r\n\r\n            this.renderScoreRules(score);\r\n        }\r\n\r\n        this.roundNumberSlot.textContent = round.roundNumber;\r\n        this.playerNameSlot.textContent = player.name;\r\n\r\n        this.currentEdit = {\r\n            player: player,\r\n            round: round,\r\n        }\r\n    }\r\n\r\n    renderScoreRules(score) {\r\n        while(this.handScoreRules.firstChild) {\r\n            this.handScoreRules.removeChild(this.handScoreRules.firstChild);\r\n        }\r\n\r\n        let rules = [].concat(\r\n            ...score.points.map(rule => `${rule.rule.constructor.name}: +${rule.amount}`),\r\n            ...score.multipliers.map(rule => `${rule.rule.constructor.name}: x${rule.amount}`)\r\n        );\r\n\r\n        rules.forEach(ruleStr => {\r\n            let ruleNode = this.handScoreRules.appendChild(document.createElement('div'));\r\n            ruleNode.textContent = ruleStr;\r\n        })\r\n\r\n    }\r\n\r\n    renderTileGroup(tiles) {\r\n        let result = document.createElement('ul');\r\n\r\n        tiles.forEach(tile => {\r\n            let tileView = new HandCreatorTileView(tile);\r\n            this.allTiles.push(tileView);\r\n            result.appendChild(tileView.view);\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    onNewSetClicked(callback) {\r\n        let tiles = this.allTiles.filter(t => t.selected).map(t => t.tile);\r\n\r\n        let newSet = callback(tiles);\r\n\r\n        if(newSet !== null) {\r\n            this.renderNewTileset(newSet);\r\n        }\r\n\r\n        this.allTiles.forEach(t => t.resetSelected());\r\n    }\r\n\r\n    renderNewTileset(tileset) {\r\n        let view = this.renderNewTiles(tileset, tileset.tiles, tileset.isRevealed);\r\n\r\n        view.onRemove.addListener(() => {\r\n            this.addedSets.splice(this.addedSets.indexOf(view), 1);\r\n            this.refreshHandContent();\r\n        });\r\n\r\n\r\n        this.addedSets.push(view);\r\n    }\r\n\r\n    renderNewTiles(tileset, tiles, revealed) {\r\n        let view = new HandAddedTilesView(tileset, tiles, revealed || false);\r\n\r\n        this.handContents.appendChild(view.view);\r\n\r\n        return view;\r\n    }\r\n\r\n    refreshHandContent() {\r\n        while(this.handContents.firstChild) {\r\n            this.handContents.removeChild(this.handContents.firstChild);\r\n        }\r\n\r\n        this.addedSets.forEach(setView => {\r\n            this.handContents.appendChild(setView.view);\r\n        })\r\n    }\r\n\r\n    getHandRevealedValue() {\r\n        return !!this.handRevealedInput.value;\r\n    }\r\n}\r\n\r\n\r\nclass HandCreatorTileView {\r\n    constructor(tile) {\r\n        this.tile = tile;\r\n        this.selected = false;\r\n        this.view = document.createElement('li');\r\n        this.view.appendChild(renderTile(tile));\r\n\r\n        this.view.addEventListener('click', () => {\r\n            this.selected = !this.selected;\r\n\r\n            this.view.classList.toggle('selected', this.selected);\r\n        })\r\n    }\r\n\r\n    resetSelected() {\r\n        this.selected = false;\r\n        this.view.classList.remove('selected');\r\n    }\r\n}\r\n\r\nclass HandAddedTilesView {\r\n    constructor(tileset, tiles, revealed) {\r\n        this.tiles = tiles;\r\n        this.tileset = tileset;\r\n\r\n        this.onRemove = new EventEmitter();\r\n        this.view = document.createElement('ul');\r\n\r\n        if(revealed) {\r\n            this.view.classList.add('revealedSet');\r\n        }\r\n\r\n        this.tiles.forEach(tile => {\r\n            let row = this.view.appendChild(document.createElement('li'));\r\n            row.appendChild(renderTile(tile));\r\n        });\r\n\r\n        let delButton = this.view.appendChild(document.createElement('li'));\r\n        delButton.classList.add('actionDelete');\r\n\r\n        delButton.appendChild(document.createTextNode('X'));\r\n        delButton.addEventListener('click', () => {\r\n            this.onRemove.emit();\r\n        })\r\n    }\r\n}\r\n\r\nexport {HandCreatorView}","import {EventEmitter} from \"../utils\";\r\nimport {domLoader} from \"./templates\";\r\nimport {dependencies} from \"needlepoint\";\r\nimport {GamePanel} from \"./gamePanel\";\r\nimport {Player} from \"../game\";\r\n\r\n\r\n@dependencies(domLoader('newGameForm'))\r\nexport class NewGameFormView extends GamePanel {\r\n\r\n    /**\r\n     * @param {DomTemplate} template\r\n     */\r\n    constructor(template) {\r\n        super(template.getRoot());\r\n\r\n        this.newGameCreateEvent = new EventEmitter();\r\n        this.cancelEvent = new EventEmitter();\r\n\r\n        this.form = this.root.querySelector('form');\r\n        this.inputs = Array.from(this.form.querySelectorAll('input'));\r\n\r\n        this.form.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n            this.newGameCreateEvent.emit(this._getPlayers());\r\n        });\r\n\r\n        this.form.elements.cancel.addEventListener('click', e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            this.cancelEvent.emit();\r\n        });\r\n    }\r\n\r\n    show() {\r\n        super.show();\r\n\r\n        this.inputs.forEach(input => input.value = '');\r\n    }\r\n\r\n    _getPlayers() {\r\n        return [\r\n            new Player(0, this.form.elements.player1Name.value),\r\n            new Player(1, this.form.elements.player2Name.value),\r\n            new Player(2, this.form.elements.player3Name.value),\r\n            new Player(3, this.form.elements.player4Name.value),\r\n        ]\r\n    }\r\n}","import {dependencies, singleton, container} from 'needlepoint';\r\n\r\nexport function domLoader(name) {\r\n    return function() {\r\n        let tmpl = container.resolve(TemplateContainer);\r\n        return tmpl.create(name);\r\n    }\r\n}\r\n\r\n@singleton\r\nexport class TemplateContainer {\r\n    constructor() {\r\n        this._templates = {};\r\n    }\r\n\r\n    /**\r\n     * @return {DomTemplate}\r\n     */\r\n    create(name) {\r\n        let tmpl = this._templates[name];\r\n        return new DomTemplate(document.importNode(tmpl.content, true));\r\n    }\r\n\r\n    /**\r\n     * @param {HTMLElement} domTree\r\n     */\r\n    discover(domTree) {\r\n        Array.from(domTree.querySelectorAll('template')).forEach(tmplNode => {\r\n            this._templates[tmplNode.dataset.name] = tmplNode;\r\n        });\r\n    }\r\n\r\n    getTemplateNames() {\r\n        return Object.keys(this._templates);\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef {Object} TemplateSlot\r\n * @property {HTMLElement} node\r\n * @property {String} name\r\n */\r\n\r\n\r\nexport class DomTemplate extends TemplateContainer {\r\n    /**\r\n     *\r\n     * @param {HTMLElement} template\r\n     */\r\n    constructor(template) {\r\n        super();\r\n\r\n        this.template = template;\r\n        this.root = this.template.firstElementChild;\r\n\r\n        /**\r\n         * @type {Array<TemplateSlot>}\r\n         */\r\n        this._slots = this._findSlots(template);\r\n\r\n        this.discover(template);\r\n    }\r\n\r\n    _findSlots(element) {\r\n        return Array.from(element.querySelectorAll('[data-slot]')).map(slotNode => {\r\n            return {\r\n                node: slotNode,\r\n                name: slotNode.dataset.slot\r\n            }\r\n        })\r\n    }\r\n\r\n    _valueToNode(val) {\r\n        if(val instanceof DomTemplate) {\r\n            return val.template;\r\n        }\r\n        else if(typeof val === \"string\" || typeof val === \"number\") {\r\n            return document.createTextNode(''+val);\r\n        }\r\n        return val;\r\n    }\r\n\r\n    fillSlots(slotValues) {\r\n        this._slots.forEach(slot => {\r\n            if(slot.name in slotValues) {\r\n                slot.node.textContent = '';\r\n                slot.node.appendChild(this._valueToNode(slotValues[slot.name]));\r\n            }\r\n        })\r\n    }\r\n\r\n    fillSlot(name, val) {\r\n        this._slots.forEach(slot => {\r\n            if (slot.name === name) {\r\n                slot.node.textContent = '';\r\n                slot.node.appendChild(this._valueToNode(val));\r\n            }\r\n        })\r\n    }\r\n\r\n    clearSlot(name) {\r\n        this._slots.forEach(slot => {\r\n            if (slot.name === name) {\r\n                slot.node.textContent = '';\r\n            }\r\n        });\r\n    }\r\n\r\n    appendToSlot(name, value) {\r\n        this._slots.forEach(slot => {\r\n            if (slot.name === name) {\r\n                slot.node.appendChild(this._valueToNode(value));\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @return {HTMLElement}\r\n     */\r\n    getRoot() {\r\n        return this.root;\r\n    }\r\n}","/**\r\n *\r\n * @param {Tile} tile\r\n * @return {HTMLElement}\r\n */\r\nexport function renderTile(tile) {\r\n    let elem = document.createElement('i');\r\n    elem.classList.add('tile-icon');\r\n    elem.classList.add('icon-'+tile.toTypeString());\r\n    elem.setAttribute('data-tile', tile.toTypeString());\r\n    return elem;\r\n}","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @package needlepoint\n * @copyright 2015 Andrew Munsell <andrew@wizardapps.net>\n */\n\n// Currently initialized instances for singletons\nvar dependencies = new Map();\nvar singletons = new Map();\n\nvar Container = (function () {\n    function Container() {\n        _classCallCheck(this, Container);\n    }\n\n    _createClass(Container, null, [{\n        key: 'resolve',\n\n        /**\n         * Resolve a single class to an instance, injecting dependencies as needed\n         * @param  {class|string} clazz\n         * @return {object}       Instance of the class\n         */\n        value: function resolve(clazz) {\n            clazz = Container.normalizeClass(clazz);\n\n            // If the class being injected is a singleton, handle it separately\n            // since instances of it are cached.\n            if (singletons.has(clazz)) {\n                return Container.resolveSingleton(clazz);\n            } else {\n                return Container.resolveSingleInstance(clazz);\n            }\n        }\n\n        /**\n         * Resolve the specified classes, injecting dependencies as needed\n         * @param  {class|string} ...classes\n         * @return {...object}\n         */\n\n    }, {\n        key: 'resolveAll',\n        value: function resolveAll() {\n            for (var _len = arguments.length, classes = Array(_len), _key = 0; _key < _len; _key++) {\n                classes[_key] = arguments[_key];\n            }\n\n            return classes.map(Container.resolve);\n        }\n\n        /**\n         * Resolve a class into a singleton instance. This single instance will be\n         * used across the entire application.\n         * @param  {class|string} clazz\n         * @return {object}       Resolved instance of the class as a singleton\n         */\n\n    }, {\n        key: 'resolveSingleton',\n        value: function resolveSingleton(clazz) {\n            if (singletons.get(clazz) === null) {\n                singletons.set(clazz, Container.resolveSingleInstance(clazz));\n            }\n\n            return singletons.get(clazz);\n        }\n\n        /**\n         * Resolve a class into an instance with all of its dependencies injected.\n         * @param  {class|string} clazz\n         * @return {object}       Resolved instance of the class\n         */\n\n    }, {\n        key: 'resolveSingleInstance',\n        value: function resolveSingleInstance(clazz) {\n            // Check and see if there are any dependencies that need to be injected\n            var deps = Container.resolveAll.apply(Container, _toConsumableArray(dependencies.get(clazz) || []));\n\n            // Apply the dependencies and create a new instance of the class\n            return new (Function.prototype.bind.apply(clazz, [null].concat(_toConsumableArray(deps))))();\n        }\n\n        /**\n         * Resolve a dependency into its class.\n         * @param  {class|function|string} clazz\n         * @return {class}\n         */\n\n    }, {\n        key: 'normalizeClass',\n        value: function normalizeClass(clazz) {\n            if (typeof clazz == 'string') {\n                // TODO: Actually resolve the class from the string name that\n                // was provided to us.\n            } else if (typeof clazz == 'function') {\n                    return clazz;\n                } else {\n                    throw new Error('Unable to resolve the dependency name to the class.');\n                }\n        }\n\n        /**\n         * Register an instance as a singleton for the specified class\n         * @param  {class|string} clazz\n         * @param  {object} instance\n         */\n\n    }, {\n        key: 'registerInstance',\n        value: function registerInstance(clazz, instance) {\n            if ((typeof instance === 'undefined' ? 'undefined' : _typeof(instance)) != 'object' && typeof instance != 'function') {\n                throw new Error('The argument passed was an invalid type.');\n            }\n\n            clazz = Container.normalizeClass(clazz);\n\n            singletons.set(clazz, instance);\n        }\n\n        /**\n         * Register the list of dependencies required for the specified class.\n         * @param  {class} clazz        Class to register dependencies for\n         * @param  {array} dependencies Array of dependencies for the class\n         */\n\n    }, {\n        key: 'registerDependencies',\n        value: function registerDependencies(clazz, deps) {\n            dependencies.set(clazz, deps);\n        }\n\n        /**\n         * Register the specified class as a singleton, meaning only a single\n         * instance of it will be created for the entire application.\n         * @param  {class} clazz\n         */\n\n    }, {\n        key: 'registerAsSingleton',\n        value: function registerAsSingleton(clazz) {\n            if (!singletons.has(clazz)) {\n                singletons.set(clazz, null);\n            }\n        }\n    }]);\n\n    return Container;\n})();\n\nexports.default = Container;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = dependencies;\n\nvar _container = require('./container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction dependencies() {\n    for (var _len = arguments.length, deps = Array(_len), _key = 0; _key < _len; _key++) {\n        deps[_key] = arguments[_key];\n    }\n\n    return function decorator(Clazz) {\n        _container2.default.registerDependencies(Clazz, deps);\n    };\n} /**\n   * @package needlepoint\n   * @copyright 2015 Andrew Munsell <andrew@wizardapps.net>\n   */","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _container = require('./container');\n\nObject.defineProperty(exports, 'container', {\n  enumerable: true,\n  get: function get() {\n    return _container.default;\n  }\n});\n\nvar _singleton = require('./singleton');\n\nObject.defineProperty(exports, 'singleton', {\n  enumerable: true,\n  get: function get() {\n    return _singleton.default;\n  }\n});\n\nvar _dependencies = require('./dependencies');\n\nObject.defineProperty(exports, 'dependencies', {\n  enumerable: true,\n  get: function get() {\n    return _dependencies.default;\n  }\n});","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = singleton;\n\nvar _container = require('./container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction singleton(Clazz) {\n  _container2.default.registerAsSingleton(Clazz);\n} /**\n   * @package needlepoint\n   * @copyright 2015 Andrew Munsell <andrew@wizardapps.net>\n   */"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9hcHAuanMiLCJqcy9kYi5qcyIsImpzL2dhbWUuanMiLCJqcy9oYW5kLmpzIiwianMvaW5pdC5qcyIsImpzL3Njb3JpbmcuanMiLCJqcy91dGlscy5qcyIsImpzL3ZpZXcvZ2FtZUJhbGFuY2UuanMiLCJqcy92aWV3L2dhbWVQYW5lbC5qcyIsImpzL3ZpZXcvZ2FtZXNMaXN0LmpzIiwianMvdmlldy9oYW5kQ3JlYXRvci5qcyIsImpzL3ZpZXcvbmV3R2FtZUZvcm0uanMiLCJqcy92aWV3L3RlbXBsYXRlcy5qcyIsImpzL3ZpZXcvdXRpbHMuanMiLCJub2RlX21vZHVsZXMvbmVlZGxlcG9pbnQvZGlzdC9jb250YWluZXIuanMiLCJub2RlX21vZHVsZXMvbmVlZGxlcG9pbnQvZGlzdC9kZXBlbmRlbmNpZXMuanMiLCJub2RlX21vZHVsZXMvbmVlZGxlcG9pbnQvZGlzdC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9uZWVkbGVwb2ludC9kaXN0L3NpbmdsZXRvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0FDQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQUdBOzs7Ozs7Ozs7Ozs7QUFZQTs7Ozs7O0lBUWEsUyxXQUFBLFMsV0FEWiwrQkFBYSwwQkFBVSxLQUFWLENBQWIsRUFBK0IsNEJBQS9CLEVBQWdELGlDQUFoRCxFQUFzRSx3QkFBdEUsRUFBcUYsNEJBQXJGLEM7O0FBR0c7Ozs7Ozs7QUFPQSx1QkFBWSxRQUFaLEVBQXNCLFdBQXRCLEVBQW1DLFdBQW5DLEVBQWdELFFBQWhELEVBQTBELFdBQTFELEVBQXVFO0FBQUE7O0FBQUE7O0FBQ25FLGFBQUssSUFBTCxHQUFZLFNBQVMsT0FBVCxFQUFaOztBQUVBLGFBQUssV0FBTCxHQUFtQixXQUFuQjtBQUNBLGFBQUssWUFBTCxHQUFvQixXQUFw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O0FBQ0EsV0FBTyxJQUFQO0FBQ0g7OztBQ1hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiXHJcbmltcG9ydCB7SGFuZH0gZnJvbSAnLi9oYW5kLmpzJztcclxuaW1wb3J0IHtQbGF5ZXIsIEdhbWV9IGZyb20gJy4vZ2FtZS5qcyc7XHJcbmltcG9ydCB7SGFuZENyZWF0b3JWaWV3fSBmcm9tIFwiLi92aWV3L2hhbmRDcmVhdG9yLmpzXCI7XHJcbmltcG9ydCB7R2FtZUJhbGFuY2VUYWJsZVZpZXd9IGZyb20gXCIuL3ZpZXcvZ2FtZUJhbGFuY2VcIjtcclxuXHJcbmltcG9ydCB7ZGVwZW5kZW5jaWVzfSBmcm9tICduZWVkbGVwb2ludCc7XHJcbmltcG9ydCB7ZG9tTG9hZGVyfSBmcm9tIFwiLi92aWV3L3RlbXBsYXRlc1wiO1xyXG5pbXBvcnQge0dhbWVzTGlzdFZpZXd9IGZyb20gXCIuL3ZpZXcvZ2FtZXNMaXN0XCI7XHJcbmltcG9ydCB7TmV3R2FtZUZvcm1WaWV3fSBmcm9tIFwiLi92aWV3L25ld0dhbWVGb3JtXCI7XHJcbmltcG9ydCB7TWFoam9uZ0RhdGFiYXNlfSBmcm9tIFwiLi9kYlwiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPbkVkaXRGaW5pc2hFdmVudFxyXG4gKiBAcHJvcGVydHkge1JvdW5kfSByb3VuZFxyXG4gKiBAcHJvcGVydHkge1BsYXllcn0gcGxheWVyXHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8VGlsZVNldD59IHRpbGVzZXRzXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaXNXaW5uZXJcclxuICogQHByb3BlcnR5IHtib29sZWFufSBsYXN0VGlsZUZyb21XYWxsXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gbGFzdEF2YWlsYWJsZVRpbGVcclxuICogQHByb3BlcnR5IHtib29sZWFufSBsYXN0VGlsZVNwZWNpYWxcclxuICogQHByb3BlcnR5IHtTdHJpbmd9IHNwZWNpYWxTZXRcclxuICovXHJcblxyXG4vKipcclxuICogQHR5cGVkZWYge09iamVjdH0gT25IYW5kRWRpdEV2ZW50XHJcbiAqIEBwcm9wZXJ0eSB7Um91bmR9IHJvdW5kXHJcbiAqIEBwcm9wZXJ0eSB7UGxheWVyfSBwbGF5ZXJcclxuICovXHJcblxyXG5cclxuQGRlcGVuZGVuY2llcyhkb21Mb2FkZXIoJ2FwcCcpLCBIYW5kQ3JlYXRvclZpZXcsIEdhbWVCYWxhbmNlVGFibGVWaWV3LCBHYW1lc0xpc3RWaWV3LCBOZXdHYW1lRm9ybVZpZXcpXHJcbmV4cG9ydCBjbGFzcyBNYWluQXBwVUkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtEb21UZW1wbGF0ZX0gdGVtcGxhdGVcclxuICAgICAqIEBwYXJhbSB7SGFuZENyZWF0b3JWaWV3fSBoYW5kQ3JlYXRvclxyXG4gICAgICogQHBhcmFtIHtHYW1lQmFsYW5jZVRhYmxlVmlld30gYmFsYW5jZVZpZXdcclxuICAgICAqIEBwYXJhbSB7R2FtZXNMaXN0Vmlld30gZ2FtZUxpc3RcclxuICAgICAqIEBwYXJhbSB7TmV3R2FtZUZvcm1WaWV3fSBuZXdHYW1lRm9ybVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSwgaGFuZENyZWF0b3IsIGJhbGFuY2VWaWV3LCBnYW1lTGlzdCwgbmV3R2FtZUZvcm0pIHtcclxuICAgICAgICB0aGlzLnJvb3QgPSB0ZW1wbGF0ZS5nZXRSb290KCk7XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZENyZWF0b3IgPSBoYW5kQ3JlYXRvcjtcclxuICAgICAgICB0aGlzLmJhbGFuY2VUYWJsZSA9IGJhbGFuY2VWaWV3O1xyXG4gICAgICAgIHRoaXMuZ2FtZUxpc3QgPSBnYW1lTGlzdDtcclxuICAgICAgICB0aGlzLm5ld0dhbWVGb3JtID0gbmV3R2FtZUZvcm07XHJcblxyXG4gICAgICAgIHRoaXMucGFuZWxzID0gW3RoaXMuaGFuZENyZWF0b3IsIHRoaXMuYmFsYW5jZVRhYmxlLCB0aGlzLmdhbWVMaXN0LCB0aGlzLm5ld0dhbWVGb3JtXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB0eXBlIHtHYW1lUGFuZWx9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5hY3RpdmVQYW5lbCA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMucGFuZWxzLmZvckVhY2gocGFuZWwgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJvb3QuYXBwZW5kQ2hpbGQocGFuZWwuZ2V0Um9vdCgpKTtcclxuICAgICAgICAgICAgcGFuZWwuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmhhbmRDcmVhdG9yLmluaXRVSSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dQYW5lbChwYW5lbCkge1xyXG4gICAgICAgIGlmKHRoaXMuYWN0aXZlUGFuZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVQYW5lbC5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFjdGl2ZVBhbmVsID0gcGFuZWw7XHJcblxyXG4gICAgICAgIHRoaXMuYWN0aXZlUGFuZWwuc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdW50KHBhcmVudCkge1xyXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLnJvb3QpO1xyXG4gICAgfVxyXG59XHJcblxyXG5AZGVwZW5kZW5jaWVzKE1haW5BcHBVSSwgTWFoam9uZ0RhdGFiYXNlKVxyXG5leHBvcnQgY2xhc3MgTWFoam9uZ0xpbEhlbHBlck1haW5WaWV3Q29udHJvbGxlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge01haW5BcHBVSX0gdmlld1xyXG4gICAgICogQHBhcmFtIHtNYWhqb25nRGF0YWJhc2V9IGRiXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHZpZXcsIGRiKSB7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgICAgICB0aGlzLmRiID0gZGI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtHYW1lfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY3VycmVudEdhbWUgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8R2FtZT59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5nYW1lcyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuZ2FtZUxpc3QuZ2FtZVNlbGVjdGVkRXZlbnQuYWRkTGlzdGVuZXIoZ2FtZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEdhbWUoZ2FtZSk7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5zaG93UGFuZWwodGhpcy52aWV3LmJhbGFuY2VUYWJsZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudmlldy5nYW1lTGlzdC5uZXdHYW1lRXZlbnQuYWRkTGlzdGVuZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuc2hvd1BhbmVsKHRoaXMudmlldy5uZXdHYW1lRm9ybSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3Lm5ld0dhbWVGb3JtLmNhbmNlbEV2ZW50LmFkZExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy52aWV3LnNob3dQYW5lbCh0aGlzLnZpZXcuZ2FtZUxpc3QpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudmlldy5uZXdHYW1lRm9ybS5uZXdHYW1lQ3JlYXRlRXZlbnQuYWRkTGlzdGVuZXIocGxheWVycyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTmV3R2FtZShwbGF5ZXJzKTtcclxuICAgICAgICAgICAgdGhpcy52aWV3LnNob3dQYW5lbCh0aGlzLnZpZXcuZ2FtZUxpc3QpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuYmFsYW5jZVRhYmxlLm9uSGFuZEVkaXRDbGljay5hZGRMaXN0ZW5lcigoLypPbkhhbmRFZGl0RXZlbnQqL2V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5oYW5kQ3JlYXRvci5zaG93SGFuZChldmVudC5yb3VuZCwgZXZlbnQucGxheWVyKTtcclxuICAgICAgICAgICAgdGhpcy52aWV3LnNob3dQYW5lbCh0aGlzLnZpZXcuaGFuZENyZWF0b3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuYmFsYW5jZVRhYmxlLmFkZFJvdW5kRXZlbnQuYWRkTGlzdGVuZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRHYW1lLmNyZWF0ZVJvdW5kKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuYmFsYW5jZVRhYmxlLnJlbmRlckdhbWVCYWxhbmNlKHRoaXMuY3VycmVudEdhbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuYmFsYW5jZVRhYmxlLnJldHVyblRvR2FtZUxpc3RFdmVudC5hZGRMaXN0ZW5lcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5nYW1lTGlzdC5sb2FkR2FtZXModGhpcy5nYW1lcyk7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5zaG93UGFuZWwodGhpcy52aWV3LmdhbWVMaXN0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3LmhhbmRDcmVhdG9yLm9uRWRpdEZpbmlzaC5hZGRMaXN0ZW5lcihldmVudCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlSGFuZEVkaXRGaW5pc2goZXZlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuc2hvd1BhbmVsKHRoaXMudmlldy5iYWxhbmNlVGFibGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRTdGF0ZShnYW1lcykge1xyXG4gICAgICAgIHRoaXMudmlldy5zaG93UGFuZWwodGhpcy52aWV3LmdhbWVMaXN0KTtcclxuXHJcbiAgICAgICAgdGhpcy5nYW1lcyA9IGdhbWVzO1xyXG4gICAgICAgIHRoaXMudmlldy5nYW1lTGlzdC5sb2FkR2FtZXModGhpcy5nYW1lcyk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZEdhbWUoZ2FtZSkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEdhbWUgPSBnYW1lO1xyXG4gICAgICAgIHRoaXMudmlldy5iYWxhbmNlVGFibGUucmVuZGVyR2FtZUJhbGFuY2UodGhpcy5jdXJyZW50R2FtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZCgpIHtcclxuICAgICAgICB0aGlzLmxvYWRTdGF0ZSh0aGlzLmRiLmxvYWQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZSgpIHtcclxuICAgICAgICB0aGlzLmRiLnNhdmUodGhpcy5nYW1lcyk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTmV3R2FtZShwbGF5ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lcy5wdXNoKG5ldyBHYW1lKC4uLnBsYXllcnMpKTtcclxuXHJcbiAgICAgICAgdGhpcy5zYXZlKCk7XHJcblxyXG4gICAgICAgIHRoaXMudmlldy5nYW1lTGlzdC5sb2FkR2FtZXModGhpcy5nYW1lcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge09uRWRpdEZpbmlzaEV2ZW50fSBldmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVIYW5kRWRpdEZpbmlzaChldmVudCkge1xyXG4gICAgICAgIGxldCBoYW5kID0gbmV3IEhhbmQoKTtcclxuICAgICAgICBldmVudC50aWxlc2V0cy5mb3JFYWNoKHNldCA9PiBoYW5kLmFkZFNldChzZXQpKTtcclxuXHJcbiAgICAgICAgaWYoZXZlbnQuc3BlY2lhbFNldCkge1xyXG4gICAgICAgICAgICBoYW5kLnNldFNwZWNpYWxTZXQoZXZlbnQuc3BlY2lhbFNldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBldmVudC5yb3VuZC5zZXRIYW5kKGV2ZW50LnBsYXllciwgaGFuZCk7XHJcbiAgICAgICAgaWYoZXZlbnQuaXNXaW5uZXIpIHtcclxuICAgICAgICAgICAgZXZlbnQucm91bmQuc2V0V2lubmVyKGV2ZW50LnBsYXllciwgZXZlbnQubGFzdEF2YWlsYWJsZVRpbGUsIGV2ZW50Lmxhc3RUaWxlRnJvbVdhbGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zYXZlKCk7XHJcblxyXG4gICAgICAgIHRoaXMudmlldy5iYWxhbmNlVGFibGUucmVuZGVyR2FtZUJhbGFuY2UodGhpcy5jdXJyZW50R2FtZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbmltcG9ydCB7ZGVwZW5kZW5jaWVzfSBmcm9tICduZWVkbGVwb2ludCc7XHJcbmltcG9ydCB7Q2hvdywgRnJlZVRpbGVzLCBIYW5kLCBLb25nLCBQYWlyLCBQdW5nLCBTcGVjaWFsU2V0cywgVGlsZXN9IGZyb20gXCIuL2hhbmRcIjtcclxuaW1wb3J0IHtHYW1lLCBQbGF5ZXJ9IGZyb20gXCIuL2dhbWVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBMb2NhbFN0b3JhZ2VEcml2ZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHtTdG9yYWdlfVxyXG4gICAgICovXHJcbiAgICBnZXREcml2ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lU2VyaWFsaXplciB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7R2FtZX0gZ2FtZVxyXG4gICAgICovXHJcbiAgICBzZXJpYWxpemUoZ2FtZSkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIHBsYXllcnM6IGdhbWUucGxheWVycy5tYXAocCA9PiB7cmV0dXJuIHtuYW1lOiBwLm5hbWUsIHNlYXROdW1iZXI6IHAuc2VhdE51bWJlcn19KSxcclxuICAgICAgICAgICAgcm91bmRzOiBnYW1lLnJvdW5kcy5tYXAocm91bmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5uZXI6IHJvdW5kLndpbm5lciA/IHJvdW5kLndpbm5lci5zZWF0TnVtYmVyIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0QXZhaWxhYmxlVGlsZTogcm91bmQubGFzdEF2YWlsYWJsZVRpbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFRpbGVGcm9tV2FsbDogcm91bmQubGFzdFRpbGVGcm9tV2FsbCxcclxuICAgICAgICAgICAgICAgICAgICBoYW5kczogcm91bmQuaGFuZHMubWFwKGhhbmQgPT4gaGFuZC5oYW5kID8gdGhpcy5fc2VyaWFsaXplSGFuZChoYW5kLmhhbmQpIDogbnVsbClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBkZXNlcmlhbGl6ZShnYW1lSnNvbikge1xyXG4gICAgICAgIGxldCBwbGF5ZXJzID0gZ2FtZUpzb24ucGxheWVycy5tYXAocGxheWVyRGF0YSA9PiBuZXcgUGxheWVyKHBsYXllckRhdGEuc2VhdE51bWJlciwgcGxheWVyRGF0YS5uYW1lKSk7XHJcblxyXG4gICAgICAgIGxldCBnYW1lID0gbmV3IEdhbWUoLi4ucGxheWVycyk7XHJcblxyXG4gICAgICAgIGdhbWVKc29uLnJvdW5kcy5mb3JFYWNoKHJvdW5kRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByb3VuZCA9IGdhbWUuY3JlYXRlUm91bmQoKTtcclxuXHJcbiAgICAgICAgICAgIHJvdW5kRGF0YS5oYW5kcy5mb3JFYWNoKChoYW5kRGF0YSwgcGxheWVySW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKGhhbmREYXRhID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBoYW5kID0gbmV3IEhhbmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAoaGFuZERhdGEuc2V0cyB8fCBoYW5kRGF0YSkuZm9yRWFjaChzZXREYXRhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kLmFkZFNldCh0aGlzLl9kZXNlcmlhbGl6ZVRpbGVzZXQoc2V0RGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoaGFuZERhdGEuc3BlY2lhbFNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmQuc2V0U3BlY2lhbFNldChTcGVjaWFsU2V0c1toYW5kRGF0YS5zcGVjaWFsU2V0XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcm91bmQuc2V0SGFuZChwbGF5ZXJzW3BsYXllckluZGV4XSwgaGFuZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYocm91bmREYXRhLndpbm5lciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcm91bmQuc2V0V2lubmVyKHBsYXllcnNbcm91bmREYXRhLndpbm5lcl0sIHJvdW5kRGF0YS5sYXN0QXZhaWxhYmxlVGlsZSwgcm91bmREYXRhLmxhc3RUaWxlRnJvbVdhbGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBnYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtIYW5kfSBoYW5kXHJcbiAgICAgKi9cclxuICAgIF9zZXJpYWxpemVIYW5kKGhhbmQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXRzOiBoYW5kLnNldHMubWFwKHRoaXMuX3NlcmlhbGl6ZVRpbGVzZXQsIHRoaXMpLFxyXG4gICAgICAgICAgICBzcGVjaWFsU2V0OiBoYW5kLnNwZWNpYWxTZXQsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7VGlsZVNldH0gdGlsZXNldFxyXG4gICAgICovXHJcbiAgICBfc2VyaWFsaXplVGlsZXNldCh0aWxlc2V0KSB7XHJcbiAgICAgICAgaWYodGlsZXNldCBpbnN0YW5jZW9mIEtvbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdrb25nJyxcclxuICAgICAgICAgICAgICAgIGlzUmV2ZWFsZWQ6IHRpbGVzZXQuaXNSZXZlYWxlZCxcclxuICAgICAgICAgICAgICAgIHRpbGU6IHRoaXMuX2dldFRpbGVDb2RlKHRpbGVzZXQuZ2V0VGlsZSgpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aWxlc2V0IGluc3RhbmNlb2YgUHVuZykge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3B1bmcnLFxyXG4gICAgICAgICAgICAgICAgaXNSZXZlYWxlZDogdGlsZXNldC5pc1JldmVhbGVkLFxyXG4gICAgICAgICAgICAgICAgdGlsZTogdGhpcy5fZ2V0VGlsZUNvZGUodGlsZXNldC5nZXRUaWxlKCkpLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aWxlc2V0IGluc3RhbmNlb2YgQ2hvdykge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2Nob3cnLFxyXG4gICAgICAgICAgICAgICAgaXNSZXZlYWxlZDogdGlsZXNldC5pc1JldmVhbGVkLFxyXG4gICAgICAgICAgICAgICAgdGlsZXM6IHRpbGVzZXQudGlsZXMubWFwKHRpbGUgPT4gdGhpcy5fZ2V0VGlsZUNvZGUodGlsZSkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRpbGVzZXQgaW5zdGFuY2VvZiBQYWlyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAncGFpcicsXHJcbiAgICAgICAgICAgICAgICB0aWxlOiB0aGlzLl9nZXRUaWxlQ29kZSh0aWxlc2V0LmdldFRpbGUoKSksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRpbGVzZXQgaW5zdGFuY2VvZiBGcmVlVGlsZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdmcmVlJyxcclxuICAgICAgICAgICAgICAgIHRpbGVzOiB0aWxlc2V0LnRpbGVzLm1hcCh0aWxlID0+IHRoaXMuX2dldFRpbGVDb2RlKHRpbGUpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtUaWxlfSB0aWxlXHJcbiAgICAgKi9cclxuICAgIF9nZXRUaWxlQ29kZSh0aWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKFRpbGVzKS5tYXAodGlsZUtleSA9PiB7XHJcbiAgICAgICAgICAgIGlmKFRpbGVzW3RpbGVLZXldLmVxdWFscyh0aWxlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbGVLZXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5maWx0ZXIoa2V5ID0+IGtleSlbMF07XHJcbiAgICB9XHJcblxyXG4gICAgX2Rlc2VyaWFsaXplVGlsZXNldChzZXREYXRhKSB7XHJcbiAgICAgICAgaWYoc2V0RGF0YS50eXBlID09PSAna29uZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBLb25nKHNldERhdGEuaXNSZXZlYWxlZCwgVGlsZXNbc2V0RGF0YS50aWxlXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihzZXREYXRhLnR5cGUgPT09ICdwdW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFB1bmcoc2V0RGF0YS5pc1JldmVhbGVkLCBUaWxlc1tzZXREYXRhLnRpbGVdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHNldERhdGEudHlwZSA9PT0gJ2Nob3cnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hvdyhzZXREYXRhLmlzUmV2ZWFsZWQsIFRpbGVzW3NldERhdGEudGlsZXNbMF1dLFxyXG4gICAgICAgICAgICAgICAgVGlsZXNbc2V0RGF0YS50aWxlc1sxXV0sIFRpbGVzW3NldERhdGEudGlsZXNbMl1dKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoc2V0RGF0YS50eXBlID09PSAncGFpcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYWlyKFRpbGVzW3NldERhdGEudGlsZV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoc2V0RGF0YS50eXBlID09PSAnZnJlZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGcmVlVGlsZXMoc2V0RGF0YS50aWxlcy5tYXAodGlsZSA9PiBUaWxlc1t0aWxlXSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbkBkZXBlbmRlbmNpZXMoTG9jYWxTdG9yYWdlRHJpdmVyLCBHYW1lU2VyaWFsaXplcilcclxuZXhwb3J0IGNsYXNzIE1haGpvbmdEYXRhYmFzZSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0xvY2FsU3RvcmFnZURyaXZlcn0gc3RvcmFnZVxyXG4gICAgICogQHBhcmFtIHtHYW1lU2VyaWFsaXplcn0gc2VyaWFsaXplclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihzdG9yYWdlLCBzZXJpYWxpemVyKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZS5nZXREcml2ZXIoKTtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3JhZ2VLZXkgPSAnbWFoam9uZ0dhbWVzJztcclxuICAgIH1cclxuXHJcbiAgICBsb2FkKCkge1xyXG4gICAgICAgIGxldCBnYW1lc1N0ciAgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXkpO1xyXG5cclxuICAgICAgICBsZXQgZ2FtZXMgPSBKU09OLnBhcnNlKGdhbWVzU3RyKTtcclxuXHJcbiAgICAgICAgaWYoZ2FtZXMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdhbWVzLm1hcCh0aGlzLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUsIHRoaXMuc2VyaWFsaXplcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZShnYW1lcykge1xyXG4gICAgICAgIGxldCBnYW1lc0FyciA9IGdhbWVzLm1hcCh0aGlzLnNlcmlhbGl6ZXIuc2VyaWFsaXplLCB0aGlzLnNlcmlhbGl6ZXIpO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KGdhbWVzQXJyKSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBoYW5kIGZyb20gJy4vaGFuZC5qcyc7XHJcbmltcG9ydCAqIGFzIHNjb3JlIGZyb20gJy4vc2NvcmluZy5qcyc7XHJcblxyXG5jbGFzcyBQbGF5ZXIge1xyXG4gICAgY29uc3RydWN0b3Ioc2VhdE51bWJlciwgbmFtZSkge1xyXG4gICAgICAgIHRoaXMuc2VhdE51bWJlciA9IHNlYXROdW1iZXI7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUm91bmQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PFBsYXllcj59IHBsYXllcnNcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3VuZEluZGV4XHJcbiAgICAgKiBAcGFyYW0ge0dhbWV9IGdhbWVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocGxheWVycywgcm91bmRJbmRleCwgZ2FtZSkge1xyXG4gICAgICAgIHRoaXMucm91bmROdW1iZXIgPSByb3VuZEluZGV4ICsgMTtcclxuICAgICAgICB0aGlzLnJvdW5kSW5kZXggPSByb3VuZEluZGV4O1xyXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XHJcblxyXG4gICAgICAgIHRoaXMuYmFsYW5jZUNhbGN1bGF0b3IgPSBuZXcgUm91bmRCYWxhbmNlQ2FsY3VsYXRvcigpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U2NvcmVDYWxjdWxhdG9yfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2NvcmVDYWxjdWxhdG9yID0gc2NvcmUuU2NvcmVDYWxjdWxhdG9yLmNyZWF0ZURlZmF1bHRTY29yZUNhbGN1bGF0b3IoKTtcclxuXHJcbiAgICAgICAgdGhpcy53aW5kUGhhc2UgPSBNYXRoLmZsb29yKHRoaXMucm91bmRJbmRleC80KTtcclxuICAgICAgICB0aGlzLndpbmRJbmRpY2F0b3IgPSBoYW5kLldpbmRPcmRlclt0aGlzLndpbmRQaGFzZSAlIDRdO1xyXG5cclxuICAgICAgICB0aGlzLmVhc3RXaW5kUGxheWVyID0gcGxheWVyc1t0aGlzLnJvdW5kSW5kZXggJSA0XTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1BsYXllcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLndpbm5lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sYXN0QXZhaWxhYmxlVGlsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGFzdFRpbGVGcm9tV2FsbCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGFzdFRpbGVTcGVjaWFsID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZHMgPSBbXHJcbiAgICAgICAgICAgIHtwbGF5ZXI6IHBsYXllcnNbMF0sIGhhbmQ6IG51bGx9LFxyXG4gICAgICAgICAgICB7cGxheWVyOiBwbGF5ZXJzWzFdLCBoYW5kOiBudWxsfSxcclxuICAgICAgICAgICAge3BsYXllcjogcGxheWVyc1syXSwgaGFuZDogbnVsbH0sXHJcbiAgICAgICAgICAgIHtwbGF5ZXI6IHBsYXllcnNbM10sIGhhbmQ6IG51bGx9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHRoaXMucGxheWVycyA9IHBsYXllcnM7XHJcbiAgICAgICAgdGhpcy5yb3VuZFNjb3JlcyA9IFswLCAwLCAwLCAwXTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRIYW5kKHBsYXllciwgaGFuZCkge1xyXG4gICAgICAgIHRoaXMuaGFuZHNbcGxheWVyLnNlYXROdW1iZXJdLmhhbmQgPSBoYW5kO1xyXG5cclxuICAgICAgICB0aGlzLnJvdW5kU2NvcmVzW3BsYXllci5zZWF0TnVtYmVyXSA9IHRoaXMuc2NvcmVDYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKHRoaXMsIHBsYXllcik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0V2lubmVyKHBsYXllciwgbGFzdEF2YWlsYWJsZVRpbGUsIGxhc3RUaWxlRnJvbVdhbGwsIGxhc3RUaWxlU3BlY2lhbCkge1xyXG4gICAgICAgIHRoaXMud2lubmVyID0gcGxheWVyO1xyXG4gICAgICAgIHRoaXMubGFzdEF2YWlsYWJsZVRpbGUgPSBsYXN0QXZhaWxhYmxlVGlsZSB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RUaWxlRnJvbVdhbGwgPSBsYXN0VGlsZUZyb21XYWxsIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGFzdFRpbGVTcGVjaWFsID0gbGFzdFRpbGVTcGVjaWFsIHx8IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXllcnMuZm9yRWFjaCgocGxheWVyLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJvdW5kU2NvcmVzW2luZGV4XSA9IHRoaXMuc2NvcmVDYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKHRoaXMsIHBsYXllcikgfHwgMDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRIYW5kKHBsYXllcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRzW3BsYXllci5zZWF0TnVtYmVyXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQbGF5ZXJXaW5kKHBsYXllcikge1xyXG4gICAgICAgIGxldCBwbGF5ZXJJbmRleCA9ICh0aGlzLndpbmRQaGFzZSArIHBsYXllci5zZWF0TnVtYmVyIC0gKHRoaXMucm91bmRJbmRleCArIHRoaXMud2luZFBoYXNlKSAlIDQpICUgNDtcclxuXHJcbiAgICAgICAgaWYocGxheWVySW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kLldpbmRPcmRlcltoYW5kLldpbmRPcmRlci5sZW5ndGggKyBwbGF5ZXJJbmRleF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGFuZC5XaW5kT3JkZXJbcGxheWVySW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJvdW5kQmFsYW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlQ2FsY3VsYXRvci5nZXRCYWxhbmNlKHRoaXMsIHRoaXMucGxheWVycywgdGhpcy5yb3VuZFNjb3Jlcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFJvdW5kQmFsYW5jZUNhbGN1bGF0b3Ige1xyXG4gICAgZ2V0QmFsYW5jZShyb3VuZCwgcGxheWVycywgc2NvcmVzKSB7XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQgPSBbMCwgMCwgMCwgMF07XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IGkrMTsgaiA8IHBsYXllcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBwMSA9IHBsYXllcnNbaV07XHJcbiAgICAgICAgICAgICAgICBsZXQgcDIgPSBwbGF5ZXJzW2pdO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzcmNJZHggPSBwMS5zZWF0TnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgbGV0IG90aGVySWR4ID0gcDIuc2VhdE51bWJlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IG11bHQgPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBkZWFsc1dpdGhFYXN0V2luZCA9IChwMSA9PT0gcm91bmQuZWFzdFdpbmRQbGF5ZXIgfHwgcDIgPT09IHJvdW5kLmVhc3RXaW5kUGxheWVyKTtcclxuICAgICAgICAgICAgICAgIGxldCBkZWFsc1dpdGhXaW5uZXIgPSAocDEgPT09IHJvdW5kLndpbm5lciB8fCBwMiA9PT0gcm91bmQud2lubmVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihkZWFsc1dpdGhFYXN0V2luZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG11bHQgPSAyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBnYWluZXIsIGxvc2VyO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGRlYWxzV2l0aFdpbm5lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhaW5lciA9IChwMSA9PT0gcm91bmQud2lubmVyKSA/IHAxIDogcDI7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9zZXIgPSAocDEgIT09IHJvdW5kLndpbm5lcikgPyBwMSA6IHAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29yZSA9IHNjb3Jlc1tnYWluZXIuc2VhdE51bWJlcl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBnYWluZXIgPSAoc2NvcmVzW3NyY0lkeF0gPj0gc2NvcmVzW290aGVySWR4XSkgPyBwMSA6IHAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvc2VyID0gKHNjb3Jlc1tzcmNJZHhdIDwgc2NvcmVzW290aGVySWR4XSkgPyBwMSA6IHAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29yZSA9IHNjb3Jlc1tnYWluZXIuc2VhdE51bWJlcl0gLSBzY29yZXNbbG9zZXIuc2VhdE51bWJlcl07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2dhaW5lci5zZWF0TnVtYmVyXSArPSBzY29yZSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbbG9zZXIuc2VhdE51bWJlcl0gLT0gc2NvcmUgKiBtdWx0O1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgR2FtZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwMSwgcDIsIHAzLCBwNCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxQbGF5ZXI+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IFtwMSwgcDIsIHAzLCBwNF07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxSb3VuZD59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yb3VuZHMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5yb3VuZExpbWl0ID0gMTAwMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4ge1JvdW5kfVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVSb3VuZCgpIHtcclxuICAgICAgICBsZXQgcm91bmQgPSBuZXcgUm91bmQodGhpcy5wbGF5ZXJzLCB0aGlzLnJvdW5kcy5sZW5ndGgsIHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLnJvdW5kcy5wdXNoKHJvdW5kKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJvdW5kO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRvdGFsQmFsYW5jZShtYXhSb3VuZE51bWJlcikge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBbMCwgMCwgMCwgMF07XHJcblxyXG4gICAgICAgIG1heFJvdW5kTnVtYmVyID0gKG1heFJvdW5kTnVtYmVyID09PSB1bmRlZmluZWQpID8gdGhpcy5yb3VuZHMubGVuZ3RoIDogbWF4Um91bmROdW1iZXI7XHJcblxyXG4gICAgICAgIHRoaXMucm91bmRzLnNsaWNlKDAsIG1heFJvdW5kTnVtYmVyKzEpLmZvckVhY2gocm91bmQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcm91bmRCYWxhbmNlID0gcm91bmQuZ2V0Um91bmRCYWxhbmNlKCk7XHJcblxyXG4gICAgICAgICAgICByZXN1bHRbMF0gKz0gcm91bmRCYWxhbmNlWzBdO1xyXG4gICAgICAgICAgICByZXN1bHRbMV0gKz0gcm91bmRCYWxhbmNlWzFdO1xyXG4gICAgICAgICAgICByZXN1bHRbMl0gKz0gcm91bmRCYWxhbmNlWzJdO1xyXG4gICAgICAgICAgICByZXN1bHRbM10gKz0gcm91bmRCYWxhbmNlWzNdO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IHtHYW1lLCBSb3VuZCwgUGxheWVyLCBSb3VuZEJhbGFuY2VDYWxjdWxhdG9yfTtcclxuZXhwb3J0IHtHYW1lLCBSb3VuZCwgUGxheWVyLCBSb3VuZEJhbGFuY2VDYWxjdWxhdG9yfTsiLCJcclxuXHJcbmNvbnN0IFN1aXRzID0ge1xyXG4gICAgQkFNQk9POiAnYmFtYm9vJyxcclxuICAgIENJUkNMRTogJ2NpcmNsZScsXHJcbiAgICBDSEFSQUNURVI6ICdjaGFyYWN0ZXInLFxyXG4gICAgRFJBR09OOiAnZHJhZ29uJyxcclxuICAgIFdJTkQ6ICd3aW5kJyxcclxuICAgIEJPTlVTOiAnYm9udXMnLFxyXG59O1xyXG5cclxuY29uc3QgRHJhZ29ucyA9IHtcclxuICAgIFJFRDogJ3JlZCcsXHJcbiAgICBHUkVFTjogJ2dyZWVuJyxcclxuICAgIFdISVRFOiAnd2hpdGUnLFxyXG59O1xyXG5cclxuY29uc3QgV2luZHMgPSB7XHJcbiAgICBFQVNUOiAnZWFzdCcsXHJcbiAgICBXRVNUOiAnd2VzdCcsXHJcbiAgICBOT1JUSDogJ25vcnRoJyxcclxuICAgIFNPVVRIOiAnc291dGgnLFxyXG59O1xyXG5cclxuY29uc3QgQm9udXMgPSB7XHJcbiAgICBGTE9XRVIxOiAnZmxvd2VyMScsXHJcbiAgICBGTE9XRVIyOiAnZmxvd2VyMicsXHJcbiAgICBGTE9XRVIzOiAnZmxvd2VyMycsXHJcbiAgICBGTE9XRVI0OiAnZmxvd2VyNCcsXHJcbiAgICBTVU1NRVI6ICdzdW1tZXInLFxyXG4gICAgU1BSSU5HOiAnc3ByaW5nJyxcclxuICAgIEFVVFVNTjogJ2F1dHVtbicsXHJcbiAgICBXSU5URVI6ICd3aW50ZXInLFxyXG59O1xyXG5cclxuY29uc3QgU3BlY2lhbFNldHMgPSB7XHJcbiAgICAnbWlub3InOiAnbWlub3InLFxyXG4gICAgJ21ham9yJzogJ21ham9yJyxcclxufTtcclxuXHJcblxyXG5jbGFzcyBUaWxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzU3VpdCwgaXNIb25vdXIpIHtcclxuICAgICAgICB0aGlzLmlzU3VpdCA9IGlzU3VpdDtcclxuICAgICAgICB0aGlzLmlzSG9ub3VyID0gaXNIb25vdXI7XHJcbiAgICB9XHJcblxyXG4gICAgZXF1YWxzKG90aGVyKSB7XHJcbiAgICAgICAgaWYodGhpcy5pc1N1aXQgIT09IG90aGVyLmlzU3VpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5pc0hvbm91ciA9PT0gb3RoZXIuaXNIb25vdXI7XHJcbiAgICB9XHJcblxyXG4gICAgdG9UeXBlU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBgW1RpbGUgJHt0aGlzfV1gO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBTdWl0VGlsZSBleHRlbmRzIFRpbGUge1xyXG4gICAgY29uc3RydWN0b3Ioc3VpdCwgbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIodHJ1ZSwgbnVtYmVyIDwgMiB8fCBudW1iZXIgPiA4KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWl0ID0gc3VpdDtcclxuICAgICAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYFtTdWl0VGlsZSAke3RoaXMuc3VpdH0ke3RoaXMubnVtYmVyfV1gXHJcbiAgICB9XHJcblxyXG4gICAgdG9UeXBlU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBgc3VpdC0ke3RoaXMuc3VpdH0tJHt0aGlzLm51bWJlcn1gO1xyXG4gICAgfVxyXG5cclxuICAgIGVxdWFscyhvdGhlcikge1xyXG4gICAgICAgIGlmKCFzdXBlci5lcXVhbHMob3RoZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuc3VpdCAhPT0gb3RoZXIuc3VpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5udW1iZXIgPT09IG90aGVyLm51bWJlcjtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRHJhZ29uVGlsZSBleHRlbmRzIFRpbGUge1xyXG4gICAgY29uc3RydWN0b3Ioa2luZCkge1xyXG4gICAgICAgIHN1cGVyKGZhbHNlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgdGhpcy5kcmFnb25LaW5kID0ga2luZDtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYFtEcmFnb25UaWxlICR7dGhpcy5kcmFnb25LaW5kfV1gXHJcbiAgICB9XHJcblxyXG4gICAgdG9UeXBlU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBgZHJhZ29uLSR7dGhpcy5kcmFnb25LaW5kfWA7XHJcbiAgICB9XHJcblxyXG4gICAgZXF1YWxzKG90aGVyKSB7XHJcbiAgICAgICAgaWYoIXN1cGVyLmVxdWFscyhvdGhlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZHJhZ29uS2luZCA9PT0gb3RoZXIuZHJhZ29uS2luZDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgV2luZFRpbGUgZXh0ZW5kcyBUaWxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGtpbmQpIHtcclxuICAgICAgICBzdXBlcihmYWxzZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMud2luZEtpbmQgPSBraW5kO1xyXG4gICAgfVxyXG5cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBgW1dpbmRUaWxlICR7dGhpcy53aW5kS2luZH1dYFxyXG4gICAgfVxyXG5cclxuICAgIHRvVHlwZVN0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYHdpbmQtJHt0aGlzLndpbmRLaW5kfWA7XHJcbiAgICB9XHJcblxyXG4gICAgZXF1YWxzKG90aGVyKSB7XHJcbiAgICAgICAgaWYoIXN1cGVyLmVxdWFscyhvdGhlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2luZEtpbmQgPT09IG90aGVyLndpbmRLaW5kO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBCb251c1RpbGUgZXh0ZW5kcyBUaWxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGtpbmQpIHtcclxuICAgICAgICBzdXBlcihmYWxzZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLmJvbnVzS2luZCA9IGtpbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgdG9UeXBlU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBgYm9udXMtJHt0aGlzLmJvbnVzS2luZH1gO1xyXG4gICAgfVxyXG5cclxuICAgIGVxdWFscyhvdGhlcikge1xyXG4gICAgICAgIGlmKCFzdXBlci5lcXVhbHMob3RoZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmJvbnVzS2luZCA9PT0gb3RoZXIuYm9udXNLaW5kO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBUaWxlcyA9IHtcclxuICAgIENpcmNsZTE6IG5ldyBTdWl0VGlsZShTdWl0cy5DSVJDTEUsIDEpLFxyXG4gICAgQ2lyY2xlMjogbmV3IFN1aXRUaWxlKFN1aXRzLkNJUkNMRSwgMiksXHJcbiAgICBDaXJjbGUzOiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0lSQ0xFLCAzKSxcclxuICAgIENpcmNsZTQ6IG5ldyBTdWl0VGlsZShTdWl0cy5DSVJDTEUsIDQpLFxyXG4gICAgQ2lyY2xlNTogbmV3IFN1aXRUaWxlKFN1aXRzLkNJUkNMRSwgNSksXHJcbiAgICBDaXJjbGU2OiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0lSQ0xFLCA2KSxcclxuICAgIENpcmNsZTc6IG5ldyBTdWl0VGlsZShTdWl0cy5DSVJDTEUsIDcpLFxyXG4gICAgQ2lyY2xlODogbmV3IFN1aXRUaWxlKFN1aXRzLkNJUkNMRSwgOCksXHJcbiAgICBDaXJjbGU5OiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0lSQ0xFLCA5KSxcclxuXHJcbiAgICBCYW1ib28xOiBuZXcgU3VpdFRpbGUoU3VpdHMuQkFNQk9PLCAxKSxcclxuICAgIEJhbWJvbzI6IG5ldyBTdWl0VGlsZShTdWl0cy5CQU1CT08sIDIpLFxyXG4gICAgQmFtYm9vMzogbmV3IFN1aXRUaWxlKFN1aXRzLkJBTUJPTywgMyksXHJcbiAgICBCYW1ib280OiBuZXcgU3VpdFRpbGUoU3VpdHMuQkFNQk9PLCA0KSxcclxuICAgIEJhbWJvbzU6IG5ldyBTdWl0VGlsZShTdWl0cy5CQU1CT08sIDUpLFxyXG4gICAgQmFtYm9vNjogbmV3IFN1aXRUaWxlKFN1aXRzLkJBTUJPTywgNiksXHJcbiAgICBCYW1ib283OiBuZXcgU3VpdFRpbGUoU3VpdHMuQkFNQk9PLCA3KSxcclxuICAgIEJhbWJvbzg6IG5ldyBTdWl0VGlsZShTdWl0cy5CQU1CT08sIDgpLFxyXG4gICAgQmFtYm9vOTogbmV3IFN1aXRUaWxlKFN1aXRzLkJBTUJPTywgOSksXHJcblxyXG4gICAgQ2hhcmFjdGVyMTogbmV3IFN1aXRUaWxlKFN1aXRzLkNIQVJBQ1RFUiwgMSksXHJcbiAgICBDaGFyYWN0ZXIyOiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0hBUkFDVEVSLCAyKSxcclxuICAgIENoYXJhY3RlcjM6IG5ldyBTdWl0VGlsZShTdWl0cy5DSEFSQUNURVIsIDMpLFxyXG4gICAgQ2hhcmFjdGVyNDogbmV3IFN1aXRUaWxlKFN1aXRzLkNIQVJBQ1RFUiwgNCksXHJcbiAgICBDaGFyYWN0ZXI1OiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0hBUkFDVEVSLCA1KSxcclxuICAgIENoYXJhY3RlcjY6IG5ldyBTdWl0VGlsZShTdWl0cy5DSEFSQUNURVIsIDYpLFxyXG4gICAgQ2hhcmFjdGVyNzogbmV3IFN1aXRUaWxlKFN1aXRzLkNIQVJBQ1RFUiwgNyksXHJcbiAgICBDaGFyYWN0ZXI4OiBuZXcgU3VpdFRpbGUoU3VpdHMuQ0hBUkFDVEVSLCA4KSxcclxuICAgIENoYXJhY3Rlcjk6IG5ldyBTdWl0VGlsZShTdWl0cy5DSEFSQUNURVIsIDkpLFxyXG5cclxuICAgIERyYWdvblJlZDogbmV3IERyYWdvblRpbGUoRHJhZ29ucy5SRUQpLFxyXG4gICAgRHJhZ29uV2hpdGU6IG5ldyBEcmFnb25UaWxlKERyYWdvbnMuV0hJVEUpLFxyXG4gICAgRHJhZ29uR3JlZW46IG5ldyBEcmFnb25UaWxlKERyYWdvbnMuR1JFRU4pLFxyXG5cclxuICAgIFdpbmRFYXN0OiBuZXcgV2luZFRpbGUoV2luZHMuRUFTVCksXHJcbiAgICBXaW5kV2VzdDogbmV3IFdpbmRUaWxlKFdpbmRzLldFU1QpLFxyXG4gICAgV2luZE5vcnRoOiBuZXcgV2luZFRpbGUoV2luZHMuTk9SVEgpLFxyXG4gICAgV2luZFNvdXRoOiBuZXcgV2luZFRpbGUoV2luZHMuU09VVEgpLFxyXG5cclxuICAgIEJvbnVzRmxvd2VyMTogbmV3IEJvbnVzVGlsZShCb251cy5GTE9XRVIxKSxcclxuICAgIEJvbnVzRmxvd2VyMjogbmV3IEJvbnVzVGlsZShCb251cy5GTE9XRVIyKSxcclxuICAgIEJvbnVzRmxvd2VyMzogbmV3IEJvbnVzVGlsZShCb251cy5GTE9XRVIzKSxcclxuICAgIEJvbnVzRmxvd2VyNDogbmV3IEJvbnVzVGlsZShCb251cy5GTE9XRVI0KSxcclxuICAgIEJvbnVzU3VtbWVyOiBuZXcgQm9udXNUaWxlKEJvbnVzLlNVTU1FUiksXHJcbiAgICBCb251c1NwcmluZzogbmV3IEJvbnVzVGlsZShCb251cy5TUFJJTkcpLFxyXG4gICAgQm9udXNBdXR1bW46IG5ldyBCb251c1RpbGUoQm9udXMuQVVUVU1OKSxcclxuICAgIEJvbnVzV2ludGVyOiBuZXcgQm9udXNUaWxlKEJvbnVzLldJTlRFUiksXHJcbn07XHJcblxyXG5jb25zdCBUaWxlR3JvdXBzID0ge1xyXG4gICAgW1N1aXRzLkJBTUJPT106IFtUaWxlcy5CYW1ib28xLCBUaWxlcy5CYW1ib28yLCBUaWxlcy5CYW1ib28zLCBUaWxlcy5CYW1ib280LCBUaWxlcy5CYW1ib281LCBUaWxlcy5CYW1ib282LCBUaWxlcy5CYW1ib283LCBUaWxlcy5CYW1ib284LCBUaWxlcy5CYW1ib285XSxcclxuICAgIFtTdWl0cy5DSVJDTEVdOiBbVGlsZXMuQ2lyY2xlMSwgVGlsZXMuQ2lyY2xlMiwgVGlsZXMuQ2lyY2xlMywgVGlsZXMuQ2lyY2xlNCwgVGlsZXMuQ2lyY2xlNSwgVGlsZXMuQ2lyY2xlNiwgVGlsZXMuQ2lyY2xlNywgVGlsZXMuQ2lyY2xlOCwgVGlsZXMuQ2lyY2xlOV0sXHJcbiAgICBbU3VpdHMuQ0hBUkFDVEVSXTogW1RpbGVzLkNoYXJhY3RlcjEsIFRpbGVzLkNoYXJhY3RlcjIsIFRpbGVzLkNoYXJhY3RlcjMsIFRpbGVzLkNoYXJhY3RlcjQsIFRpbGVzLkNoYXJhY3RlcjUsIFRpbGVzLkNoYXJhY3RlcjYsIFRpbGVzLkNoYXJhY3RlcjcsIFRpbGVzLkNoYXJhY3RlcjgsIFRpbGVzLkNoYXJhY3RlcjldLFxyXG4gICAgW1N1aXRzLkRSQUdPTl06IFtUaWxlcy5EcmFnb25SZWQsIFRpbGVzLkRyYWdvbkdyZWVuLCBUaWxlcy5EcmFnb25XaGl0ZV0sXHJcbiAgICBbU3VpdHMuV0lORF06IFtUaWxlcy5XaW5kV2VzdCwgVGlsZXMuV2luZEVhc3QsIFRpbGVzLldpbmROb3J0aCwgVGlsZXMuV2luZFNvdXRoXSxcclxuICAgIFtTdWl0cy5CT05VU106IFtUaWxlcy5Cb251c0Zsb3dlcjEsIFRpbGVzLkJvbnVzRmxvd2VyMiwgVGlsZXMuQm9udXNGbG93ZXIzLCBUaWxlcy5Cb251c0Zsb3dlcjQsXHJcbiAgICAgICAgVGlsZXMuQm9udXNTdW1tZXIsIFRpbGVzLkJvbnVzU3ByaW5nLCBUaWxlcy5Cb251c0F1dHVtbiwgVGlsZXMuQm9udXNXaW50ZXJdLFxyXG59O1xyXG5cclxuY29uc3QgV2luZE9yZGVyID0gW1xyXG4gICAgVGlsZXMuV2luZEVhc3QsXHJcbiAgICBUaWxlcy5XaW5kU291dGgsXHJcbiAgICBUaWxlcy5XaW5kV2VzdCxcclxuICAgIFRpbGVzLldpbmROb3J0aCxcclxuXTtcclxuXHJcbmNsYXNzIFRpbGVTZXQge1xyXG4gICAgY29uc3RydWN0b3IocmV2ZWFsZWQsIHRpbGVzKSB7XHJcbiAgICAgICAgdGhpcy5pc1JldmVhbGVkID0gcmV2ZWFsZWQ7XHJcbiAgICAgICAgdGhpcy50aWxlcyA9IHRpbGVzO1xyXG5cclxuICAgICAgICB0aGlzLnNpbXBsZVNldCA9ICh0aWxlc1swXSBpbnN0YW5jZW9mIFN1aXRUaWxlKSAmJiAhdGlsZXNbMF0uaXNIb25vdXI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGlsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aWxlc1swXTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ2hvdyBleHRlbmRzIFRpbGVTZXQge1xyXG4gICAgY29uc3RydWN0b3IocmV2ZWFsZWQsIHRpbGUxLCB0aWxlMiwgdGlsZTMpIHtcclxuICAgICAgICBzdXBlcihyZXZlYWxlZCwgW3RpbGUxLCB0aWxlMiwgdGlsZTNdKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUHVuZyBleHRlbmRzIFRpbGVTZXQge1xyXG4gICAgY29uc3RydWN0b3IocmV2ZWFsZWQsIHRpbGUpIHtcclxuICAgICAgICBzdXBlcihyZXZlYWxlZCwgW3RpbGUsIHRpbGUsIHRpbGVdKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgS29uZyBleHRlbmRzIFRpbGVTZXQge1xyXG4gICAgY29uc3RydWN0b3IocmV2ZWFsZWQsIHRpbGUpIHtcclxuICAgICAgICBzdXBlcihyZXZlYWxlZCwgW3RpbGUsIHRpbGUsIHRpbGUsIHRpbGVdKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUGFpciBleHRlbmRzIFRpbGVTZXQge1xyXG4gICAgY29uc3RydWN0b3IodGlsZSkge1xyXG4gICAgICAgIHN1cGVyKGZhbHNlLCBbdGlsZSwgdGlsZV0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBGcmVlVGlsZXMgZXh0ZW5kcyBUaWxlU2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKHRpbGVzKSB7XHJcbiAgICAgICAgc3VwZXIoZmFsc2UsIHRpbGVzKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmNsYXNzIEhhbmQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge0FycmF5PFRpbGU+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudGlsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnNldHMgPSBbXTtcclxuICAgICAgICB0aGlzLnNwZWNpYWxTZXQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFNwZWNpYWxTZXQoc3BlY2lhbFNldCkge1xyXG4gICAgICAgIHRoaXMuc3BlY2lhbFNldCA9IHNwZWNpYWxTZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkVGlsZSh0aWxlKSB7XHJcbiAgICAgICAgdGhpcy50aWxlcy5wdXNoKHRpbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRpbGVDb3VudCh0aWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZXMuZmlsdGVyKCh0KSA9PiB0LmVxdWFscyh0aWxlKSkubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFNldCh0aWxlU2V0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRzLnB1c2godGlsZVNldCk7XHJcbiAgICAgICAgdGhpcy50aWxlcyA9IHRoaXMudGlsZXMuY29uY2F0KHRpbGVTZXQudGlsZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7QXJyYXk8VGlsZVNldD59XHJcbiAgICAgKi9cclxuICAgIGdldFNldHNPZlR5cGUoY2xhenosIHRpbGVUeXBlKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuc2V0cy5maWx0ZXIoKHRpbGVTZXQpID0+IHRpbGVTZXQgaW5zdGFuY2VvZiBjbGF6eik7XHJcblxyXG4gICAgICAgIGlmKHRpbGVUeXBlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoKHRpbGVTZXQpID0+IHRpbGVTZXQuZ2V0VGlsZSgpIGluc3RhbmNlb2YgdGlsZVR5cGUpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRpbGVzT2ZUeXBlKHRpbGVUeXBlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZXMuZmlsdGVyKHRpbGUgPT4gdGlsZSBpbnN0YW5jZW9mIHRpbGVUeXBlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtcclxuICAgIEhhbmQsIFRpbGVzLCBTdWl0VGlsZSwgU3VpdHMsIERyYWdvbnMsIERyYWdvblRpbGUsIFdpbmRzLCBXaW5kVGlsZSwgQm9udXMsIEJvbnVzVGlsZSxcclxuICAgIENob3csIEtvbmcsIFB1bmcsIFBhaXIsIEZyZWVUaWxlcywgV2luZE9yZGVyLCBUaWxlR3JvdXBzLCBTcGVjaWFsU2V0c1xyXG59OyIsImltcG9ydCB7VGVtcGxhdGVDb250YWluZXJ9IGZyb20gXCIuL3ZpZXcvdGVtcGxhdGVzXCI7XHJcbmltcG9ydCB7R2FtZSwgUGxheWVyfSBmcm9tIFwiLi9nYW1lXCI7XHJcbmltcG9ydCB7TWFoam9uZ0xpbEhlbHBlck1haW5WaWV3Q29udHJvbGxlcn0gZnJvbSBcIi4vYXBwXCI7XHJcblxyXG5pbXBvcnQge2NvbnRhaW5lcn0gZnJvbSAnbmVlZGxlcG9pbnQnO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgICBsZXQgdG1wbCA9IGNvbnRhaW5lci5yZXNvbHZlKFRlbXBsYXRlQ29udGFpbmVyKTtcclxuICAgIHRtcGwuZGlzY292ZXIoZG9jdW1lbnQuYm9keSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7TWFoam9uZ0xpbEhlbHBlck1haW5WaWV3Q29udHJvbGxlcn1cclxuICAgICAqL1xyXG4gICAgbGV0IGN0cmwgPSBjb250YWluZXIucmVzb2x2ZShNYWhqb25nTGlsSGVscGVyTWFpblZpZXdDb250cm9sbGVyKTtcclxuXHJcbiAgICBjdHJsLnZpZXcubW91bnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haGpvbmdDb250ZW50JykpO1xyXG5cclxuICAgIGN0cmwubG9hZCgpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdSRUFEWScsIGN0cmwpO1xyXG59KTsiLCJcclxuaW1wb3J0ICogYXMgaCBmcm9tICcuL2hhbmQuanMnO1xyXG5pbXBvcnQge0JvbnVzVGlsZSwgU3BlY2lhbFNldHN9IGZyb20gXCIuL2hhbmRcIjtcclxuXHJcblxyXG5mdW5jdGlvbiBjYWxjUHVuZ0tvbmdWYWx1ZShiYXNlVmFsdWUsIHRpbGVTZXQpIHtcclxuICAgIGlmKCF0aWxlU2V0LnNpbXBsZVNldCkge1xyXG4gICAgICAgIGJhc2VWYWx1ZSAqPSAyO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCF0aWxlU2V0LmlzUmV2ZWFsZWQpIHtcclxuICAgICAgICBiYXNlVmFsdWUgKj0gMjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYmFzZVZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBseU11bHRpcGxpZXJzKG51bU11bHRpcGxpZXJzLCB2YWx1ZSkge1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG51bU11bHRpcGxpZXJzOyBpKyspIHtcclxuICAgICAgICB2YWx1ZSAqPSAyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuY2xhc3MgU2NvcmVDYWxjdWxhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvaW50c1J1bGVzLCBtdWx0aXBsaWVyc0ZvckFsbCwgbXVsdGlwbGllcnNGb3JXaW5uZXIsIHNwZWNpYWxTZXRzUnVsZXMpIHtcclxuICAgICAgICB0aGlzLnBvaW50c1J1bGVzID0gcG9pbnRzUnVsZXM7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsaWVyUnVsZXNGb3JBbGwgPSBtdWx0aXBsaWVyc0ZvckFsbDtcclxuICAgICAgICB0aGlzLm11bHRpcGxpZXJSdWxlc0Zvcldpbm5lciA9IG11bHRpcGxpZXJzRm9yV2lubmVyO1xyXG4gICAgICAgIHRoaXMuc3BlY2lhbFNldHNSdWxlcyA9IHNwZWNpYWxTZXRzUnVsZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge1JvdW5kfSByb3VuZFxyXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxyXG4gICAgICogQHJldHVybiB7e3Njb3JlLG11bHRpcGxpZXJzLHBvaW50c319XHJcbiAgICAgKi9cclxuICAgIGNhbGN1bGF0ZUV4dGVuZGVkU2NvcmUocm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGxldCBoYW5kID0gcm91bmQuZ2V0SGFuZChwbGF5ZXIpLmhhbmQ7XHJcblxyXG4gICAgICAgIGlmKGhhbmQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHNjb3JlOiAwLFxyXG4gICAgICAgICAgICAgICAgbXVsdGlwbGllcnM6IFtdLFxyXG4gICAgICAgICAgICAgICAgcG9pbnRzOiBbXSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBhcHBsaWVkUG9pbnRzID0gW107XHJcbiAgICAgICAgbGV0IGFwcGxpZWRNdWx0aXBsaWVycyA9IFtdO1xyXG5cclxuICAgICAgICBsZXQgcG9pbnRzID0gMDtcclxuICAgICAgICBsZXQgbXVsdGlwbGllcnMgPSAwO1xyXG5cclxuICAgICAgICBsZXQgc3BlY2lhbFBvaW50cyA9IHRoaXMuc3BlY2lhbFNldHNSdWxlcy5tYXAoKC8qU3BlY2lhbFNldFJ1bGUqL3J1bGUpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJ1bGU6IHJ1bGUsXHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IHJ1bGUuZ2V0UG9pbnRzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuZmlsdGVyKHJ1bGUgPT4gcnVsZS5hbW91bnQgPiAwKTtcclxuXHJcbiAgICAgICAgaWYoc3BlY2lhbFBvaW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHBvaW50cyA9IHJvdW5kLmdhbWUucm91bmRMaW1pdCAqIHNwZWNpYWxQb2ludHNbMF0uYW1vdW50O1xyXG4gICAgICAgICAgICBhcHBsaWVkUG9pbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgcnVsZTogc3BlY2lhbFBvaW50c1swXS5ydWxlLFxyXG4gICAgICAgICAgICAgICAgYW1vdW50OiBwb2ludHMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcG9pbnRzID0gdGhpcy5wb2ludHNSdWxlcy5yZWR1Y2UoKHZhbHVlLCBydWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcCA9IHJ1bGUuZ2V0UG9pbnRzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHBsaWVkUG9pbnRzLnB1c2goe3J1bGU6IHJ1bGUsIGFtb3VudDogcH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICsgKHAgfHwgMClcclxuICAgICAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgICAgICBtdWx0aXBsaWVycyA9IHRoaXMubXVsdGlwbGllclJ1bGVzRm9yQWxsLnJlZHVjZSgodmFsdWUsIHJ1bGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBtdWx0ID0gcnVsZS5nZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCwgcGxheWVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobXVsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcGxpZWRNdWx0aXBsaWVycy5wdXNoKHtydWxlOiBydWxlLCBhbW91bnQ6IG11bHR9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKyAobXVsdCB8fCAwKVxyXG4gICAgICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyb3VuZC53aW5uZXIgPT09IHBsYXllcikge1xyXG4gICAgICAgICAgICAgICAgbXVsdGlwbGllcnMgPSB0aGlzLm11bHRpcGxpZXJSdWxlc0Zvcldpbm5lci5yZWR1Y2UoKHZhbHVlLCBydWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG11bHQgPSBydWxlLmdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobXVsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBsaWVkTXVsdGlwbGllcnMucHVzaCh7cnVsZTogcnVsZSwgYW1vdW50OiBtdWx0fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKyAobXVsdCB8fCAwKVxyXG4gICAgICAgICAgICAgICAgfSwgbXVsdGlwbGllcnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzY29yZTogTWF0aC5taW4oYXBwbHlNdWx0aXBsaWVycyhtdWx0aXBsaWVycywgcG9pbnRzKSwgMTAwMCksXHJcbiAgICAgICAgICAgIG11bHRpcGxpZXJzOiBhcHBsaWVkTXVsdGlwbGllcnMsXHJcbiAgICAgICAgICAgIHBvaW50czogYXBwbGllZFBvaW50cyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZVNjb3JlKHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVFeHRlbmRlZFNjb3JlKHJvdW5kLCBwbGF5ZXIpLnNjb3JlXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHtTY29yZUNhbGN1bGF0b3J9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVEZWZhdWx0U2NvcmVDYWxjdWxhdG9yKCkge1xyXG4gICAgICAgIGxldCBwb2ludHNSdWxlcyA9IFtcclxuICAgICAgICAgICAgbmV3IEJvbnVzVGlsZVBvaW50cygpLFxyXG4gICAgICAgICAgICBuZXcgUG9pbnRzRm9yUGFpck9mUm91bmRXaW5kUnVsZSgpLFxyXG4gICAgICAgICAgICBuZXcgUG9pbnRzRm9yUGFpck9mT3duV2luZFJ1bGUoKSxcclxuICAgICAgICAgICAgbmV3IFBvaW50c0ZvclBhaXJPZkRyYWdvbnNSdWxlKCksXHJcbiAgICAgICAgICAgIG5ldyBQb2ludHNGb3JQdW5nUnVsZSgpLFxyXG4gICAgICAgICAgICBuZXcgUG9pbnRzRm9yS29uZ1J1bGUoKSxcclxuICAgICAgICAgICAgbmV3IFBvaW50c0Zvck1haGpvbmcoKSxcclxuICAgICAgICAgICAgbmV3IFBvaW50c0Zvckxhc3RBdmFpbGFibGVUaWxlKCksXHJcbiAgICAgICAgICAgIG5ldyBQb2ludHNGb3JMYXN0VGlsZUZyb21XYWxsKCksXHJcbiAgICAgICAgXTtcclxuICAgICAgICBsZXQgbXVsdGlwbGllclJ1bGVzRm9yQWxsID0gW1xyXG4gICAgICAgICAgICBuZXcgRHJhZ29uU2V0TXVsdGlwbGllcigpLFxyXG4gICAgICAgICAgICBuZXcgUm91bmRXaW5kU2V0TXVsdGlwbGllcigpLFxyXG4gICAgICAgICAgICBuZXcgT3duV2luZFNldE11bHRpcGxpZXIoKSxcclxuICAgICAgICAgICAgbmV3IFRocmVlQ29uY2VhbGVkUHVuZ3NNdWx0aXBsaWVyKCksXHJcbiAgICAgICAgICAgIG5ldyBUaHJlZUxpdHRsZVNhZ2VzTXVsdGlwbGllcigpLFxyXG4gICAgICAgICAgICBuZXcgVGhyZWVHcmFuZFNhZ2VzTXVsdGlwbGllcigpLFxyXG4gICAgICAgICAgICBuZXcgRm91ckxpdHRsZUJsZXNzaW5nc011bHRpcGxpZXIoKSxcclxuICAgICAgICAgICAgbmV3IEZvdXJHcmFuZEJsZXNzaW5nc011bHRpcGxpZXIoKSxcclxuICAgICAgICBdO1xyXG4gICAgICAgIGxldCBtdWx0aXBsaWVyUnVsZXNGb3JXaW5uZXIgPSBbXHJcbiAgICAgICAgICAgIG5ldyBMYXN0VGlsZVNwZWNpYWxNdWx0aXBsaWVyKCksXHJcbiAgICAgICAgICAgIG5ldyBQdXJlQ2hvd3NNdWx0aXBsaWVyKCksXHJcbiAgICAgICAgICAgIG5ldyBOb0Nob3dzTXVsdGlwbGllcigpLFxyXG4gICAgICAgICAgICBuZXcgSGFsZkNvbG9yTXVsdGlwbGllcigpLFxyXG4gICAgICAgICAgICBuZXcgT25seUhvbm91clRpbGVzTXVsdGlwbGllcigpLFxyXG4gICAgICAgICAgICBuZXcgTm9Ib25vdXJTYW1lU3VpdFRpbGVzKCksXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgbGV0IHNwZWNpYWxTZXRzUnVsZXMgPSBbXHJcbiAgICAgICAgICAgIG5ldyBTcGVjaWFsU2V0UnVsZSgpLFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgU2NvcmVDYWxjdWxhdG9yKHBvaW50c1J1bGVzLCBtdWx0aXBsaWVyUnVsZXNGb3JBbGwsIG11bHRpcGxpZXJSdWxlc0Zvcldpbm5lcixcclxuICAgICAgICAgICAgc3BlY2lhbFNldHNSdWxlcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFNwZWNpYWxTZXRSdWxlIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtIYW5kfSBoYW5kXHJcbiAgICAgKiBAcGFyYW0ge1JvdW5kfSByb3VuZFxyXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRQb2ludHMoaGFuZCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGlmKGhhbmQuc3BlY2lhbFNldCkge1xyXG4gICAgICAgICAgICBpZihoYW5kLnNwZWNpYWxTZXQgPT09IFNwZWNpYWxTZXRzLm1pbm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHJvdW5kLndpbm5lciA9PT0gcGxheWVyKSA/IDAuNSA6IDAuMjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoaGFuZC5zcGVjaWFsU2V0ID09PSBTcGVjaWFsU2V0cy5tYWpvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChyb3VuZC53aW5uZXIgPT09IHBsYXllcikgPyAxIDogMC40O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyNyZWdpb24gUnVsZXMgZm9yIHBvaW50c1xyXG5cclxuY2xhc3MgUG9pbnRzUnVsZSB7XHJcbiAgICBnZXRQb2ludHMoaGFuZCwgcm91bmQsIHBsYXllcikge31cclxufVxyXG5cclxuY2xhc3MgUG9pbnRzRm9yVGlsZXNldFJ1bGUgZXh0ZW5kcyBQb2ludHNSdWxlIHtcclxuXHJcbiAgICBnZXRQb2ludHMoaGFuZCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIHJldHVybiBoYW5kLnNldHMucmVkdWNlKCh2YWx1ZSwgdGlsZVNldCkgPT4gdmFsdWUgKyAodGhpcy5nZXRUaWxlc2V0VmFsdWUodGlsZVNldCwgcm91bmQsIHBsYXllcikgfHwgMCksIDApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRpbGVzZXRWYWx1ZSh0aWxlU2V0LCByb3VuZCwgcGxheWVyKSB7cmV0dXJuIDB9XHJcbn1cclxuXHJcbmNsYXNzIFBvaW50c0ZvclRpbGVSdWxlIGV4dGVuZHMgUG9pbnRzUnVsZSB7XHJcblxyXG4gICAgZ2V0UG9pbnRzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICByZXR1cm4gaGFuZC50aWxlcy5yZWR1Y2UoKHZhbHVlLCB0aWxlKSA9PiB2YWx1ZSArICh0aGlzLmdldFRpbGVWYWx1ZSh0aWxlKSB8fCAwKSwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGlsZVZhbHVlKHRpbGUpIHtyZXR1cm4gMH1cclxufVxyXG5cclxuY2xhc3MgQm9udXNUaWxlUG9pbnRzIGV4dGVuZHMgUG9pbnRzRm9yVGlsZVJ1bGUge1xyXG4gICAgZ2V0VGlsZVZhbHVlKHRpbGUpIHtcclxuICAgICAgICBpZih0aWxlIGluc3RhbmNlb2YgaC5Cb251c1RpbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb2ludHNGb3JQYWlyT2ZEcmFnb25zUnVsZSBleHRlbmRzIFBvaW50c0ZvclRpbGVzZXRSdWxlIHtcclxuXHJcbiAgICBnZXRUaWxlc2V0VmFsdWUodGlsZVNldCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGlmKCEodGlsZVNldCBpbnN0YW5jZW9mIGguUGFpcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aWxlU2V0LmdldFRpbGUoKSBpbnN0YW5jZW9mIGguRHJhZ29uVGlsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBvaW50c0ZvclBhaXJPZlJvdW5kV2luZFJ1bGUgZXh0ZW5kcyBQb2ludHNGb3JUaWxlc2V0UnVsZSB7XHJcblxyXG4gICAgZ2V0VGlsZXNldFZhbHVlKHRpbGVTZXQsIHJvdW5kKSB7XHJcbiAgICAgICAgaWYoISh0aWxlU2V0IGluc3RhbmNlb2YgaC5QYWlyKSkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHJvdW5kLndpbmRJbmRpY2F0b3IuZXF1YWxzKHRpbGVTZXQuZ2V0VGlsZSgpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBvaW50c0ZvclBhaXJPZk93bldpbmRSdWxlIGV4dGVuZHMgUG9pbnRzRm9yVGlsZXNldFJ1bGUge1xyXG5cclxuICAgIGdldFRpbGVzZXRWYWx1ZSh0aWxlU2V0LCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgaWYoISh0aWxlU2V0IGluc3RhbmNlb2YgaC5QYWlyKSkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHJvdW5kLmdldFBsYXllcldpbmQocGxheWVyKS5lcXVhbHModGlsZVNldC5nZXRUaWxlKCkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUG9pbnRzRm9yUHVuZ1J1bGUgZXh0ZW5kcyBQb2ludHNGb3JUaWxlc2V0UnVsZSB7XHJcblxyXG4gICAgZ2V0VGlsZXNldFZhbHVlKHRpbGVTZXQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBpZih0aWxlU2V0IGluc3RhbmNlb2YgaC5QdW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxjUHVuZ0tvbmdWYWx1ZSgyLCB0aWxlU2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBvaW50c0ZvcktvbmdSdWxlIGV4dGVuZHMgUG9pbnRzRm9yVGlsZXNldFJ1bGUge1xyXG5cclxuICAgIGdldFRpbGVzZXRWYWx1ZSh0aWxlU2V0LCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgaWYodGlsZVNldCBpbnN0YW5jZW9mIGguS29uZykge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsY1B1bmdLb25nVmFsdWUoOCwgdGlsZVNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb2ludHNGb3JNYWhqb25nIGV4dGVuZHMgUG9pbnRzUnVsZSB7XHJcblxyXG4gICAgZ2V0UG9pbnRzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBpZihyb3VuZC53aW5uZXIgPT09IHBsYXllcikge1xyXG4gICAgICAgICAgICByZXR1cm4gMjA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb2ludHNGb3JMYXN0QXZhaWxhYmxlVGlsZSBleHRlbmRzIFBvaW50c1J1bGUge1xyXG5cclxuICAgIGdldFBvaW50cyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgaWYocm91bmQud2lubmVyID09PSBwbGF5ZXIgJiYgcm91bmQubGFzdEF2YWlsYWJsZVRpbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb2ludHNGb3JMYXN0VGlsZUZyb21XYWxsIGV4dGVuZHMgUG9pbnRzUnVsZSB7XHJcblxyXG4gICAgZ2V0UG9pbnRzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBpZihyb3VuZC53aW5uZXIgPT09IHBsYXllciAmJiByb3VuZC5sYXN0VGlsZUZyb21XYWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8jZW5kcmVnaW9uXHJcblxyXG4vLyNyZWdpb24gUnVsZXMgZm9yIG11bHRpcGxpZXJzXHJcblxyXG5jbGFzcyBNdWx0aXBsaWVyUnVsZSB7XHJcbiAgICBnZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCwgcGxheWVyKSB7fVxyXG59XHJcblxyXG5jbGFzcyBMYXN0VGlsZVNwZWNpYWxNdWx0aXBsaWVyIGV4dGVuZHMgTXVsdGlwbGllclJ1bGUge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaGFuZFxyXG4gICAgICogQHBhcmFtIHtSb3VuZH0gcm91bmRcclxuICAgICAqL1xyXG4gICAgZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQpIHtcclxuICAgICAgICBpZihyb3VuZC5sYXN0VGlsZVNwZWNpYWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBEcmFnb25TZXRNdWx0aXBsaWVyIGV4dGVuZHMgTXVsdGlwbGllclJ1bGUge1xyXG4gICAgZ2V0TXVsdGlwbGllcnMoaGFuZCkge1xyXG4gICAgICAgIHJldHVybiBoYW5kLmdldFNldHNPZlR5cGUoaC5Lb25nLCBoLkRyYWdvblRpbGUpLmNvbmNhdChoYW5kLmdldFNldHNPZlR5cGUoaC5QdW5nLCBoLkRyYWdvblRpbGUpKS5sZW5ndGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFJvdW5kV2luZFNldE11bHRpcGxpZXIgZXh0ZW5kcyBNdWx0aXBsaWVyUnVsZSB7XHJcbiAgICBnZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCkge1xyXG4gICAgICAgIGxldCB3aW5kU2V0cyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLktvbmcsIGguV2luZFRpbGUpLmNvbmNhdChoYW5kLmdldFNldHNPZlR5cGUoaC5QdW5nLCBoLldpbmRUaWxlKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB3aW5kU2V0cy5maWx0ZXIodGlsZVNldCA9PiB0aWxlU2V0LmdldFRpbGUoKS5lcXVhbHMocm91bmQud2luZEluZGljYXRvcikpLmxlbmd0aDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgT3duV2luZFNldE11bHRpcGxpZXIgZXh0ZW5kcyBNdWx0aXBsaWVyUnVsZSB7XHJcbiAgICBnZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgbGV0IHdpbmRTZXRzID0gaGFuZC5nZXRTZXRzT2ZUeXBlKGguS29uZywgaC5XaW5kVGlsZSkuY29uY2F0KGhhbmQuZ2V0U2V0c09mVHlwZShoLlB1bmcsIGguV2luZFRpbGUpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHdpbmRTZXRzLmZpbHRlcih0aWxlU2V0ID0+IHRpbGVTZXQuZ2V0VGlsZSgpLmVxdWFscyhyb3VuZC5nZXRQbGF5ZXJXaW5kKHBsYXllcikpKS5sZW5ndGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFRocmVlQ29uY2VhbGVkUHVuZ3NNdWx0aXBsaWVyIGV4dGVuZHMgTXVsdGlwbGllclJ1bGUge1xyXG5cclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBsZXQgcHVuZ3MgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5QdW5nKS5maWx0ZXIodGlsZVNldCA9PiAhdGlsZVNldC5pc1JldmVhbGVkKTtcclxuXHJcbiAgICAgICAgaWYocHVuZ3MubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBUaHJlZUxpdHRsZVNhZ2VzTXVsdGlwbGllciBleHRlbmRzIE11bHRpcGxpZXJSdWxlIHtcclxuXHJcbiAgICBnZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgbGV0IGRyYWdvblNldHMgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5Lb25nLCBoLkRyYWdvblRpbGUpLmNvbmNhdChoYW5kLmdldFNldHNPZlR5cGUoaC5QdW5nLCBoLkRyYWdvblRpbGUpKTtcclxuICAgICAgICBsZXQgZHJhZ29uUGFpcnMgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5QYWlyLCBoLkRyYWdvblRpbGUpO1xyXG5cclxuICAgICAgICBpZihkcmFnb25TZXRzLmxlbmd0aCA+PSAyICYmIGRyYWdvblBhaXJzLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgVGhyZWVHcmFuZFNhZ2VzTXVsdGlwbGllciBleHRlbmRzIE11bHRpcGxpZXJSdWxlIHtcclxuXHJcbiAgICBnZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgbGV0IGRyYWdvblNldHMgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5Lb25nLCBoLkRyYWdvblRpbGUpLmNvbmNhdChoYW5kLmdldFNldHNPZlR5cGUoaC5QdW5nLCBoLkRyYWdvblRpbGUpKTtcclxuXHJcbiAgICAgICAgaWYoZHJhZ29uU2V0cy5sZW5ndGggPj0gMykge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEZvdXJMaXR0bGVCbGVzc2luZ3NNdWx0aXBsaWVyIGV4dGVuZHMgTXVsdGlwbGllclJ1bGUge1xyXG5cclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBsZXQgd2luZFNldHMgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5Lb25nLCBoLldpbmRUaWxlKS5jb25jYXQoaGFuZC5nZXRTZXRzT2ZUeXBlKGguUHVuZywgaC5XaW5kVGlsZSkpO1xyXG4gICAgICAgIGxldCB3aW5kUGFpcnMgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5QYWlyKTtcclxuXHJcbiAgICAgICAgaWYod2luZFNldHMubGVuZ3RoID49IDMgJiYgd2luZFBhaXJzLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRm91ckdyYW5kQmxlc3NpbmdzTXVsdGlwbGllciBleHRlbmRzIE11bHRpcGxpZXJSdWxlIHtcclxuXHJcbiAgICBnZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgbGV0IHdpbmRTZXRzID0gaGFuZC5nZXRTZXRzT2ZUeXBlKGguS29uZywgaC5XaW5kVGlsZSkuY29uY2F0KGhhbmQuZ2V0U2V0c09mVHlwZShoLlB1bmcsIGguV2luZFRpbGUpKTtcclxuXHJcbiAgICAgICAgaWYod2luZFNldHMubGVuZ3RoID49IDQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQdXJlQ2hvd3NNdWx0aXBsaWVyIGV4dGVuZHMgTXVsdGlwbGllclJ1bGUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMucG9pbnRSdWxlcyA9IFtcclxuICAgICAgICAgICAgbmV3IFBvaW50c0ZvclBhaXJPZkRyYWdvbnNSdWxlKCksXHJcbiAgICAgICAgICAgIG5ldyBQb2ludHNGb3JQYWlyT2ZPd25XaW5kUnVsZSgpLFxyXG4gICAgICAgICAgICBuZXcgUG9pbnRzRm9yUGFpck9mUm91bmRXaW5kUnVsZSgpLFxyXG4gICAgICAgICAgICBuZXcgQm9udXNUaWxlUG9pbnRzKCksXHJcbiAgICAgICAgXVxyXG4gICAgfVxyXG5cclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBsZXQga29uZ3NBbmRQdW5ncyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLktvbmcpLmNvbmNhdChoYW5kLmdldFNldHNPZlR5cGUoaC5QdW5nKSk7XHJcblxyXG4gICAgICAgIGxldCBwb2ludHMgPSB0aGlzLnBvaW50UnVsZXMucmVkdWNlKCh2YWx1ZSwgcnVsZSk9PiB2YWx1ZSArIChydWxlLmdldFBvaW50cyhoYW5kLCByb3VuZCwgcGxheWVyKSB8fCAwKSwgMCk7XHJcblxyXG4gICAgICAgIGlmKGtvbmdzQW5kUHVuZ3MubGVuZ3RoID09PSAwICYmIHBvaW50cyA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIE5vQ2hvd3NNdWx0aXBsaWVyIGV4dGVuZHMgTXVsdGlwbGllclJ1bGUge1xyXG5cclxuICAgIGdldE11bHRpcGxpZXJzKGhhbmQsIHJvdW5kLCBwbGF5ZXIpIHtcclxuICAgICAgICBsZXQgY2hvd3MgPSBoYW5kLmdldFNldHNPZlR5cGUoaC5DaG93KS5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHB1bmdzID0gaGFuZC5nZXRTZXRzT2ZUeXBlKGguUHVuZykubGVuZ3RoO1xyXG4gICAgICAgIGxldCBrb25ncyA9IGhhbmQuZ2V0U2V0c09mVHlwZShoLktvbmcpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgaWYoY2hvd3MgPT09IDAgJiYgKHB1bmdzICsga29uZ3MpID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEhhbGZDb2xvck11bHRpcGxpZXIgZXh0ZW5kcyBNdWx0aXBsaWVyUnVsZSB7XHJcblxyXG4gICAgZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGxldCBjaGFyVGlsZXMgPSBoYW5kLmdldFRpbGVzT2ZUeXBlKGguU3VpdFRpbGUpLmZpbHRlcih0aWxlID0+IHRpbGUuc3VpdCA9PT0gaC5TdWl0cy5DSEFSQUNURVIpO1xyXG4gICAgICAgIGxldCBiYW1ib29UaWxlcyA9IGhhbmQuZ2V0VGlsZXNPZlR5cGUoaC5TdWl0VGlsZSkuZmlsdGVyKHRpbGUgPT4gdGlsZS5zdWl0ID09PSBoLlN1aXRzLkJBTUJPTyk7XHJcbiAgICAgICAgbGV0IGNpcmNsZVRpbGVzID0gaGFuZC5nZXRUaWxlc09mVHlwZShoLlN1aXRUaWxlKS5maWx0ZXIodGlsZSA9PiB0aWxlLnN1aXQgPT09IGguU3VpdHMuQ0lSQ0xFKTtcclxuXHJcbiAgICAgICAgbGV0IGhhc0NoYXJUaWxlcyA9IGNoYXJUaWxlcy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGxldCBoYXNCYW1ib29UaWxlcyA9IGJhbWJvb1RpbGVzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgbGV0IGhhc0NpcmNsZVRpbGVzID0gY2lyY2xlVGlsZXMubGVuZ3RoID4gMDtcclxuXHJcbiAgICAgICAgaWYoaGFzQ2hhclRpbGVzICsgaGFzQmFtYm9vVGlsZXMgKyBoYXNDaXJjbGVUaWxlcyA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIE9ubHlIb25vdXJUaWxlc011bHRpcGxpZXIgZXh0ZW5kcyBNdWx0aXBsaWVyUnVsZSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7SGFuZH0gaGFuZFxyXG4gICAgICogQHBhcmFtIHtSb3VuZH0gcm91bmRcclxuICAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcclxuICAgICAqL1xyXG4gICAgZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQsIHBsYXllcikge1xyXG4gICAgICAgIGxldCBpbXBvcnRhbnRUaWxlcyA9IGhhbmQudGlsZXMuZmlsdGVyKHQgPT4gISh0IGluc3RhbmNlb2YgQm9udXNUaWxlKSk7XHJcblxyXG4gICAgICAgIGlmKGltcG9ydGFudFRpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0aWxlcyA9IGltcG9ydGFudFRpbGVzLmZpbHRlcih0ID0+ICF0LmlzSG9ub3VyKTtcclxuXHJcbiAgICAgICAgaWYodGlsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTm9Ib25vdXJTYW1lU3VpdFRpbGVzIGV4dGVuZHMgSGFsZkNvbG9yTXVsdGlwbGllciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtIYW5kfSBoYW5kXHJcbiAgICAgKiBAcGFyYW0ge1JvdW5kfSByb3VuZFxyXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRNdWx0aXBsaWVycyhoYW5kLCByb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgbGV0IGlzSGFsZkNvbG9yID0gc3VwZXIuZ2V0TXVsdGlwbGllcnMoaGFuZCwgcm91bmQsIHBsYXllcik7XHJcblxyXG4gICAgICAgIGlmKCFpc0hhbGZDb2xvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpbXBvcnRhbnRUaWxlcyA9IGhhbmQudGlsZXMuZmlsdGVyKHQgPT4gISh0IGluc3RhbmNlb2YgQm9udXNUaWxlKSk7XHJcblxyXG4gICAgICAgIGlmKGltcG9ydGFudFRpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGltcG9ydGFudFRpbGVzLmZpbHRlcih0ID0+IHQuaXNIb25vdXIpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gMjtcclxuICAgIH1cclxufVxyXG5cclxuLy8jZW5kcmVnaW9uXHJcblxyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IHtTY29yZUNhbGN1bGF0b3J9O1xyXG5leHBvcnQge1Njb3JlQ2FsY3VsYXRvcn07IiwiXHJcblxyXG5jbGFzcyBFdmVudEVtaXR0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTGlzdGVuZXIoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgZW1pdCguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7RXZlbnRFbWl0dGVyfSIsImltcG9ydCB7RXZlbnRFbWl0dGVyfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHtkb21Mb2FkZXJ9IGZyb20gXCIuL3RlbXBsYXRlc1wiO1xyXG5pbXBvcnQge2RlcGVuZGVuY2llc30gZnJvbSBcIm5lZWRsZXBvaW50XCI7XHJcbmltcG9ydCB7R2FtZVBhbmVsfSBmcm9tIFwiLi9nYW1lUGFuZWxcIjtcclxuaW1wb3J0IHtyZW5kZXJUaWxlfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5cclxuXHJcbkBkZXBlbmRlbmNpZXMoZG9tTG9hZGVyKCdnYW1lQmFsYW5jZScpKVxyXG5leHBvcnQgY2xhc3MgR2FtZUJhbGFuY2VUYWJsZVZpZXcgZXh0ZW5kcyBHYW1lUGFuZWx7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0RvbVRlbXBsYXRlfSB0ZW1wbGF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHRlbXBsYXRlLmdldFJvb3QoKSk7XHJcblxyXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgICAgICB0aGlzLnRhYmxlID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7XHJcbiAgICAgICAgdGhpcy50Ym9keSA9IHRoaXMudGFibGUucXVlcnlTZWxlY3RvcigndGJvZHknKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbkhhbmRFZGl0Q2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5hZGRSb3VuZEV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMucmV0dXJuVG9HYW1lTGlzdEV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiYWRkUm91bmRcIl0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hZGRSb3VuZEV2ZW50LmVtaXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ2EnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVG9HYW1lTGlzdEV2ZW50LmVtaXQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtHYW1lfSBnYW1lXHJcbiAgICAgKi9cclxuICAgIHJlbmRlckdhbWVCYWxhbmNlKGdhbWUpIHtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlLmZpbGxTbG90cyh7XHJcbiAgICAgICAgICAgIHBsYXllcjFOYW1lOiBnYW1lLnBsYXllcnNbMF0ubmFtZSxcclxuICAgICAgICAgICAgcGxheWVyMk5hbWU6IGdhbWUucGxheWVyc1sxXS5uYW1lLFxyXG4gICAgICAgICAgICBwbGF5ZXIzTmFtZTogZ2FtZS5wbGF5ZXJzWzJdLm5hbWUsXHJcbiAgICAgICAgICAgIHBsYXllcjROYW1lOiBnYW1lLnBsYXllcnNbM10ubmFtZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZS5jbGVhclNsb3QoJ3Jvd3MnKTtcclxuXHJcbiAgICAgICAgZ2FtZS5yb3VuZHMuZm9yRWFjaChyb3VuZCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBiYWxhbmNlID0gcm91bmQuZ2V0Um91bmRCYWxhbmNlKCk7XHJcbiAgICAgICAgICAgIGxldCBjdW11bGF0aXZlQmFsYW5jZSA9IGdhbWUuZ2V0VG90YWxCYWxhbmNlKHJvdW5kLnJvdW5kSW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMudGVtcGxhdGUuY3JlYXRlKCdyb3cnKTtcclxuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZS5hcHBlbmRUb1Nsb3QoJ3Jvd3MnLCByb3cpO1xyXG5cclxuICAgICAgICAgICAgcm93LmZpbGxTbG90cyh7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIxUm91bmRCYWxhbmNlOiBiYWxhbmNlWzBdLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyMlJvdW5kQmFsYW5jZTogYmFsYW5jZVsxXSxcclxuICAgICAgICAgICAgICAgIHBsYXllcjNSb3VuZEJhbGFuY2U6IGJhbGFuY2VbMl0sXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXI0Um91bmRCYWxhbmNlOiBiYWxhbmNlWzNdLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyMUN1bXVsYXRpdmVCYWxhbmNlOiBjdW11bGF0aXZlQmFsYW5jZVswXSxcclxuICAgICAgICAgICAgICAgIHBsYXllcjJDdW11bGF0aXZlQmFsYW5jZTogY3VtdWxhdGl2ZUJhbGFuY2VbMV0sXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIzQ3VtdWxhdGl2ZUJhbGFuY2U6IGN1bXVsYXRpdmVCYWxhbmNlWzJdLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyNEN1bXVsYXRpdmVCYWxhbmNlOiBjdW11bGF0aXZlQmFsYW5jZVszXSxcclxuICAgICAgICAgICAgICAgIHJvdW5kTnVtYmVyOiByb3VuZC5yb3VuZE51bWJlcixcclxuICAgICAgICAgICAgICAgIHdpbmRJbmRpY2F0b3I6IHJlbmRlclRpbGUocm91bmQud2luZEluZGljYXRvcilcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBBcnJheS5mcm9tKHJvdy5nZXRSb290KCkucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYWN0aW9uPVwiaGFuZEVkaXRcIl0nKSkuZm9yRWFjaCgoZWxlbSwgcGxheWVySW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKHJvdW5kLndpbm5lciAmJiByb3VuZC53aW5uZXIuc2VhdE51bWJlciA9PT0gcGxheWVySW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ3dpbm5lcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkhhbmRFZGl0Q2xpY2suZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3VuZDogcm91bmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IGdhbWUucGxheWVyc1twbGF5ZXJJbmRleF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lUGFuZWwge1xyXG4gICAgY29uc3RydWN0b3Iocm9vdCkge1xyXG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XHJcblxyXG4gICAgICAgIHRoaXMucm9vdC5jbGFzc0xpc3QuYWRkKCdnYW1lUGFuZWwnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSb290KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3Q7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLnJvb3QuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLnJvb3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0V2ZW50RW1pdHRlcn0gZnJvbSBcIi4uL3V0aWxzXCI7XHJcbmltcG9ydCB7ZG9tTG9hZGVyfSBmcm9tIFwiLi90ZW1wbGF0ZXNcIjtcclxuaW1wb3J0IHtkZXBlbmRlbmNpZXN9IGZyb20gXCJuZWVkbGVwb2ludFwiO1xyXG5pbXBvcnQge0dhbWVQYW5lbH0gZnJvbSBcIi4vZ2FtZVBhbmVsXCI7XHJcblxyXG5cclxuQGRlcGVuZGVuY2llcyhkb21Mb2FkZXIoJ2dhbWVzTGlzdCcpKVxyXG5leHBvcnQgY2xhc3MgR2FtZXNMaXN0VmlldyBleHRlbmRzIEdhbWVQYW5lbHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7RG9tVGVtcGxhdGV9IHRlbXBsYXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlKSB7XHJcbiAgICAgICAgc3VwZXIodGVtcGxhdGUuZ2V0Um9vdCgpKTtcclxuXHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWVTZWxlY3RlZEV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMubmV3R2FtZUV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubmV3R2FtZUV2ZW50LmVtaXQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8R2FtZT59IGdhbWVzTGlzdFxyXG4gICAgICovXHJcbiAgICBsb2FkR2FtZXMoZ2FtZXNMaXN0KSB7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZS5jbGVhclNsb3QoJ2dhbWVzJyk7XHJcblxyXG4gICAgICAgIGdhbWVzTGlzdC5mb3JFYWNoKGdhbWUgPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGJhbGFuY2UgPSBnYW1lLmdldFRvdGFsQmFsYW5jZSgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGdhbWVSb3cgPSB0aGlzLnRlbXBsYXRlLmNyZWF0ZSgnZ2FtZVJvdycpO1xyXG4gICAgICAgICAgICBnYW1lUm93LmZpbGxTbG90cyh7XHJcbiAgICAgICAgICAgICAgICByb3VuZE51bWJlcjogZ2FtZS5yb3VuZHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyMU5hbWU6IGdhbWUucGxheWVyc1swXS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyMk5hbWU6IGdhbWUucGxheWVyc1sxXS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyM05hbWU6IGdhbWUucGxheWVyc1syXS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyNE5hbWU6IGdhbWUucGxheWVyc1szXS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyMVNjb3JlOiBiYWxhbmNlWzBdLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyMlNjb3JlOiBiYWxhbmNlWzFdLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyM1Njb3JlOiBiYWxhbmNlWzJdLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyNFNjb3JlOiBiYWxhbmNlWzNdLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUuYXBwZW5kVG9TbG90KCdnYW1lcycsIGdhbWVSb3cpO1xyXG5cclxuICAgICAgICAgICAgZ2FtZVJvdy5nZXRSb290KCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVTZWxlY3RlZEV2ZW50LmVtaXQoZ2FtZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7R2FtZX0gZ2FtZVxyXG4gICAgICovXHJcbiAgICBfZ2V0R2FtZUxhYmVsKGdhbWUpIHtcclxuICAgICAgICBsZXQgYmFsYW5jZSA9IGdhbWUuZ2V0VG90YWxCYWxhbmNlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBgUnVuZGEgJHtnYW1lLnJvdW5kcy5sZW5ndGh9OiBcclxuICAgICAgICAgICAgJHtnYW1lLnBsYXllcnNbMF0ubmFtZX0gKCR7YmFsYW5jZVswXX0pLCBcclxuICAgICAgICAgICAgJHtnYW1lLnBsYXllcnNbMV0ubmFtZX0gKCR7YmFsYW5jZVsxXX0pLCBcclxuICAgICAgICAgICAgJHtnYW1lLnBsYXllcnNbMl0ubmFtZX0gKCR7YmFsYW5jZVsyXX0pLCBcclxuICAgICAgICAgICAgJHtnYW1lLnBsYXllcnNbM10ubmFtZX0gKCR7YmFsYW5jZVszXX0pYC5yZXBsYWNlKC9cXHMrL2csICcgJyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1N1aXRzLCBQdW5nLCBLb25nLCBDaG93LCBQYWlyLCBUaWxlR3JvdXBzLCBGcmVlVGlsZXN9IGZyb20gXCIuLi9oYW5kLmpzXCI7XHJcbmltcG9ydCB7RXZlbnRFbWl0dGVyfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcclxuaW1wb3J0IHtkb21Mb2FkZXJ9IGZyb20gXCIuL3RlbXBsYXRlcy5qc1wiO1xyXG5cclxuaW1wb3J0IHtkZXBlbmRlbmNpZXN9IGZyb20gJ25lZWRsZXBvaW50JztcclxuaW1wb3J0IHtHYW1lUGFuZWx9IGZyb20gXCIuL2dhbWVQYW5lbFwiO1xyXG5pbXBvcnQge3JlbmRlclRpbGV9IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG5AZGVwZW5kZW5jaWVzKGRvbUxvYWRlcignaGFuZCcpKVxyXG5jbGFzcyBIYW5kQ3JlYXRvclZpZXcgZXh0ZW5kcyBHYW1lUGFuZWx7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0RvbVRlbXBsYXRlfSB0ZW1wbGF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHRlbXBsYXRlLmdldFJvb3QoKSk7XHJcblxyXG4gICAgICAgIHRoaXMub25FZGl0RmluaXNoID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmFsbFRpbGVzID0gW107XHJcbiAgICAgICAgdGhpcy5hZGRlZFNldHMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWl0R3JvdXBzID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJy5zdWl0R3JvdXBzJyk7XHJcbiAgICAgICAgdGhpcy5oYW5kQ29udGVudHMgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLmhhbmRDb250ZW50Jyk7XHJcbiAgICAgICAgdGhpcy5oYW5kU2NvcmVSdWxlcyA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCcuaGFuZFNjb3JlUnVsZXMnKTtcclxuXHJcbiAgICAgICAgdGhpcy5mb3JtID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcclxuXHJcbiAgICAgICAgdGhpcy5oYW5kUmV2ZWFsZWRJbnB1dCA9IHRoaXMuZm9ybS5lbGVtZW50c1sncmV2ZWFsZWQnXTtcclxuICAgICAgICB0aGlzLnNwZWNpYWxTZXRJbnB1dCA9IHRoaXMuZm9ybS5lbGVtZW50c1snc3BlY2lhbFNldCddO1xyXG4gICAgICAgIHRoaXMuaXNXaW5uZXJJbnB1dCA9IHRoaXMuZm9ybS5lbGVtZW50c1snaXNXaW5uZXInXTtcclxuICAgICAgICB0aGlzLmxhc3RUaWxlRnJvbVdhbGxJbnB1dCA9IHRoaXMuZm9ybS5lbGVtZW50c1snbGFzdFRpbGVGcm9tV2FsbCddO1xyXG4gICAgICAgIHRoaXMubGFzdEF2YWlsYWJsZVRpbGVJbnB1dCA9IHRoaXMuZm9ybS5lbGVtZW50c1snbGFzdEF2YWlsYWJsZVRpbGUnXTtcclxuICAgICAgICB0aGlzLmxhc3RUaWxlU3BlY2lhbElucHV0ID0gdGhpcy5mb3JtLmVsZW1lbnRzWydsYXN0VGlsZVNwZWNpYWwnXTtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJOYW1lU2xvdCA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zbG90PVwicGxheWVyTmFtZVwiXScpO1xyXG4gICAgICAgIHRoaXMucm91bmROdW1iZXJTbG90ID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNsb3Q9XCJyb3VuZE51bWJlclwiXScpO1xyXG5cclxuICAgICAgICB0aGlzLmJ0bkZpbmlzaEhhbmQgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiZmluaXNoSGFuZFwiXScpO1xyXG5cclxuICAgICAgICB0aGlzLmJ0bkFkZFBhaXIgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiYWRkUGFpclwiXScpO1xyXG4gICAgICAgIHRoaXMuYnRuQWRkQ2hvdyA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJhZGRDaG93XCJdJyk7XHJcbiAgICAgICAgdGhpcy5idG5BZGRQdW5nID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImFkZFB1bmdcIl0nKTtcclxuICAgICAgICB0aGlzLmJ0bkFkZEtvbmcgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiYWRkS29uZ1wiXScpO1xyXG4gICAgICAgIHRoaXMuYnRuQWRkVGlsZXMgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiYWRkVGlsZXNcIl0nKTtcclxuXHJcbiAgICAgICAgdGhpcy5yb290LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuXHJcbiAgICAgICAgdGhpcy5idG5BZGRDaG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uTmV3U2V0Q2xpY2tlZCh0aWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZih0aWxlcy5sZW5ndGggIT09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ2hvdyh0aGlzLmdldEhhbmRSZXZlYWxlZFZhbHVlKCksIC4uLnRpbGVzKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ0bkFkZFB1bmcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25OZXdTZXRDbGlja2VkKHRpbGVzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKHRpbGVzLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFB1bmcodGhpcy5nZXRIYW5kUmV2ZWFsZWRWYWx1ZSgpLCB0aWxlc1swXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5idG5BZGRLb25nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uTmV3U2V0Q2xpY2tlZCh0aWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZih0aWxlcy5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBLb25nKHRoaXMuZ2V0SGFuZFJldmVhbGVkVmFsdWUoKSwgdGlsZXNbMF0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYnRuQWRkUGFpci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbk5ld1NldENsaWNrZWQodGlsZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYodGlsZXMubGVuZ3RoICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFpcih0aWxlc1swXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5idG5BZGRUaWxlcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbk5ld1NldENsaWNrZWQodGlsZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYodGlsZXMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZyZWVUaWxlcyh0aWxlcylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5idG5GaW5pc2hIYW5kLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGlsZXNldHMgPSB0aGlzLmFkZGVkU2V0cy5tYXAocyA9PiBzLnRpbGVzZXQpO1xyXG4gICAgICAgICAgICB0aGlzLm9uRWRpdEZpbmlzaC5lbWl0KHtcclxuICAgICAgICAgICAgICAgIHJvdW5kOiB0aGlzLmN1cnJlbnRFZGl0LnJvdW5kLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyOiB0aGlzLmN1cnJlbnRFZGl0LnBsYXllcixcclxuICAgICAgICAgICAgICAgIHRpbGVzZXRzOiB0aWxlc2V0cyxcclxuICAgICAgICAgICAgICAgIGlzV2lubmVyOiB0aGlzLmlzV2lubmVySW5wdXQuY2hlY2tlZCxcclxuICAgICAgICAgICAgICAgIGxhc3RUaWxlRnJvbVdhbGw6IHRoaXMubGFzdFRpbGVGcm9tV2FsbElucHV0LmNoZWNrZWQsXHJcbiAgICAgICAgICAgICAgICBsYXN0QXZhaWxhYmxlVGlsZTogdGhpcy5sYXN0QXZhaWxhYmxlVGlsZUlucHV0LmNoZWNrZWQsXHJcbiAgICAgICAgICAgICAgICBsYXN0VGlsZVNwZWNpYWw6IHRoaXMubGFzdFRpbGVTcGVjaWFsSW5wdXQuY2hlY2tlZCxcclxuICAgICAgICAgICAgICAgIHNwZWNpYWxTZXQ6IHRoaXMuc3BlY2lhbFNldElucHV0LnZhbHVlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0VUkoKSB7XHJcbiAgICAgICAgW1N1aXRzLkJBTUJPTywgU3VpdHMuQ0lSQ0xFLCBTdWl0cy5DSEFSQUNURVIsIFN1aXRzLldJTkQsIFN1aXRzLkRSQUdPTiwgU3VpdHMuQk9OVVNdLmZvckVhY2goc3VpdFR5cGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLnJlbmRlclRpbGVHcm91cChUaWxlR3JvdXBzW3N1aXRUeXBlXSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN1aXRHcm91cHMuYXBwZW5kQ2hpbGQoZ3JvdXApO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge1JvdW5kfSByb3VuZFxyXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxyXG4gICAgICovXHJcbiAgICBzaG93SGFuZChyb3VuZCwgcGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5hZGRlZFNldHMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoSGFuZENvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge0hhbmR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbGV0IGhhbmQgPSByb3VuZC5nZXRIYW5kKHBsYXllcikuaGFuZDtcclxuXHJcbiAgICAgICAgdGhpcy5pc1dpbm5lcklucHV0LmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RUaWxlRnJvbVdhbGxJbnB1dC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sYXN0QXZhaWxhYmxlVGlsZUlucHV0LmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RUaWxlU3BlY2lhbElucHV0LmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNwZWNpYWxTZXRJbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIEFycmF5LmZyb20odGhpcy5zcGVjaWFsU2V0SW5wdXQpLmZvckVhY2goaSA9PiBpLmNoZWNrZWQ9ZmFsc2UpO1xyXG5cclxuICAgICAgICBpZihoYW5kKSB7XHJcbiAgICAgICAgICAgIGhhbmQuc2V0cy5mb3JFYWNoKHMgPT4gdGhpcy5yZW5kZXJOZXdUaWxlc2V0KHMpKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHJvdW5kLndpbm5lciA9PT0gcGxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzV2lubmVySW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0VGlsZUZyb21XYWxsSW5wdXQuY2hlY2tlZCA9IHJvdW5kLmxhc3RUaWxlRnJvbVdhbGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RBdmFpbGFibGVUaWxlSW5wdXQuY2hlY2tlZCA9IHJvdW5kLmxhc3RBdmFpbGFibGVUaWxlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0VGlsZVNwZWNpYWxJbnB1dC5jaGVja2VkID0gcm91bmQubGFzdFRpbGVTcGVjaWFsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihoYW5kLnNwZWNpYWxTZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BlY2lhbFNldElucHV0LnZhbHVlID0gaGFuZC5zcGVjaWFsU2V0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgc2NvcmUgPSByb3VuZC5zY29yZUNhbGN1bGF0b3IuY2FsY3VsYXRlRXh0ZW5kZWRTY29yZShyb3VuZCwgcGxheWVyKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU2NvcmVSdWxlcyhzY29yZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJvdW5kTnVtYmVyU2xvdC50ZXh0Q29udGVudCA9IHJvdW5kLnJvdW5kTnVtYmVyO1xyXG4gICAgICAgIHRoaXMucGxheWVyTmFtZVNsb3QudGV4dENvbnRlbnQgPSBwbGF5ZXIubmFtZTtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50RWRpdCA9IHtcclxuICAgICAgICAgICAgcGxheWVyOiBwbGF5ZXIsXHJcbiAgICAgICAgICAgIHJvdW5kOiByb3VuZCxcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyU2NvcmVSdWxlcyhzY29yZSkge1xyXG4gICAgICAgIHdoaWxlKHRoaXMuaGFuZFNjb3JlUnVsZXMuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRTY29yZVJ1bGVzLnJlbW92ZUNoaWxkKHRoaXMuaGFuZFNjb3JlUnVsZXMuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcnVsZXMgPSBbXS5jb25jYXQoXHJcbiAgICAgICAgICAgIC4uLnNjb3JlLnBvaW50cy5tYXAocnVsZSA9PiBgJHtydWxlLnJ1bGUuY29uc3RydWN0b3IubmFtZX06ICske3J1bGUuYW1vdW50fWApLFxyXG4gICAgICAgICAgICAuLi5zY29yZS5tdWx0aXBsaWVycy5tYXAocnVsZSA9PiBgJHtydWxlLnJ1bGUuY29uc3RydWN0b3IubmFtZX06IHgke3J1bGUuYW1vdW50fWApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcnVsZXMuZm9yRWFjaChydWxlU3RyID0+IHtcclxuICAgICAgICAgICAgbGV0IHJ1bGVOb2RlID0gdGhpcy5oYW5kU2NvcmVSdWxlcy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XHJcbiAgICAgICAgICAgIHJ1bGVOb2RlLnRleHRDb250ZW50ID0gcnVsZVN0cjtcclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJUaWxlR3JvdXAodGlsZXMpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcclxuXHJcbiAgICAgICAgdGlsZXMuZm9yRWFjaCh0aWxlID0+IHtcclxuICAgICAgICAgICAgbGV0IHRpbGVWaWV3ID0gbmV3IEhhbmRDcmVhdG9yVGlsZVZpZXcodGlsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsVGlsZXMucHVzaCh0aWxlVmlldyk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmRDaGlsZCh0aWxlVmlldy52aWV3KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBvbk5ld1NldENsaWNrZWQoY2FsbGJhY2spIHtcclxuICAgICAgICBsZXQgdGlsZXMgPSB0aGlzLmFsbFRpbGVzLmZpbHRlcih0ID0+IHQuc2VsZWN0ZWQpLm1hcCh0ID0+IHQudGlsZSk7XHJcblxyXG4gICAgICAgIGxldCBuZXdTZXQgPSBjYWxsYmFjayh0aWxlcyk7XHJcblxyXG4gICAgICAgIGlmKG5ld1NldCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlck5ld1RpbGVzZXQobmV3U2V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWxsVGlsZXMuZm9yRWFjaCh0ID0+IHQucmVzZXRTZWxlY3RlZCgpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJOZXdUaWxlc2V0KHRpbGVzZXQpIHtcclxuICAgICAgICBsZXQgdmlldyA9IHRoaXMucmVuZGVyTmV3VGlsZXModGlsZXNldCwgdGlsZXNldC50aWxlcywgdGlsZXNldC5pc1JldmVhbGVkKTtcclxuXHJcbiAgICAgICAgdmlldy5vblJlbW92ZS5hZGRMaXN0ZW5lcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkZWRTZXRzLnNwbGljZSh0aGlzLmFkZGVkU2V0cy5pbmRleE9mKHZpZXcpLCAxKTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoSGFuZENvbnRlbnQoKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuYWRkZWRTZXRzLnB1c2godmlldyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyTmV3VGlsZXModGlsZXNldCwgdGlsZXMsIHJldmVhbGVkKSB7XHJcbiAgICAgICAgbGV0IHZpZXcgPSBuZXcgSGFuZEFkZGVkVGlsZXNWaWV3KHRpbGVzZXQsIHRpbGVzLCByZXZlYWxlZCB8fCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZENvbnRlbnRzLmFwcGVuZENoaWxkKHZpZXcudmlldyk7XHJcblxyXG4gICAgICAgIHJldHVybiB2aWV3O1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hIYW5kQ29udGVudCgpIHtcclxuICAgICAgICB3aGlsZSh0aGlzLmhhbmRDb250ZW50cy5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZENvbnRlbnRzLnJlbW92ZUNoaWxkKHRoaXMuaGFuZENvbnRlbnRzLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hZGRlZFNldHMuZm9yRWFjaChzZXRWaWV3ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kQ29udGVudHMuYXBwZW5kQ2hpbGQoc2V0Vmlldy52aWV3KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdldEhhbmRSZXZlYWxlZFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiAhIXRoaXMuaGFuZFJldmVhbGVkSW5wdXQudmFsdWU7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBIYW5kQ3JlYXRvclRpbGVWaWV3IHtcclxuICAgIGNvbnN0cnVjdG9yKHRpbGUpIHtcclxuICAgICAgICB0aGlzLnRpbGUgPSB0aWxlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgIHRoaXMudmlldy5hcHBlbmRDaGlsZChyZW5kZXJUaWxlKHRpbGUpKTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gIXRoaXMuc2VsZWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnLCB0aGlzLnNlbGVjdGVkKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBIYW5kQWRkZWRUaWxlc1ZpZXcge1xyXG4gICAgY29uc3RydWN0b3IodGlsZXNldCwgdGlsZXMsIHJldmVhbGVkKSB7XHJcbiAgICAgICAgdGhpcy50aWxlcyA9IHRpbGVzO1xyXG4gICAgICAgIHRoaXMudGlsZXNldCA9IHRpbGVzZXQ7XHJcblxyXG4gICAgICAgIHRoaXMub25SZW1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcclxuXHJcbiAgICAgICAgaWYocmV2ZWFsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ3JldmVhbGVkU2V0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpbGVzLmZvckVhY2godGlsZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLnZpZXcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSk7XHJcbiAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChyZW5kZXJUaWxlKHRpbGUpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGRlbEJ1dHRvbiA9IHRoaXMudmlldy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKTtcclxuICAgICAgICBkZWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aW9uRGVsZXRlJyk7XHJcblxyXG4gICAgICAgIGRlbEJ1dHRvbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnWCcpKTtcclxuICAgICAgICBkZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25SZW1vdmUuZW1pdCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7SGFuZENyZWF0b3JWaWV3fSIsImltcG9ydCB7RXZlbnRFbWl0dGVyfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHtkb21Mb2FkZXJ9IGZyb20gXCIuL3RlbXBsYXRlc1wiO1xyXG5pbXBvcnQge2RlcGVuZGVuY2llc30gZnJvbSBcIm5lZWRsZXBvaW50XCI7XHJcbmltcG9ydCB7R2FtZVBhbmVsfSBmcm9tIFwiLi9nYW1lUGFuZWxcIjtcclxuaW1wb3J0IHtQbGF5ZXJ9IGZyb20gXCIuLi9nYW1lXCI7XHJcblxyXG5cclxuQGRlcGVuZGVuY2llcyhkb21Mb2FkZXIoJ25ld0dhbWVGb3JtJykpXHJcbmV4cG9ydCBjbGFzcyBOZXdHYW1lRm9ybVZpZXcgZXh0ZW5kcyBHYW1lUGFuZWwge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtEb21UZW1wbGF0ZX0gdGVtcGxhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGUpIHtcclxuICAgICAgICBzdXBlcih0ZW1wbGF0ZS5nZXRSb290KCkpO1xyXG5cclxuICAgICAgICB0aGlzLm5ld0dhbWVDcmVhdGVFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLmNhbmNlbEV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmZvcm0gPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignZm9ybScpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKSk7XHJcblxyXG4gICAgICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLm5ld0dhbWVDcmVhdGVFdmVudC5lbWl0KHRoaXMuX2dldFBsYXllcnMoKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZm9ybS5lbGVtZW50cy5jYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxFdmVudC5lbWl0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBzdXBlci5zaG93KCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gaW5wdXQudmFsdWUgPSAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFBsYXllcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgbmV3IFBsYXllcigwLCB0aGlzLmZvcm0uZWxlbWVudHMucGxheWVyMU5hbWUudmFsdWUpLFxyXG4gICAgICAgICAgICBuZXcgUGxheWVyKDEsIHRoaXMuZm9ybS5lbGVtZW50cy5wbGF5ZXIyTmFtZS52YWx1ZSksXHJcbiAgICAgICAgICAgIG5ldyBQbGF5ZXIoMiwgdGhpcy5mb3JtLmVsZW1lbnRzLnBsYXllcjNOYW1lLnZhbHVlKSxcclxuICAgICAgICAgICAgbmV3IFBsYXllcigzLCB0aGlzLmZvcm0uZWxlbWVudHMucGxheWVyNE5hbWUudmFsdWUpLFxyXG4gICAgICAgIF1cclxuICAgIH1cclxufSIsImltcG9ydCB7ZGVwZW5kZW5jaWVzLCBzaW5nbGV0b24sIGNvbnRhaW5lcn0gZnJvbSAnbmVlZGxlcG9pbnQnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRvbUxvYWRlcihuYW1lKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IHRtcGwgPSBjb250YWluZXIucmVzb2x2ZShUZW1wbGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgcmV0dXJuIHRtcGwuY3JlYXRlKG5hbWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ac2luZ2xldG9uXHJcbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZUNvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZXMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4ge0RvbVRlbXBsYXRlfVxyXG4gICAgICovXHJcbiAgICBjcmVhdGUobmFtZSkge1xyXG4gICAgICAgIGxldCB0bXBsID0gdGhpcy5fdGVtcGxhdGVzW25hbWVdO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9tVGVtcGxhdGUoZG9jdW1lbnQuaW1wb3J0Tm9kZSh0bXBsLmNvbnRlbnQsIHRydWUpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGRvbVRyZWVcclxuICAgICAqL1xyXG4gICAgZGlzY292ZXIoZG9tVHJlZSkge1xyXG4gICAgICAgIEFycmF5LmZyb20oZG9tVHJlZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpKS5mb3JFYWNoKHRtcGxOb2RlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGVzW3RtcGxOb2RlLmRhdGFzZXQubmFtZV0gPSB0bXBsTm9kZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUZW1wbGF0ZU5hbWVzKCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl90ZW1wbGF0ZXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQHR5cGVkZWYge09iamVjdH0gVGVtcGxhdGVTbG90XHJcbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR9IG5vZGVcclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG5hbWVcclxuICovXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIERvbVRlbXBsYXRlIGV4dGVuZHMgVGVtcGxhdGVDb250YWluZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGUpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICAgICAgdGhpcy5yb290ID0gdGhpcy50ZW1wbGF0ZS5maXJzdEVsZW1lbnRDaGlsZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge0FycmF5PFRlbXBsYXRlU2xvdD59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fc2xvdHMgPSB0aGlzLl9maW5kU2xvdHModGVtcGxhdGUpO1xyXG5cclxuICAgICAgICB0aGlzLmRpc2NvdmVyKHRlbXBsYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBfZmluZFNsb3RzKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNsb3RdJykpLm1hcChzbG90Tm9kZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBub2RlOiBzbG90Tm9kZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHNsb3ROb2RlLmRhdGFzZXQuc2xvdFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBfdmFsdWVUb05vZGUodmFsKSB7XHJcbiAgICAgICAgaWYodmFsIGluc3RhbmNlb2YgRG9tVGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbC50ZW1wbGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnK3ZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsbFNsb3RzKHNsb3RWYWx1ZXMpIHtcclxuICAgICAgICB0aGlzLl9zbG90cy5mb3JFYWNoKHNsb3QgPT4ge1xyXG4gICAgICAgICAgICBpZihzbG90Lm5hbWUgaW4gc2xvdFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgc2xvdC5ub2RlLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICBzbG90Lm5vZGUuYXBwZW5kQ2hpbGQodGhpcy5fdmFsdWVUb05vZGUoc2xvdFZhbHVlc1tzbG90Lm5hbWVdKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxTbG90KG5hbWUsIHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3Nsb3RzLmZvckVhY2goc2xvdCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzbG90Lm5hbWUgPT09IG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHNsb3Qubm9kZS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgc2xvdC5ub2RlLmFwcGVuZENoaWxkKHRoaXMuX3ZhbHVlVG9Ob2RlKHZhbCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjbGVhclNsb3QobmFtZSkge1xyXG4gICAgICAgIHRoaXMuX3Nsb3RzLmZvckVhY2goc2xvdCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzbG90Lm5hbWUgPT09IG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHNsb3Qubm9kZS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kVG9TbG90KG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fc2xvdHMuZm9yRWFjaChzbG90ID0+IHtcclxuICAgICAgICAgICAgaWYgKHNsb3QubmFtZSA9PT0gbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgc2xvdC5ub2RlLmFwcGVuZENoaWxkKHRoaXMuX3ZhbHVlVG9Ob2RlKHZhbHVlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgIGdldFJvb3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdDtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0ge1RpbGV9IHRpbGVcclxuICogQHJldHVybiB7SFRNTEVsZW1lbnR9XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyVGlsZSh0aWxlKSB7XHJcbiAgICBsZXQgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgndGlsZS1pY29uJyk7XHJcbiAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2ljb24tJyt0aWxlLnRvVHlwZVN0cmluZygpKTtcclxuICAgIGVsZW0uc2V0QXR0cmlidXRlKCdkYXRhLXRpbGUnLCB0aWxlLnRvVHlwZVN0cmluZygpKTtcclxuICAgIHJldHVybiBlbGVtO1xyXG59IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH1cblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxuICogQHBhY2thZ2UgbmVlZGxlcG9pbnRcbiAqIEBjb3B5cmlnaHQgMjAxNSBBbmRyZXcgTXVuc2VsbCA8YW5kcmV3QHdpemFyZGFwcHMubmV0PlxuICovXG5cbi8vIEN1cnJlbnRseSBpbml0aWFsaXplZCBpbnN0YW5jZXMgZm9yIHNpbmdsZXRvbnNcbnZhciBkZXBlbmRlbmNpZXMgPSBuZXcgTWFwKCk7XG52YXIgc2luZ2xldG9ucyA9IG5ldyBNYXAoKTtcblxudmFyIENvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29udGFpbmVyKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29udGFpbmVyLCBudWxsLCBbe1xuICAgICAgICBrZXk6ICdyZXNvbHZlJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzb2x2ZSBhIHNpbmdsZSBjbGFzcyB0byBhbiBpbnN0YW5jZSwgaW5qZWN0aW5nIGRlcGVuZGVuY2llcyBhcyBuZWVkZWRcbiAgICAgICAgICogQHBhcmFtICB7Y2xhc3N8c3RyaW5nfSBjbGF6elxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgIEluc3RhbmNlIG9mIHRoZSBjbGFzc1xuICAgICAgICAgKi9cbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmUoY2xhenopIHtcbiAgICAgICAgICAgIGNsYXp6ID0gQ29udGFpbmVyLm5vcm1hbGl6ZUNsYXNzKGNsYXp6KTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIGNsYXNzIGJlaW5nIGluamVjdGVkIGlzIGEgc2luZ2xldG9uLCBoYW5kbGUgaXQgc2VwYXJhdGVseVxuICAgICAgICAgICAgLy8gc2luY2UgaW5zdGFuY2VzIG9mIGl0IGFyZSBjYWNoZWQuXG4gICAgICAgICAgICBpZiAoc2luZ2xldG9ucy5oYXMoY2xhenopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnRhaW5lci5yZXNvbHZlU2luZ2xldG9uKGNsYXp6KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnRhaW5lci5yZXNvbHZlU2luZ2xlSW5zdGFuY2UoY2xhenopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc29sdmUgdGhlIHNwZWNpZmllZCBjbGFzc2VzLCBpbmplY3RpbmcgZGVwZW5kZW5jaWVzIGFzIG5lZWRlZFxuICAgICAgICAgKiBAcGFyYW0gIHtjbGFzc3xzdHJpbmd9IC4uLmNsYXNzZXNcbiAgICAgICAgICogQHJldHVybiB7Li4ub2JqZWN0fVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVzb2x2ZUFsbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlQWxsKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2xhc3Nlcy5tYXAoQ29udGFpbmVyLnJlc29sdmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc29sdmUgYSBjbGFzcyBpbnRvIGEgc2luZ2xldG9uIGluc3RhbmNlLiBUaGlzIHNpbmdsZSBpbnN0YW5jZSB3aWxsIGJlXG4gICAgICAgICAqIHVzZWQgYWNyb3NzIHRoZSBlbnRpcmUgYXBwbGljYXRpb24uXG4gICAgICAgICAqIEBwYXJhbSAge2NsYXNzfHN0cmluZ30gY2xhenpcbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0fSAgICAgICBSZXNvbHZlZCBpbnN0YW5jZSBvZiB0aGUgY2xhc3MgYXMgYSBzaW5nbGV0b25cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Jlc29sdmVTaW5nbGV0b24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZVNpbmdsZXRvbihjbGF6eikge1xuICAgICAgICAgICAgaWYgKHNpbmdsZXRvbnMuZ2V0KGNsYXp6KSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNpbmdsZXRvbnMuc2V0KGNsYXp6LCBDb250YWluZXIucmVzb2x2ZVNpbmdsZUluc3RhbmNlKGNsYXp6KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzaW5nbGV0b25zLmdldChjbGF6eik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzb2x2ZSBhIGNsYXNzIGludG8gYW4gaW5zdGFuY2Ugd2l0aCBhbGwgb2YgaXRzIGRlcGVuZGVuY2llcyBpbmplY3RlZC5cbiAgICAgICAgICogQHBhcmFtICB7Y2xhc3N8c3RyaW5nfSBjbGF6elxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgIFJlc29sdmVkIGluc3RhbmNlIG9mIHRoZSBjbGFzc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVzb2x2ZVNpbmdsZUluc3RhbmNlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmVTaW5nbGVJbnN0YW5jZShjbGF6eikge1xuICAgICAgICAgICAgLy8gQ2hlY2sgYW5kIHNlZSBpZiB0aGVyZSBhcmUgYW55IGRlcGVuZGVuY2llcyB0aGF0IG5lZWQgdG8gYmUgaW5qZWN0ZWRcbiAgICAgICAgICAgIHZhciBkZXBzID0gQ29udGFpbmVyLnJlc29sdmVBbGwuYXBwbHkoQ29udGFpbmVyLCBfdG9Db25zdW1hYmxlQXJyYXkoZGVwZW5kZW5jaWVzLmdldChjbGF6eikgfHwgW10pKTtcblxuICAgICAgICAgICAgLy8gQXBwbHkgdGhlIGRlcGVuZGVuY2llcyBhbmQgY3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBjbGFzc1xuICAgICAgICAgICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoY2xhenosIFtudWxsXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGRlcHMpKSkpKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzb2x2ZSBhIGRlcGVuZGVuY3kgaW50byBpdHMgY2xhc3MuXG4gICAgICAgICAqIEBwYXJhbSAge2NsYXNzfGZ1bmN0aW9ufHN0cmluZ30gY2xhenpcbiAgICAgICAgICogQHJldHVybiB7Y2xhc3N9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdub3JtYWxpemVDbGFzcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBub3JtYWxpemVDbGFzcyhjbGF6eikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjbGF6eiA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEFjdHVhbGx5IHJlc29sdmUgdGhlIGNsYXNzIGZyb20gdGhlIHN0cmluZyBuYW1lIHRoYXRcbiAgICAgICAgICAgICAgICAvLyB3YXMgcHJvdmlkZWQgdG8gdXMuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjbGF6eiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGF6ejtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byByZXNvbHZlIHRoZSBkZXBlbmRlbmN5IG5hbWUgdG8gdGhlIGNsYXNzLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlciBhbiBpbnN0YW5jZSBhcyBhIHNpbmdsZXRvbiBmb3IgdGhlIHNwZWNpZmllZCBjbGFzc1xuICAgICAgICAgKiBAcGFyYW0gIHtjbGFzc3xzdHJpbmd9IGNsYXp6XG4gICAgICAgICAqIEBwYXJhbSAge29iamVjdH0gaW5zdGFuY2VcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlZ2lzdGVySW5zdGFuY2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YW5jZShjbGF6eiwgaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGlmICgodHlwZW9mIGluc3RhbmNlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnN0YW5jZSkpICE9ICdvYmplY3QnICYmIHR5cGVvZiBpbnN0YW5jZSAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgYXJndW1lbnQgcGFzc2VkIHdhcyBhbiBpbnZhbGlkIHR5cGUuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNsYXp6ID0gQ29udGFpbmVyLm5vcm1hbGl6ZUNsYXNzKGNsYXp6KTtcblxuICAgICAgICAgICAgc2luZ2xldG9ucy5zZXQoY2xhenosIGluc3RhbmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlciB0aGUgbGlzdCBvZiBkZXBlbmRlbmNpZXMgcmVxdWlyZWQgZm9yIHRoZSBzcGVjaWZpZWQgY2xhc3MuXG4gICAgICAgICAqIEBwYXJhbSAge2NsYXNzfSBjbGF6eiAgICAgICAgQ2xhc3MgdG8gcmVnaXN0ZXIgZGVwZW5kZW5jaWVzIGZvclxuICAgICAgICAgKiBAcGFyYW0gIHthcnJheX0gZGVwZW5kZW5jaWVzIEFycmF5IG9mIGRlcGVuZGVuY2llcyBmb3IgdGhlIGNsYXNzXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZWdpc3RlckRlcGVuZGVuY2llcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlckRlcGVuZGVuY2llcyhjbGF6eiwgZGVwcykge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzLnNldChjbGF6eiwgZGVwcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXIgdGhlIHNwZWNpZmllZCBjbGFzcyBhcyBhIHNpbmdsZXRvbiwgbWVhbmluZyBvbmx5IGEgc2luZ2xlXG4gICAgICAgICAqIGluc3RhbmNlIG9mIGl0IHdpbGwgYmUgY3JlYXRlZCBmb3IgdGhlIGVudGlyZSBhcHBsaWNhdGlvbi5cbiAgICAgICAgICogQHBhcmFtICB7Y2xhc3N9IGNsYXp6XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZWdpc3RlckFzU2luZ2xldG9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyQXNTaW5nbGV0b24oY2xhenopIHtcbiAgICAgICAgICAgIGlmICghc2luZ2xldG9ucy5oYXMoY2xhenopKSB7XG4gICAgICAgICAgICAgICAgc2luZ2xldG9ucy5zZXQoY2xhenosIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbnRhaW5lcjtcbn0pKCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IENvbnRhaW5lcjsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGRlcGVuZGVuY2llcztcblxudmFyIF9jb250YWluZXIgPSByZXF1aXJlKCcuL2NvbnRhaW5lcicpO1xuXG52YXIgX2NvbnRhaW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb250YWluZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBkZXBlbmRlbmNpZXMoKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGRlcHMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgZGVwc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gZGVjb3JhdG9yKENsYXp6KSB7XG4gICAgICAgIF9jb250YWluZXIyLmRlZmF1bHQucmVnaXN0ZXJEZXBlbmRlbmNpZXMoQ2xhenosIGRlcHMpO1xuICAgIH07XG59IC8qKlxuICAgKiBAcGFja2FnZSBuZWVkbGVwb2ludFxuICAgKiBAY29weXJpZ2h0IDIwMTUgQW5kcmV3IE11bnNlbGwgPGFuZHJld0B3aXphcmRhcHBzLm5ldD5cbiAgICovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NvbnRhaW5lciA9IHJlcXVpcmUoJy4vY29udGFpbmVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnY29udGFpbmVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2NvbnRhaW5lci5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9zaW5nbGV0b24gPSByZXF1aXJlKCcuL3NpbmdsZXRvbicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ3NpbmdsZXRvbicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9zaW5nbGV0b24uZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZGVwZW5kZW5jaWVzID0gcmVxdWlyZSgnLi9kZXBlbmRlbmNpZXMnKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdkZXBlbmRlbmNpZXMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfZGVwZW5kZW5jaWVzLmRlZmF1bHQ7XG4gIH1cbn0pOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHNpbmdsZXRvbjtcblxudmFyIF9jb250YWluZXIgPSByZXF1aXJlKCcuL2NvbnRhaW5lcicpO1xuXG52YXIgX2NvbnRhaW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb250YWluZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBzaW5nbGV0b24oQ2xhenopIHtcbiAgX2NvbnRhaW5lcjIuZGVmYXVsdC5yZWdpc3RlckFzU2luZ2xldG9uKENsYXp6KTtcbn0gLyoqXG4gICAqIEBwYWNrYWdlIG5lZWRsZXBvaW50XG4gICAqIEBjb3B5cmlnaHQgMjAxNSBBbmRyZXcgTXVuc2VsbCA8YW5kcmV3QHdpemFyZGFwcHMubmV0PlxuICAgKi8iXX0="}